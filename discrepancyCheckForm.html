<!DOCTYPE html>
<html>

<head>
  <base target="_top">
  <style>
    /* comment */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: Arial, sans-serif;
      font-size: 12px;
      line-height: 1.4;
      color: #333;
      width: 100%;
      height: 100%;
      overflow-y: auto;
    }

    .container {
      padding: 15px;
      height: 100%;
      display: flex;
      flex-direction: column;
    }

    .header {
      background-color: white;
      border: 1px solid #ddd;
      border-radius: 4px;
      padding: 10px;
      margin-bottom: 15px;
      display: grid;
      grid-template-columns: 100px 1fr 1fr 1fr 1fr;
      gap: 10px;
    }

    .header-status {
      display: flex;
      align-items: center;
      font-family: monospace;
      font-size: 11px;
      color: #4a5568;
    }

    .header-field {
      display: flex;
      flex-direction: column;
    }

    .header-field label {
      font-weight: bold;
      margin-bottom: 3px;
      color: #007C3D;
    }

    .header-field-input {
      border: 1px solid #ccc;
      border-radius: 3px;
      background: #edf2f7;
      padding: 6px 8px;
      font-family: monospace;
      font-size: 11px;
      color: #4a5568;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .header-field input:focus {
      outline: none;
      border: 1px solid #ccc;
      box-shadow: none;
    }

    .tabs {
      flex: 1;
      display: flex;
      flex-direction: column;
      margin-bottom: 15px;
    }

    .tab-buttons {
      display: flex;
      background-color: #f0f0f0;
      border-radius: 4px 4px 0 0;
      overflow-x: auto;
    }

    .tab-button {
      padding: 8px 12px;
      border: none;
      background-color: transparent;
      cursor: pointer;
      font-size: 11px;
      white-space: nowrap;
      border-bottom: 2px solid transparent;
      transition: all 0.3s ease;
    }

    .tab-button:hover {
      background-color: #e0e0e0;
    }

    .tab-button.active {
      background-color: white;
      border-bottom-color: #007C3D;
      color: #007C3D;
      font-weight: bold;
    }

    .tab-content {
      flex: 1;
      background-color: white;
      border: 1px solid #ddd;
      border-top: none;
      border-radius: 0 0 4px 4px;
      padding: 15px;
      overflow-y: auto;
    }

    .tab-panel {
      display: none;
      height: 100%;
    }

    .tab-panel.active {
      display: block;
    }

    .form-group {
      margin-bottom: 15px;
    }

    .form-group label {
      display: block;
      font-weight: bold;
      margin-bottom: 5px;
      color: #333;
    }

    .form-group input[type="text"],
    .form-group select {
      width: 100%;
      padding: 6px;
      border: 1px solid #ccc;
      border-radius: 3px;
      font-size: 11px;
    }

    .style-select {
      width: 100%;
      padding: 6px;
      border: 1px solid #ccc;
      border-radius: 3px;
      font-size: 11px;
    }

    .form-group input[type="text"]:focus,
    .form-group select:focus {
      outline: none;
      border-color: #007C3D;
      box-shadow: 0 0 3px rgba(0, 124, 61, 0.3);
    }

    .checkbox-group {
      margin-top: 8px;
    }

    .checkbox-item {
      display: flex;
      align-items: flex-start;
      margin-bottom: 8px;
    }

    .checkbox-item input[type="checkbox"] {
      margin-right: 8px;
      margin-top: 2px;
      accent-color: #007C3D;
    }

    .checkbox-item label {
      font-weight: normal;
      margin-bottom: 0;
      line-height: 1.3;
      cursor: pointer;
    }

    .conditional-field {
      margin-left: 20px;
      margin-top: 10px;
      padding: 10px;
      background-color: #f8f8f8;
      border-left: 3px solid #007C3D;
      border-radius: 0 3px 3px 0;
    }

    .conditional-field.disabled {
      opacity: 0.5;
      pointer-events: none;
    }

    .button-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 0;
      border-top: 1px solid #ddd;
      background-color: white;
    }

    .btn {
      padding: 8px 16px;
      border: 1px solid #ccc;
      border-radius: 3px;
      cursor: pointer;
      font-size: 11px;
      text-decoration: none;
      display: inline-block;
      transition: all 0.3s ease;
    }

    .btn-guidance {
      background-color: #f0f0f0;
      color: #333;
    }

    .btn-guidance:hover {
      background-color: #e0e0e0;
    }

    .btn-close {
      background-color: #f0f0f0;
      color: #333;
    }

    .btn-close:hover {
      background-color: #e0e0e0;
    }

    .btn-save {
      background-color: #007C3D;
      color: white;
      border-color: #007C3D;
    }

    .btn-save:hover {
      background-color: #006533;
      border-color: #006533;
    }

    .empty-tab {
      text-align: center;
      color: #666;
      font-style: italic;
      padding: 50px 20px;
    }

    .form-columns {
      display: flex;
      gap: 40px;
      flex-wrap: wrap;
    }

    .form-column {
      flex: 1;
      min-width: 300px;
    }

    .domain-title {
      color: #007C3D;
      margin-bottom: 20px;
      font-size: 14px;
    }

    .question-elem-titles {
      font-weight: bold;
      color: #007C3D;
      border-bottom: 1px solid #ddd;
      padding-bottom: 5px;
      font-size: 11px;
    }

    .question-elem-titles-centralized {
      font-weight: bold;
      color: #007C3D;
      border-bottom: 1px solid #ddd;
      padding-bottom: 5px;
      text-align: center;
      font-size: 11px;
    }

    .domain-question-text {
      padding: 6px 0;
      font-size: 12px;
    }

    .domain-question-select {
      width: 100%;
      padding: 4px;
      border: 1px solid #ccc;
      border-radius: 3px;
      font-size: 12px;
      background: #F0F0F0;
    }

    .domain-question-textarea {
      width: 100%;
      padding: 4px;
      border: 1px solid #ccc;
      border-radius: 3px;
      font-size: 12px;
      resize: none;
    }

    .container-discrepancy-check-responses {
      display: grid;
      grid-template-columns: 2fr 100px 2fr 100px 2fr;
      gap: 10px;
      margin-bottom: 20px;
      border: 1px solid #ddd;
      border-radius: 4px;
      padding: 12px;
      background-color: #fafafa;
      align-items: center;
    }

    .container-discrepancy-check-risk-bias-jud {
      display: flex;
      gap: 5px;
    }

    .domain-rob-jud-select-div {
      display: flex;
      gap: 8px;
    }

    .domain-rob-jud-select {
      width: 150px;
      padding: 4px;
      border: 1px solid #ccc;
      border-radius: 3px;
      font-size: 12px;
      background: #F0F0F0;
    }

    .domain-rob-jud-textarea {
      height: 55px;
      padding: 4px;
      border: 1px solid #ccc;
      border-radius: 3px;
      font-size: 12px;
      resize: none;
      width: 250px;
    }

    .domain-rob-jud-title {
      color: #007C3D;
      margin-bottom: 10px;
      font-size: 12px;
    }

    .domain-rob-jud-div {
      margin-bottom: 8px;
      width: 570.7px;
    }

    .domain-rob-jud-div-overall-bias {
      margin-bottom: 8px;
    }

    .domain-rob-jud-div-check {
      margin-bottom: 8px;
      padding-top: 27px;
      width: 347.5px;
    }

    .domain-rob-jud-alg-result-assessor-jud-div {
      display: flex;
      gap: 20px;
    }

    .domain-rob-jud-alg-result-div {
      flex: 0.66;
    }

    .domain-rob-jud-alg-result-assessor-jud-label {
      font-weight: bold;
      font-size: 12px;
      display: block;
      margin-bottom: 5px;
    }

    .domain-alg-result {
      background-color: #f0f0f0;
      padding: 6px 10px;
      border-radius: 3px;
      border: 1px solid #ccc;
      color: #666;
      font-family: monospace;
      font-size: 12px;
      height: 52px;
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .domain-rob-jud-vert-sep-alg-result-assessor-jud {
      width: 1px;
      background-color: #ddd;
      margin: 0 5px;
    }

    .domain-rob-jud-assessor-jud-div {
      flex: 2;
    }

    .domain-rob-bias-direction-div {
      margin-bottom: 8px;
    }

    .domain-rob-bias-direction-div-itens {
      display: flex;
      align-items: flex-start;
      gap: 12px;
    }

    .domain-rob-bias-direction-label {
      font-weight: bold;
      font-size: 12px;
      min-width: 200px;
      padding-top: 4px;
      width: 259px;
    }

    .domain-rob-bias-direction-div-select {
      flex: 1;
      display: flex;
      gap: 8px;
    }

    dialog {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      border: none;
      border-radius: 8px;
      box-shadow: 0 0 2em rgba(0, 0, 0, 0.3);
      width: 90%;
      max-width: 600px;
      padding: 1.5rem;
    }

    dialog::backdrop {
      background-color: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(2px);
    }

    .conteudo-modal {
      max-height: 60vh;
      overflow-y: auto;
      margin-bottom: 1rem;
    }

    .modal-actions {
      text-align: right;
    }

    .statement-multiple-questions {
      grid-column: 1 / -1;
      font-style: italic;
      font-size: 12px;
    }

    .sub-item {
      padding-left: 15px;
    }

    .overall-bias-div {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 20px;
      padding-bottom: 10px;
    }

    .column-overall-bias-div {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .overall-bias-domain-title-and-status {
      display: flex;
      align-items: center;
    }

    .overall-bias-domain-status {
      height: 35px;
      width: 35px;
      border-radius: 50%;
      margin-right: 12px;
      flex-shrink: 0;
      background-color: #F0F0F0;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #666;
      font-weight: 500;
      font-family: monospace;
      font-size: 15px;
      border: 1px solid #CCC;
    }

    a.disabled {
      color: gray;
      text-decoration: none;
      pointer-events: none;
      cursor: default;
    }
  </style>
</head>

<body>
  <div class="container">

    <div class="header">
      <div id="status-text" class="header-status">
        Loading data...
      </div>
      <div class="header-field">
        
        <label id="assessment-status">Assessment ID</label>
        <select id="header-assessment-id" class="header-field-input" onchange="onChangeAssessmentID()" disabled>
          <option id="header-assessment-id-option" value="">New:</option>
        </select>
      </div>
      <div class="header-field">
        <label>Assessor</label>
        <input class="header-field-input" type="text" id="header-assessor" readonly>
      </div>
      <div class="header-field">
        <label>Study ID</label>
        <input class="header-field-input" type="text" id="header-study-id" readonly>
      </div>
      <div class="header-field">
        <label>&nbsp</label>
        <input class="header-field-input" type="text" id="datetime" readonly>
      </div>
    </div>

    
    <div class="tabs">
      <div class="tab-buttons">
        <button class="tab-button active" onclick="switchTab('study-info')">Basic information</button>
        <button class="tab-button" onclick="switchTab('domain-1')">Domain 1</button>
        <button class="tab-button" id="domain-2-tab-button">Domain 2</button>
        <button class="tab-button" onclick="switchTab('domain-3')">Domain 3</button>
        <button class="tab-button" onclick="switchTab('domain-4')">Domain 4</button>
        <button class="tab-button" onclick="switchTab('domain-5')">Domain 5</button>
        <button class="tab-button" onclick="switchTab('overall-bias')">Overall Bias</button>
      </div>

      <div class="tab-content">
        
        <div id="study-info" class="tab-panel active">

          
          <div class="form-columns">

            <div class="form-column left">
              <div class="form-group">
                <label for="assessment-id">Assessment ID</label>
                <input maxlength="28" type="text" id="assessment-id">
              </div>

              <div class="form-group">
                <label for="assessor">Assessor</label>
                <input type="text" id="assessor">
              </div>

              <div class="form-group">
                <label for="study-id">Study ID</label>
                <input type="text" id="study-id">
              </div>

              <div class="form-group">
                <label for="ref-label">Ref. or Label</label>
                <input type="text" id="ref-label">
              </div>

              <div class="form-group">
                <label for="experimental">Experimental</label>
                <input type="text" id="experimental">
              </div>

              <div class="form-group">
                <label for="comparator">Comparator</label>
                <input type="text" id="comparator">
              </div>

              <div class="form-group">
                <label for="outcome">Specify which outcome</label>
                <input type="text" id="outcome">
              </div>

              <div class="form-group">
                <label for="numerical-result">Specify the numerical result</label>
                <input type="text" id="numerical-result">
              </div>

              <div class="form-group">
                <label for="weight-analysis">Weight for analysis</label>
                <input type="text" id="weight-analysis">
              </div>

            </div>

            <div class="form-column right">
              <div class="form-group">
                <label>Which of the following sources were obtained to help inform the risk-of-bias assessment? (tick as
                  many as apply)</label>
                <div class="checkbox-group">
                  <div class="checkbox-item">
                    <input type="checkbox" id="source-journal" name="sources">
                    <label for="source-journal">Journal article(s)</label>
                  </div>
                  <div class="checkbox-item">
                    <input type="checkbox" id="source-protocol" name="sources">
                    <label for="source-protocol">Trial protocol</label>
                  </div>
                  <div class="checkbox-item">
                    <input type="checkbox" id="source-sap" name="sources">
                    <label for="source-sap">Statistical analysis plan (SAP)</label>
                  </div>
                  <div class="checkbox-item">
                    <input type="checkbox" id="source-registry-non" name="sources">
                    <label for="source-registry-non">Non-commercial trial registry record (e.g. ClinicalTrials.gov
                      record)</label>
                  </div>
                  <div class="checkbox-item">
                    <input type="checkbox" id="source-registry-company" name="sources">
                    <label for="source-registry-company">Company-owned trial registry record (e.g. GSK Clinical Study
                      Register record)</label>
                  </div>
                  <div class="checkbox-item">
                    <input type="checkbox" id="source-grey" name="sources">
                    <label for="source-grey">"Grey literature" (e.g. unpublished thesis)</label>
                  </div>
                  <div class="checkbox-item">
                    <input type="checkbox" id="source-conference" name="sources">
                    <label for="source-conference">Conference abstract(s) about the trial</label>
                  </div>
                  <div class="checkbox-item">
                    <input type="checkbox" id="source-regulatory" name="sources">
                    <label for="source-regulatory">Regulatory document (e.g. Clinical Study Report, Drug Approval
                      Package)</label>
                  </div>
                  <div class="checkbox-item">
                    <input type="checkbox" id="source-ethics" name="sources">
                    <label for="source-ethics">Research ethics application</label>
                  </div>
                  <div class="checkbox-item">
                    <input type="checkbox" id="source-grant" name="sources">
                    <label for="source-grant">Grant database summary (e.g. NIH RePORTER, Research Councils UK Gateway to
                      Research)</label>
                  </div>
                  <div class="checkbox-item">
                    <input type="checkbox" id="source-comm-trialist" name="sources">
                    <label for="source-comm-trialist">Personal communication with trialist</label>
                  </div>
                  <div class="checkbox-item">
                    <input type="checkbox" id="source-comm-sponsor" name="sources">
                    <label for="source-comm-sponsor">Personal communication with the sponsor</label>
                  </div>
                </div>
              </div>

              <hr>

              <div class="form-group">
                <label for="assessment-aim">Is the review team's aim for this result to assess...?</label>
                <select id="assessment-aim" onchange="toggleConditionalField()" class="domain-question-select">
                  <option value="">Select...</option>
                  <option value="per-protocol">adhering to intervention (the 'per-protocol' effect)</option>
                  <option value="intention-to-treat">assignment to intervention (the 'intention-to-treat' effect)
                  </option>
                </select>

                <div id="conditional-field" class="conditional-field">
                  <label>Select all that apply:</label>
                  <div class="checkbox-group">
                    <div class="checkbox-item">
                      <input type="checkbox" id="non-protocol" name="protocol-issues">
                      <label for="non-protocol">Occurance of non-protocol interventions</label>
                    </div>
                    <div class="checkbox-item">
                      <input type="checkbox" id="implementation-failures" name="protocol-issues">
                      <label for="implementation-failures">Failures in implementing the intervention that could have
                        affected the outcome</label>
                    </div>
                    <div class="checkbox-item">
                      <input type="checkbox" id="non-adherence" name="protocol-issues">
                      <label for="non-adherence">Non-adherence to their assigned intervention by trial
                        participants</label>
                    </div>
                  </div>
                </div>
              </div>

            </div>

          </div>


        </div>

        
        <div id="domain-1" class="tab-panel">
          <h3 class="domain-title">Randomization process</h3>

          <div class="container-discrepancy-check-responses">
            
            
            <div class="question-elem-titles">Signalling questions</div>
            <div class="question-elem-titles-centralized">Consensus</div>
            <div class="question-elem-titles">Final description</div>
            <div class="question-elem-titles-centralized">Response 2</div>
            <div class="question-elem-titles">Description 2</div>

            
            <div class="domain-question-text">
              <a id="Q_1_1_instructions" href="#">1.1 Was the allocation sequence random?</a>
            </div>
            <div style="padding: 6px 0;">
              <select id="answer_1_1" class="domain-question-select">
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
              </select>
            </div>
            <div style="padding: 6px 0; grid-row: span 2;">
              <textarea id="comments_1_1_and_1_2" class="domain-question-textarea" style="height: 90px;"></textarea>
            </div>
            <div style="padding: 6px 0;">
              <select id="answer_1_1_check" class="domain-question-select" disabled>
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
              </select>
            </div>
            <div style="padding: 6px 0; grid-row: span 2;">
              <textarea id="comments_1_1_and_1_2_check" class="domain-question-textarea" style="height: 90px;" disabled></textarea>
            </div>
            
            <div class="domain-question-text">
              <a id="Q_1_2_instructions" href="#">1.2 Was the allocation sequence concealed until participants were
                enrolled and assigned to interventions?</a>
            </div>
            <div style="padding: 6px 0;">
              <select id="answer_1_2" class="domain-question-select">
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
              </select>
            </div>
            <div style="padding: 6px 0;">
              <select id="answer_1_2_check" class="domain-question-select" disabled>
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
              </select>
            </div>
            
            <div class="domain-question-text">
              <a id="Q_1_3_instructions" href="#">1.3 Did baseline differences between intervention groups suggest a
                problem with the randomization process?</a>
            </div>
            <div style="padding: 6px 0;">
              <select id="answer_1_3" class="domain-question-select">
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
              </select>
            </div>
            <div style="padding: 6px 0;">
              <textarea id="comments_1_3" class="domain-question-textarea" style="height: 45px;"></textarea>
            </div>
            <div style="padding: 6px 0;">
              <select id="answer_1_3_check" class="domain-question-select" disabled>
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
              </select>
            </div>
            <div style="padding: 6px 0;">
              <textarea id="comments_1_3_check" class="domain-question-textarea" style="height: 45px;" disabled></textarea>
            </div>
          </div>

          <div class="container-discrepancy-check-risk-bias-jud">
            
            <div class="domain-rob-jud-div">
              <h4 class="domain-rob-jud-title">Risk of bias judgement</h4>

              <div class="domain-rob-jud-alg-result-assessor-jud-div">
                
                <div class="domain-rob-jud-alg-result-div">
                  <label class="domain-rob-jud-alg-result-assessor-jud-label">Algorithm result:</label>
                  <div id="alg-result-domain-1" class="domain-alg-result">
                    Algorithm
                  </div>
                </div>

                
                <div class="domain-rob-jud-vert-sep-alg-result-assessor-jud"></div>

                
                <div class="domain-rob-jud-assessor-jud-div">
                  <label class="domain-rob-jud-alg-result-assessor-jud-label">Consensus</label>
                  <div class="domain-rob-jud-select-div">
                    <select id="assessor-jud-domain-1" class="domain-rob-jud-select">
                      <option value="">Select...</option>
                      <option value="Low">Low</option>
                      <option value="High">High</option>
                      <option value="Some concerns">Some concerns</option>
                    </select>
                    <textarea id="assessor_jud_domain_1" class="domain-rob-jud-textarea"
                      placeholder="Create the support for judgement for this risk of bias domain from descriptions"></textarea>
                  </div>
                </div>
              </div>
            </div>

            
            <div class="domain-rob-jud-div-check">
              
              <div class="domain-rob-jud-assessor-jud-div">
                <label class="domain-rob-jud-alg-result-assessor-jud-label">2nd Assessor's judgement</label>
                <div class="domain-rob-jud-select-div">
                  <select id="assessor-jud-domain-1_check" class="domain-rob-jud-select" disabled>
                    <option value="">Select...</option>
                    <option value="Low">Low</option>
                    <option value="High">High</option>
                    <option value="Some concerns">Some concerns</option>
                  </select>
                  <textarea id="assessor_jud_domain_1_check" class="domain-rob-jud-textarea" disabled></textarea>
                </div>
              </div>
            </div>
          </div>
        </div>
        

        
        <div id="domain-2-default" class="tab-panel">
          <h3 class="domain-title">Deviations from intended interventions</h3>
          <div class="empty-tab">Please select the aim (in 'Basic information' tab).</div>
        </div>
        <div id="domain-2-PP" class="tab-panel">
          <h3 class="domain-title">Deviations from intended interventions</h3>

          <div class="container-discrepancy-check-responses">
            
            <div class="question-elem-titles">Signalling questions</div>
            <div class="question-elem-titles-centralized">Consensus</div>
            <div class="question-elem-titles">Final description</div>
            <div class="question-elem-titles-centralized">Response 2</div>
            <div class="question-elem-titles">Description 2</div>
            
            <div class="domain-question-text">
              <a id="Q_2_1_instructions" href="#">2.1 Were participants aware of their assigned intervention during the trial?</a>
            </div>
            <div style="padding: 6px 0;">
              <select id="answer_2_1_pp" class="domain-question-select">
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
              </select>
            </div>
            <div id="div_2.1_and_2.1_comment_PP" style="padding: 6px 0; grid-row: span 2;">
              <textarea id="2.1_and_2.2_comment_PP" class="domain-question-textarea" style="height: 90px;"></textarea>
            </div>
            <div style="padding: 6px 0;">
              <select id="answer_2_1_pp_check" class="domain-question-select" disabled>
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
              </select>
            </div>
            <div id="div_2.1_and_2.1_comment_PP" style="padding: 6px 0; grid-row: span 2;">
              <textarea id="2.1_and_2.2_comment_PP_check" class="domain-question-textarea" style="height: 90px;" disabled></textarea>
            </div>
            
            <div class="domain-question-text">
              <a id="Q_2_2_instructions" href="#">2.2 Were carers and people delivering the interventions aware of
                participants' assigned intervention during the trial?</a>
            </div>
            <div style="padding: 6px 0;">
              <select id="answer_2_2_pp" class="domain-question-select">
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
              </select>
            </div>
            <div style="padding: 6px 0;">
              <select id="answer_2_2_pp_check" class="domain-question-select" disabled>
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
              </select>
            </div>
            
            <div class="domain-question-text">
              <a id="Q_2_3_instructions_pp" href="#">2.3 [If applicable:] If Y/PY/NI to 2.1 or 2.2: Were important
                nonprotocol interventions balanced across intervention groups?</a>
            </div>
            <div style="padding: 6px 0;">
              <select id="answer_2_3_pp" class="domain-question-select">
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
                <option value="NA" id="2.3_pp_NA" style="display: none;">NA</option>
              </select>
            </div>
            <div id="div_2.3_comment_PP" style="padding: 6px 0;">
              <textarea id="2.3_comment_PP" class="domain-question-textarea" style="height: 45px;"></textarea>
            </div>
            <div style="padding: 6px 0;">
              <select id="answer_2_3_pp_check" class="domain-question-select" disabled>
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
                <option value="NA" id="2.3_pp_NA" style="display: none;">NA</option>
              </select>
            </div>
            <div id="div_2.3_comment_PP" style="padding: 6px 0;">
              <textarea id="2.3_comment_PP_check" class="domain-question-textarea" style="height: 45px;" disabled></textarea>
            </div>
            
            <div class="domain-question-text">
              <a id="Q_2_4_instructions_pp" href="#">2.4 [If applicable:] Were there failures in implementing the
                intervention that could have affected the outcome?</a>
            </div>
            <div style="padding: 6px 0;">
              <select id="answer_2_4_pp" class="domain-question-select">
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
                <option value="NA" id="2.4_pp_NA" style="display: none;">NA</option>
              </select>
            </div>
            <div id="div_2.4_comment_PP" style="padding: 6px 0;">
              <textarea id="2.4_comment_PP" class="domain-question-textarea" style="height: 45px;"></textarea>
            </div>
            <div style="padding: 6px 0;">
              <select id="answer_2_4_pp_check" class="domain-question-select" disabled>
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
                <option value="NA" id="2.4_pp_NA" style="display: none;">NA</option>
              </select>
            </div>
            <div id="div_2.4_comment_PP" style="padding: 6px 0;">
              <textarea id="2.4_comment_PP_check" class="domain-question-textarea" style="height: 45px;" disabled></textarea>
            </div>
            
            <div class="domain-question-text">
              <a id="Q_2_5_instructions_pp" href="#">2.5 [If applicable:] Was there non-adherence to the assigned
                intervention regimen that could have affected participantsâ€™ outcomes?</a>
            </div>
            <div style="padding: 6px 0;">
              <select id="answer_2_5_pp" class="domain-question-select">
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
                <option value="NA" id="2.5_pp_NA" style="display: none;">NA</option>
              </select>
            </div>
            <div id="div_2.5_comment_PP" style="padding: 6px 0;">
              <textarea id="2.5_comment_PP" class="domain-question-textarea" style="height: 45px;"></textarea>
            </div>
            <div style="padding: 6px 0;">
              <select id="answer_2_5_pp_check" class="domain-question-select" disabled>
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
                <option value="NA" id="2.5_pp_NA" style="display: none;">NA</option>
              </select>
            </div>
            <div id="div_2.5_comment_PP" style="padding: 6px 0;">
              <textarea id="2.5_comment_PP_check" class="domain-question-textarea" style="height: 45px;" disabled></textarea>
            </div>
            
            <div class="domain-question-text">
              <a id="Q_2_6_instructions_pp" href="#">2.6 If N/PN/NI to 2.3, or Y/PY/NI to 2.4 or 2.5: Was an appropriate
                analysis used to estimate the effect of adhering to the intervention?</a>
            </div>
            <div style="padding: 6px 0;">
              <select id="answer_2_6_pp" class="domain-question-select">
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
                <option value="NA" id="2.6_pp_NA" style="display: none;">NA</option>
              </select>
            </div>
            <div id="div_2.6_comment_PP" style="padding: 6px 0;">
              <textarea id="2.6_comment_PP" class="domain-question-textarea" style="height: 45px;"></textarea>
            </div>
            <div style="padding: 6px 0;">
              <select id="answer_2_6_pp_check" class="domain-question-select" disabled>
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
                <option value="NA" id="2.6_pp_NA" style="display: none;">NA</option>
              </select>
            </div>
            <div id="div_2.6_comment_PP" style="padding: 6px 0;">
              <textarea id="2.6_comment_PP_check" class="domain-question-textarea" style="height: 45px;" disabled></textarea>
            </div>
          </div>

          <div class="container-discrepancy-check-risk-bias-jud">
            
            <div class="domain-rob-jud-div">
              <h4 class="domain-rob-jud-title">Risk of bias judgement</h4>

              <div class="domain-rob-jud-alg-result-assessor-jud-div">
                
                <div class="domain-rob-jud-alg-result-div">
                  <label class="domain-rob-jud-alg-result-assessor-jud-label">Algorithm result:</label>
                  <div id="alg-result-domain-2-PP" class="domain-alg-result">
                    Algorithm
                  </div>
                </div>

                
                <div class="domain-rob-jud-vert-sep-alg-result-assessor-jud"></div>

                
                <div class="domain-rob-jud-assessor-jud-div">
                  <label class="domain-rob-jud-alg-result-assessor-jud-label">Consensus</label>
                  <div class="domain-rob-jud-select-div">
                    <select id="assessor-jud-domain-2-PP" class="domain-rob-jud-select">
                      <option value="">Select...</option>
                      <option value="Low">Low</option>
                      <option value="High">High</option>
                      <option value="Some concerns">Some concerns</option>
                    </select>
                    <textarea id="assessor_jud_domain_2_PP" class="domain-rob-jud-textarea"
                      placeholder="Create the support for judgement for this risk of bias domain from descriptions"></textarea>
                  </div>
                </div>
              </div>
            </div>

            
            <div class="domain-rob-jud-div-check">
              
              <div class="domain-rob-jud-assessor-jud-div">
                <label class="domain-rob-jud-alg-result-assessor-jud-label">Assessor's judgement:</label>
                <div class="domain-rob-jud-select-div">
                  <select id="assessor-jud-domain-2-PP_check" class="domain-rob-jud-select" disabled>
                    <option value="">Select...</option>
                    <option value="Low">Low</option>
                    <option value="High">High</option>
                    <option value="Some concerns">Some concerns</option>
                  </select>
                  <textarea id="assessor_jud_domain_2_PP_check" class="domain-rob-jud-textarea" disabled></textarea>
                </div>
              </div>
            </div>
          </div>
      
        </div>
        <div id="domain-2-ITT" class="tab-panel">
          <h3 class="domain-title">Deviations from intended interventions</h3>

          <div class="container-discrepancy-check-responses">
            
            <div class="question-elem-titles">Signalling questions</div>
            <div class="question-elem-titles-centralized">Consensus</div>
            <div class="question-elem-titles">Final description</div>
            <div class="question-elem-titles-centralized">Response 2</div>
            <div class="question-elem-titles">Description 2</div>

            
            <div class="domain-question-text">
              <a id="Q_2_1_instructions_itt" href="#">2.1 Were participants aware of their assigned intervention during
                the trial?</a>
            </div>
            <div style="padding: 6px 0;">
              <select id="answer_2_1_itt" class="domain-question-select">
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
              </select>
            </div>
            <div id="div_2.1_and_2.1_comment_ITT" style="padding: 6px 0; grid-row: span 2;">
              <textarea id="2.1_and_2.2_comment_ITT" class="domain-question-textarea" style="height: 90px;"></textarea>
            </div>
            
            <div style="padding: 6px 0;">
              <select id="answer_2_1_itt_check" class="domain-question-select" disabled>
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
              </select>
            </div>
            <div id="div_2.1_and_2.1_comment_ITT" style="padding: 6px 0; grid-row: span 2;">
              <textarea id="2.1_and_2.2_comment_ITT_check" class="domain-question-textarea" style="height: 90px;" disabled></textarea>
            </div>

            
            <div class="domain-question-text">
              <a id="Q_2_2_instructions_itt" href="#">2.2 Were carers and people delivering the interventions aware of
                participants' assigned intervention during the trial?</a>
            </div>
            <div style="padding: 6px 0;">
              <select id="answer_2_2_itt" class="domain-question-select">
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
              </select>
            </div>
            
            <div style="padding: 6px 0;">
              <select id="answer_2_2_itt_check" class="domain-question-select" disabled>
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
              </select>
            </div>

            
            <div class="domain-question-text">
              <a id="Q_2_3_instructions_itt" href="#">2.3 If Y/PY/NI to 2.1 or 2.2: Were there deviations from the
                intended intervention that arose because of the trial context?</a>
            </div>
            <div style="padding: 6px 0;">
              <select id="answer_2_3_itt" class="domain-question-select">
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
                <option value="NA" id="2.3_itt_NA" style="display: none;">NA</option>
              </select>
            </div>
            <div id="div_2.3_comment_ITT" style="padding: 6px 0;">
              <textarea id="2.3_comment_ITT" class="domain-question-textarea" style="height: 45px;"></textarea>
            </div>
            
            <div style="padding: 6px 0;">
              <select id="answer_2_3_itt_check" class="domain-question-select" disabled>
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
                <option value="NA" id="2.3_itt_NA" style="display: none;">NA</option>
              </select>
            </div>
            <div id="div_2.3_comment_ITT" style="padding: 6px 0;">
              <textarea id="2.3_comment_ITT_check" class="domain-question-textarea" style="height: 45px;" disabled></textarea>
            </div>

            
            <div class="domain-question-text">
              <a id="Q_2_4_instructions_itt" href="#">2.4 If Y/PY to 2.3: Were these deviations likely to have affected
                the outcome?</a>
            </div>
            <div style="padding: 6px 0;">
              <select id="answer_2_4_itt" class="domain-question-select">
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
                <option value="NA" id="2.4_itt_NA" style="display: none;">NA</option>
              </select>
            </div>
            <div id="div_2.4_comment_ITT" style="padding: 6px 0;">
              <textarea id="2.4_comment_ITT" class="domain-question-textarea" style="height: 45px;"></textarea>
            </div>
            
            <div style="padding: 6px 0;">
              <select id="answer_2_4_itt_check" class="domain-question-select" disabled>
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
                <option value="NA" id="2.4_itt_NA" style="display: none;">NA</option>
              </select>
            </div>
            <div id="div_2.4_comment_ITT" style="padding: 6px 0;">
              <textarea id="2.4_comment_ITT_check" class="domain-question-textarea" style="height: 45px;" disabled></textarea>
            </div>

            
            <div class="domain-question-text">
              <a id="Q_2_5_instructions_itt" href="#">2.5. If Y/PY/NI to 2.4: Were these deviations from intended
                intervention balanced between groups?</a>
            </div>
            <div style="padding: 6px 0;">
              <select id="answer_2_5_itt" class="domain-question-select">
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
                <option value="NA" id="2.5_itt_NA" style="display: none;">NA</option>
              </select>
            </div>
            <div id="div_2.5_comment_ITT" style="padding: 6px 0;">
              <textarea id="2.5_comment_ITT" class="domain-question-textarea" style="height: 45px;"></textarea>
            </div>
            
            <div style="padding: 6px 0;">
              <select id="answer_2_5_itt_check" class="domain-question-select" disabled>
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
                <option value="NA" id="2.5_itt_NA" style="display: none;">NA</option>
              </select>
            </div>
            <div id="div_2.5_comment_ITT" style="padding: 6px 0;">
              <textarea id="2.5_comment_ITT_check" class="domain-question-textarea" style="height: 45px;" disabled></textarea>
            </div>

            
            <div class="domain-question-text">
              <a id="Q_2_6_instructions_itt" href="#">2.6 Was an appropriate analysis used to estimate the effect of
                assignment to intervention?</a>
            </div>
            <div style="padding: 6px 0;">
              <select id="answer_2_6_itt" class="domain-question-select">
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
              </select>
            </div>
            <div id="div_2.6_comment_ITT" style="padding: 6px 0;">
              <textarea id="2.6_comment_ITT" class="domain-question-textarea" style="height: 45px;"></textarea>
            </div>
            
            <div style="padding: 6px 0;">
              <select id="answer_2_6_itt_check" class="domain-question-select" disabled>
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
              </select>
            </div>
            <div id="div_2.6_comment_ITT" style="padding: 6px 0;">
              <textarea id="2.6_comment_ITT_check" class="domain-question-textarea" style="height: 45px;" disabled></textarea>
            </div>

            
            <div class="domain-question-text">
              <a id="Q_2_7_instructions_itt" href="#">2.7 If N/PN/NI to 2.6: Was there potential for a substantial
                impact (on the result) of the failure to analyse participants in the group to which they were
                randomized?</a>
            </div>
            <div style="padding: 6px 0;">
              <select id="answer_2_7_itt" class="domain-question-select">
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
                <option value="NA" id="2.7_itt_NA" style="display: none;">NA</option>
              </select>
            </div>
            <div id="div_2.7_comment_ITT" style="padding: 6px 0;">
              <textarea id="2.7_comment_ITT" class="domain-question-textarea" style="height: 45px;"></textarea>
            </div>
            
            <div style="padding: 6px 0;">
              <select id="answer_2_7_itt_check" class="domain-question-select" disabled>
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
                <option value="NA" id="2.7_itt_NA" style="display: none;">NA</option>
              </select>
            </div>
            <div id="div_2.7_comment_ITT" style="padding: 6px 0;">
              <textarea id="2.7_comment_ITT_check" class="domain-question-textarea" style="height: 45px;" disabled></textarea>
            </div>
          </div>

          <div class="container-discrepancy-check-risk-bias-jud">
            
            <div class="domain-rob-jud-div">
              <h4 class="domain-rob-jud-title">Risk of bias judgement</h4>

              <div class="domain-rob-jud-alg-result-assessor-jud-div">
                
                <div class="domain-rob-jud-alg-result-div">
                  <label class="domain-rob-jud-alg-result-assessor-jud-label">Algorithm result:</label>
                  <div id="alg-result-domain-2-ITT" class="domain-alg-result">
                    Algorithm
                  </div>
                </div>

                
                <div class="domain-rob-jud-vert-sep-alg-result-assessor-jud"></div>

                
                <div class="domain-rob-jud-assessor-jud-div">
                  <label class="domain-rob-jud-alg-result-assessor-jud-label">Consensus</label>
                  <div class="domain-rob-jud-select-div">
                    <select id="assessor-jud-domain-2-ITT" class="domain-rob-jud-select">
                      <option value="">Select...</option>
                      <option value="Low">Low</option>
                      <option value="High">High</option>
                      <option value="Some concerns">Some concerns</option>
                    </select>
                    <textarea id="assessor_jud_domain_2_ITT" class="domain-rob-jud-textarea"
                      placeholder="Create the support for judgement for this risk of bias domain from descriptions"></textarea>
                  </div>
                </div>
              </div>
            </div>

            
            <div class="domain-rob-jud-div-check">
              <div class="domain-rob-jud-assessor-jud-div">
                <label class="domain-rob-jud-alg-result-assessor-jud-label">Assessor's judgement:</label>
                <div class="domain-rob-jud-select-div">
                  <select id="assessor-jud-domain-2-ITT_check" class="domain-rob-jud-select" disabled>
                    <option value="">Select...</option>
                    <option value="Low">Low</option>
                    <option value="High">High</option>
                    <option value="Some concerns">Some concerns</option>
                  </select>
                  <textarea id="assessor_jud_domain_2_ITT_check" class="domain-rob-jud-textarea" disabled></textarea>
                </div>
              </div>
            </div>

          </div>

        </div>
        

        
        <div id="domain-3" class="tab-panel">
          <h3 class="domain-title">Missing outcome data</h3>

          
          <div class="container-discrepancy-check-responses">
            
            <div class="question-elem-titles">Signalling questions</div>
            <div class="question-elem-titles-centralized">Consensus</div>
            <div class="question-elem-titles">Final description</div>
            <div class="question-elem-titles-centralized">Response 2</div>
            <div class="question-elem-titles">Description 2</div>

            
            <div class="domain-question-text">
              <a id="Q_3_1_instructions" href="#">3.1 Were data for this outcome available for all, or nearly all,
                participants randomized?</a>
            </div>
            <div style="padding: 6px 0;">
              <select id="answer_3_1" class="domain-question-select">
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
              </select>
            </div>
            <div id="div_3.1_comment" style="padding: 6px 0;">
              <textarea id="3.1_comment" class="domain-question-textarea" style="height: 45px;"></textarea>
            </div>
            
            <div style="padding: 6px 0;">
              <select id="answer_3_1_check" class="domain-question-select" disabled>
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
              </select>
            </div>
            <div id="div_3.1_comment" style="padding: 6px 0;">
              <textarea id="3.1_comment_check" class="domain-question-textarea" style="height: 45px;" disabled></textarea>
            </div>

            
            <div class="domain-question-text">
              <a id="Q_3_2_instructions" href="#">3.2 If N/PN/NI to 3.1: Is there evidence that the result was not
                biased by missing outcome data?</a>
            </div>
            <div style="padding: 6px 0;">
              <select id="answer_3_2" class="domain-question-select">
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NA" id="3.2_NA" style="display: none;">NA</option>
              </select>
            </div>
            <div id="div_3.2_comment" style="padding: 6px 0;">
              <textarea id="3.2_comment" class="domain-question-textarea" style="height: 45px;"></textarea>
            </div>
            
            <div style="padding: 6px 0;">
              <select id="answer_3_2_check" class="domain-question-select" disabled>
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NA" id="3.2_NA" style="display: none;">NA</option>
              </select>
            </div>
            <div id="div_3.2_comment" style="padding: 6px 0;">
              <textarea id="3.2_comment_check" class="domain-question-textarea" style="height: 45px;" disabled></textarea>
            </div>

            
            <div class="domain-question-text">
              <a id="Q_3_3_instructions" href="#">3.3 If N/PN to 3.2: Could missingness in the outcome depend on its
                true value?</a>
            </div>
            <div style="padding: 6px 0;">
              <select id="answer_3_3" class="domain-question-select">
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
                <option value="NA" id="3.3_NA" style="display: none;">NA</option>
              </select>
            </div>
            <div id="div_3.3_and_3.4_comment" style="padding: 6px 0; grid-row: span 2;">
              <textarea id="3.3_and_3.4_comment" class="domain-question-textarea" style="height: 90px;"></textarea>
            </div>
            
            <div style="padding: 6px 0;">
              <select id="answer_3_3_check" class="domain-question-select" disabled>
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
                <option value="NA" id="3.3_NA" style="display: none;">NA</option>
              </select>
            </div>
            <div id="div_3.3_and_3.4_comment" style="padding: 6px 0; grid-row: span 2;">
              <textarea id="3.3_and_3.4_comment_check" class="domain-question-textarea" style="height: 90px;" disabled></textarea>
            </div>

            
            <div class="domain-question-text">
              <a id="Q_3_4_instructions" href="#">3.4 If Y/PY/NI to 3.3: Is it likely that missingness in the outcome
                depended on its true value?</a>
            </div>
            <div style="padding: 6px 0;">
              <select id="answer_3_4" class="domain-question-select">
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
                <option value="NA" id="3.4_NA" style="display: none;">NA</option>
              </select>
            </div>
            
            <div style="padding: 6px 0;">
              <select id="answer_3_4_check" class="domain-question-select" disabled>
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
                <option value="NA" id="3.4_NA" style="display: none;">NA</option>
              </select>
            </div>
          </div>

          <div class="container-discrepancy-check-risk-bias-jud">
            
            <div class="domain-rob-jud-div">
              <h4 class="domain-rob-jud-title">Risk of bias judgement</h4>

              <div class="domain-rob-jud-alg-result-assessor-jud-div">
                
                <div class="domain-rob-jud-alg-result-div">
                  <label class="domain-rob-jud-alg-result-assessor-jud-label">Algorithm result:</label>
                  <div id="alg-result-domain-3" class="domain-alg-result">
                    Algorithm
                  </div>
                </div>

                
                <div class="domain-rob-jud-vert-sep-alg-result-assessor-jud"></div>

                
                <div class="domain-rob-jud-assessor-jud-div">
                  <label class="domain-rob-jud-alg-result-assessor-jud-label">Consensus</label>
                  <div class="domain-rob-jud-select-div">
                    <select id="assessor-jud-domain-3" class="domain-rob-jud-select">
                      <option value="">Select...</option>
                      <option value="Low">Low</option>
                      <option value="High">High</option>
                      <option value="Some concerns">Some concerns</option>
                    </select>
                    <textarea id="assessor_jud_domain_3" class="domain-rob-jud-textarea"
                      placeholder="Create the support for judgement for this risk of bias domain from descriptions"></textarea>
                  </div>
                </div>
              </div>
            </div>

            
            <div class="domain-rob-jud-div-check">
              
              <div class="domain-rob-jud-assessor-jud-div">
                <label class="domain-rob-jud-alg-result-assessor-jud-label">Assessor's judgement:</label>
                <div class="domain-rob-jud-select-div">
                  <select id="assessor-jud-domain-3_check" class="domain-rob-jud-select" disabled>
                    <option value="">Select...</option>
                    <option value="Low">Low</option>
                    <option value="High">High</option>
                    <option value="Some concerns">Some concerns</option>
                  </select>
                  <textarea id="assessor_jud_domain_3_check" class="domain-rob-jud-textarea" disabled></textarea>
                </div>
              </div>
            </div>
          </div>

        </div>
        

        
        <div id="domain-4" class="tab-panel">
          <h3 class="domain-title">Measurement of the outcome</h3>

          
          <div class="container-discrepancy-check-responses">
            
            <div class="question-elem-titles">Signalling questions</div>
            <div class="question-elem-titles-centralized">Consensus</div>
            <div class="question-elem-titles">Final description</div>
            <div class="question-elem-titles-centralized">Response 2</div>
            <div class="question-elem-titles">Description 2</div>

            
            <div class="domain-question-text">
              <a id="Q_4_1_instructions" href="#">4.1 Was the method of measuring the outcome inappropriate?</a>
            </div>
            <div style="padding: 6px 0;">
              <select id="answer_4_1" class="domain-question-select">
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
              </select>
            </div>
            <div id="div_4.1_comment" style="padding: 6px 0;">
              <textarea id="4.1_comment" class="domain-question-textarea" style="height: 45px;"></textarea>
            </div>
            
            <div style="padding: 6px 0;">
              <select id="answer_4_1_check" class="domain-question-select" disabled>
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
              </select>
            </div>
            <div id="div_4.1_comment" style="padding: 6px 0;">
              <textarea id="4.1_comment_check" class="domain-question-textarea" style="height: 45px;" disabled></textarea>
            </div>

            
            <div class="domain-question-text">
              <a id="Q_4_2_instructions" href="#">4.2 Could measurement or ascertainment of the outcome have differed
                between intervention groups?</a>
            </div>
            <div style="padding: 6px 0;">
              <select id="answer_4_2" class="domain-question-select">
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
              </select>
            </div>
            <div id="div_4.2_comment" style="padding: 6px 0;">
              <textarea id="4.2_comment" class="domain-question-textarea" style="height: 45px;"></textarea>
            </div>
            
            <div style="padding: 6px 0;">
              <select id="answer_4_2_check" class="domain-question-select" disabled>
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
              </select>
            </div>
            <div id="div_4.2_comment" style="padding: 6px 0;">
              <textarea id="4.2_comment_check" class="domain-question-textarea" style="height: 45px;" disabled></textarea>
            </div>

            
            <div class="domain-question-text">
              <a id="Q_4_3_instructions" href="#">4.3 If N/PN/NI to 4.1 and 4.2: Were outcome assessors aware of the
                intervention received by study participants?</a>
            </div>
            <div style="padding: 6px 0;">
              <select id="answer_4_3" class="domain-question-select">
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
                <option value="NA" id="4.3_NA" style="display: none;">NA</option>
              </select>
            </div>
            <div id="div_4.3_comment" style="padding: 6px 0;">
              <textarea id="4.3_comment" class="domain-question-textarea" style="height: 45px;"></textarea>
            </div>
            
            <div style="padding: 6px 0;">
              <select id="answer_4_3_check" class="domain-question-select" disabled>
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
                <option value="NA" id="4.3_NA" style="display: none;">NA</option>
              </select>
            </div>
            <div id="div_4.3_comment" style="padding: 6px 0;">
              <textarea id="4.3_comment_check" class="domain-question-textarea" style="height: 45px;" disabled></textarea>
            </div>

            
            <div class="domain-question-text">
              <a id="Q_4_4_instructions" href="#">4.4 If Y/PY/NI to 4.3: Could assessment of the outcome have been
                influenced by knowledge of intervention received?</a>
            </div>
            <div style="padding: 6px 0;">
              <select id="answer_4_4" class="domain-question-select">
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
                <option value="NA" id="4.4_NA" style="display: none;">NA</option>
              </select>
            </div>
            <div id="div_4.4_and_4.5_comment" style="padding: 6px 0; grid-row: span 2;">
              <textarea id="4.4_and_4.5_comment" class="domain-question-textarea" style="height: 110px;"></textarea>
            </div>
            
            <div style="padding: 6px 0;">
              <select id="answer_4_4_check" class="domain-question-select" disabled>
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
                <option value="NA" id="4.4_NA" style="display: none;">NA</option>
              </select>
            </div>
            <div id="div_4.4_and_4.5_comment" style="padding: 6px 0; grid-row: span 2;">
              <textarea id="4.4_and_4.5_comment_check" class="domain-question-textarea" style="height: 110px;" disabled></textarea>
            </div>

            
            <div class="domain-question-text">
              <a id="Q_4_5_instructions" href="#">4.5 If Y/PY/NI to 4.4: Is it likely that assessment of the outcome was
                influenced by knowledge of intervention received?</a>
            </div>
            <div style="padding: 6px 0;">
              <select id="answer_4_5" class="domain-question-select">
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
                <option value="NA" id="4.5_NA" style="display: none;">NA</option>
              </select>
            </div>
            
            <div style="padding: 6px 0;">
              <select id="answer_4_5_check" class="domain-question-select" disabled>
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
                <option value="NA" id="4.5_NA" style="display: none;">NA</option>
              </select>
            </div>
          </div>

          <div class="container-discrepancy-check-risk-bias-jud">
            
            <div class="domain-rob-jud-div">
              <h4 class="domain-rob-jud-title">Risk of bias judgement</h4>
  
              <div class="domain-rob-jud-alg-result-assessor-jud-div">
                
                <div class="domain-rob-jud-alg-result-div">
                  <label class="domain-rob-jud-alg-result-assessor-jud-label">Algorithm result:</label>
                  <div id="alg-result-domain-4" class="domain-alg-result">
                    Algorithm
                  </div>
                </div>
  
                
                <div class="domain-rob-jud-vert-sep-alg-result-assessor-jud"></div>
  
                
                <div class="domain-rob-jud-assessor-jud-div">
                  <label class="domain-rob-jud-alg-result-assessor-jud-label">Consensus</label>
                  <div class="domain-rob-jud-select-div">
                    <select id="assessor-jud-domain-4" class="domain-rob-jud-select">
                      <option value="">Select...</option>
                      <option value="Low">Low</option>
                      <option value="High">High</option>
                      <option value="Some concerns">Some concerns</option>
                    </select>
                    <textarea id="assessor_jud_domain_4" class="domain-rob-jud-textarea"
                      placeholder="Create the support for judgement for this risk of bias domain from descriptions"></textarea>
                  </div>
                </div>
              </div>
            </div>

            
            <div class="domain-rob-jud-div-check">
              
              <div class="domain-rob-jud-assessor-jud-div">
                <label class="domain-rob-jud-alg-result-assessor-jud-label">Assessor's judgement:</label>
                <div class="domain-rob-jud-select-div">
                  <select id="assessor-jud-domain-4_check" class="domain-rob-jud-select" disabled>
                    <option value="">Select...</option>
                    <option value="Low">Low</option>
                    <option value="High">High</option>
                    <option value="Some concerns">Some concerns</option>
                  </select>
                  <textarea id="assessor_jud_domain_4_check" class="domain-rob-jud-textarea" disabled></textarea>
                </div>
              </div>
            </div>
          </div>

        </div>
        

        
        <div id="domain-5" class="tab-panel">
          <h3 class="domain-title">Selection of the reported result</h3>

          
          <div class="container-discrepancy-check-responses">
            <!-- Headers -->
            <div class="question-elem-titles">Signalling questions</div>
            <div class="question-elem-titles-centralized">Consensus</div>
            <div class="question-elem-titles">Final description</div>
            <div class="question-elem-titles-centralized">Response 2</div>
            <div class="question-elem-titles">Description 2</div>

            
            <div class="domain-question-text">
              <a id="Q_5_1_instructions" href="#">5.1 Were the data that produced this result analysed in accordance
                with a pre-specified analysis plan that was finalized before unblinded outcome data were available for
                analysis?</a>
            </div>
            <div style="padding: 6px 0;">
              <select id="answer_5_1" class="domain-question-select">
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
              </select>
            </div>
            <div id="div_5.1_comment" style="padding: 6px 0;">
              <textarea id="5.1_comment" class="domain-question-textarea" style="height: 40px;"></textarea>
            </div>
            
            <div style="padding: 6px 0;">
              <select id="answer_5_1_check" class="domain-question-select" disabled>
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
              </select>
            </div>
            <div id="div_5.1_comment" style="padding: 6px 0;">
              <textarea id="5.1_comment_check" class="domain-question-textarea" style="height: 40px;" disabled></textarea>
            </div>

            <div class="statement-multiple-questions">
              <p>Is the numerical result being assessed likely to have been selected, on the baiss of the results,
                from...</p>
            </div>

            
            <div class="domain-question-text sub-item">
              <a id="Q_5_2_instructions" href="#">5.2 ... multiple eligible outcome measurements (e.g. scales,
                definitions, time points) within the outcome domain?</a>
            </div>
            <div style="padding: 6px 0;">
              <select id="answer_5_2" class="domain-question-select">
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
              </select>
            </div>
            <div id="div_5.2_comment" style="padding: 6px 0;">
              <textarea id="5.2_comment" class="domain-question-textarea" style="height: 40px;"></textarea>
            </div>
            
            <div style="padding: 6px 0;">
              <select id="answer_5_2_check" class="domain-question-select" disabled>
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
              </select>
            </div>
            <div id="div_5.2_comment" style="padding: 6px 0;">
              <textarea id="5.2_comment_check" class="domain-question-textarea" style="height: 40px;" disabled></textarea>
            </div>

            
            <div class="domain-question-text  sub-item">
              <a id="Q_5_3_instructions" href="#">5.3 ... multiple eligible analyses of the data?</a>
            </div>
            <div style="padding: 6px 0;">
              <select id="answer_5_3" class="domain-question-select">
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
              </select>
            </div>
            <div id="div_5.3_comment" style="padding: 6px 0;">
              <textarea id="5.3_comment" class="domain-question-textarea" style="height: 40px;"></textarea>
            </div>
            
            <div style="padding: 6px 0;">
              <select id="answer_5_3_check" class="domain-question-select" disabled>
                <option value="">Select...</option>
                <option value="Y">Y</option>
                <option value="PY">PY</option>
                <option value="PN">PN</option>
                <option value="N">N</option>
                <option value="NI">NI</option>
              </select>
            </div>
            <div id="div_5.3_comment" style="padding: 6px 0;">
              <textarea id="5.3_comment_check" class="domain-question-textarea" style="height: 40px;" disabled></textarea>
            </div>
          </div>

          <div class="container-discrepancy-check-risk-bias-jud">
            
            <div class="domain-rob-jud-div">
              <h4 class="domain-rob-jud-title">Risk of bias judgement</h4>

              <div class="domain-rob-jud-alg-result-assessor-jud-div">
                
                <div class="domain-rob-jud-alg-result-div">
                  <label class="domain-rob-jud-alg-result-assessor-jud-label">Algorithm result:</label>
                  <div id="alg-result-domain-5" class="domain-alg-result">
                    Algorithm
                  </div>
                </div>

                
                <div class="domain-rob-jud-vert-sep-alg-result-assessor-jud"></div>

                
                <div class="domain-rob-jud-assessor-jud-div">
                  <label class="domain-rob-jud-alg-result-assessor-jud-label">Consensus</label>
                  <div class="domain-rob-jud-select-div">
                    <select id="assessor-jud-domain-5" class="domain-rob-jud-select">
                      <option value="">Select...</option>
                      <option value="Low">Low</option>
                      <option value="High">High</option>
                      <option value="Some concerns">Some concerns</option>
                    </select>
                    <textarea id="assessor_jud_domain_5" class="domain-rob-jud-textarea"
                      placeholder="Create the support for judgement for this risk of bias domain from descriptions"></textarea>
                  </div>
                </div>
              </div>
            </div>

            
            <div class="domain-rob-jud-div-check">
              
              <div class="domain-rob-jud-assessor-jud-div">
                <label class="domain-rob-jud-alg-result-assessor-jud-label">Assessor's judgement:</label>
                <div class="domain-rob-jud-select-div">
                  <select id="assessor-jud-domain-5_check" class="domain-rob-jud-select" disabled>
                    <option value="">Select...</option>
                    <option value="Low">Low</option>
                    <option value="High">High</option>
                    <option value="Some concerns">Some concerns</option>
                  </select>
                  <textarea id="assessor_jud_domain_5_check" class="domain-rob-jud-textarea" disabled></textarea>
                </div>
              </div>
            </div>
          </div>

        </div>
        

        <div id="overall-bias" class="tab-panel">
          <h3 class="domain-title">Overall bias</h3>
          <h4 class="domain-rob-jud-title">Risk of bias judgement (Final)</h4>

          
          <div class="overall-bias-div">

            <div class="column-overall-bias-div">
              <div class="overall-bias-domain-title-and-status">
                <span id="overall-bias-domain-1" class="overall-bias-domain-status"></span>
                <span class="domain-question-text">Randomisation process</span>
              </div>
            </div>


            <div class="column-overall-bias-div">
              <div class="overall-bias-domain-title-and-status">
                <span id="overall-bias-domain-2" class="overall-bias-domain-status"></span>
                <span class="domain-question-text">Deviations from the intended interventions</span>
              </div>
            </div>


            <div class="column-overall-bias-div">
              <div class="overall-bias-domain-title-and-status">
                <span id="overall-bias-domain-3" class="overall-bias-domain-status"></span>
                <span class="domain-question-text">Missing<br>outcomes</span>
              </div>
            </div>


            <div class="column-overall-bias-div">
              <div class="overall-bias-domain-title-and-status">
                <span id="overall-bias-domain-4" class="overall-bias-domain-status"></span>
                <span class="domain-question-text">Measurement of the outcome</span>
              </div>
            </div>


            <div class="column-overall-bias-div">
              <div class="overall-bias-domain-title-and-status">
                <span id="overall-bias-domain-5" class="overall-bias-domain-status"></span>
                <span class="domain-question-text">Selection of reported results</span>
              </div>
            </div>

          </div>
          


          
          <div class="domain-rob-jud-div-overall-bias">

            <div class="domain-rob-jud-alg-result-assessor-jud-div">
              
              <div class="domain-rob-jud-alg-result-div">
                <label class="domain-rob-jud-alg-result-assessor-jud-label">Algorithm result:</label>
                <div style="width: 111.5px;" id="alg-result-overall" class="domain-alg-result">
                  Algorithm
                </div>

              </div>

              
              <div class="domain-rob-jud-vert-sep-alg-result-assessor-jud"></div>

              
              <div class="domain-rob-jud-assessor-jud-div">
                <label class="domain-rob-jud-alg-result-assessor-jud-label">Consensus</label>
                <div id="overall_assessor_jud" class="domain-rob-jud-select-div">
                  <select id="overall-assessor-jud-select" class="domain-rob-jud-select">
                    <option value="">Select...</option>
                    <option value="Low">Low</option>
                    <option value="High">High</option>
                    <option value="Some concerns">Some concerns</option>
                  </select>
                  <textarea id="overall_assessor_jud_comment" class="domain-rob-jud-textarea" style="width: 603px;"></textarea>
                </div>
              </div>
            </div>
          </div>

          <hr style="border-color: #3333; margin-bottom: 20px;">

          <h4 class="domain-rob-jud-title">Risk of bias judgement 2</h4>

          
          <div class="overall-bias-div">

            <div class="column-overall-bias-div">
              <div class="overall-bias-domain-title-and-status">
                <span id="overall-bias-domain-1_check" class="overall-bias-domain-status"></span>
                <span class="domain-question-text">Randomisation process</span>
              </div>
            </div>


            <div class="column-overall-bias-div">
              <div class="overall-bias-domain-title-and-status">
                <span id="overall-bias-domain-2_check" class="overall-bias-domain-status"></span>
                <span class="domain-question-text">Deviations from the intended interventions</span>
              </div>
            </div>


            <div class="column-overall-bias-div">
              <div class="overall-bias-domain-title-and-status">
                <span id="overall-bias-domain-3_check" class="overall-bias-domain-status"></span>
                <span class="domain-question-text">Missing<br>outcomes</span>
              </div>
            </div>


            <div class="column-overall-bias-div">
              <div class="overall-bias-domain-title-and-status">
                <span id="overall-bias-domain-4_check" class="overall-bias-domain-status"></span>
                <span class="domain-question-text">Measurement of the outcome</span>
              </div>
            </div>


            <div class="column-overall-bias-div">
              <div class="overall-bias-domain-title-and-status">
                <span id="overall-bias-domain-5_check" class="overall-bias-domain-status"></span>
                <span class="domain-question-text">Selection of reported results</span>
              </div>
            </div>

          </div>
          


          
          <div class="domain-rob-jud-div-overall-bias">

            <div class="domain-rob-jud-alg-result-assessor-jud-div">
              
              <div class="domain-rob-jud-assessor-jud-div">
                <label class="domain-rob-jud-alg-result-assessor-jud-label">2nd Assessor's judgement</label>
                <div id="overall_assessor_jud" class="domain-rob-jud-select-div">
                  <select id="overall-assessor-jud-select_check" class="domain-rob-jud-select" disabled>
                    <option value="">Select...</option>
                    <option value="Low">Low</option>
                    <option value="High">High</option>
                    <option value="Some concerns">Some concerns</option>
                  </select>
                  <textarea id="overall_assessor_jud_comment_check" class="domain-rob-jud-textarea" style="width: 100%;" disabled></textarea>
                </div>
              </div>
            </div>
          </div>

        </div>

      </div>
    </div>

    
    <div class="button-container">
      <a href="#" class="btn btn-guidance" onclick="openGuidance()">Guidance</a>
      <button class="btn btn-close" onclick="closeDialog()">Close</button>
      <button class="btn btn-save" onclick="saveForm()">SAVE</button>
    </div>

    <dialog id="Q_1_1_instructions_modal">
      <h2>Elaboration 1.1</h2>
      <hr>
      <br>
      <p>
        Answer â€˜Yesâ€™ if a random component was used in the sequence generation process. Examples include
        computer-generated random numbers; reference to a random number table; coin tossing; shuffling cards or
        envelopes; throwing dice; or drawing lots. Minimization is generally implemented with a random element (at least
        when the scores are equal), so an allocation sequence that is generated using minimization should generally be
        considered to be random.
      </p>
      <br>
      <p>
        Answer â€˜Noâ€™ if no random element was used in generating the allocation sequence or the sequence is predictable.
        Examples include alternation; methods based on dates (of birth or admission); patient record numbers; allocation
        decisions made by clinicians or participants; allocation based on the availability of the intervention; or any
        other systematic or haphazard method.
      </p>
      <br>
      <p>
        Answer â€˜No informationâ€™ if the only information about randomization methods is a statement that the study is
        randomized.
      </p>
      <br>
      <p>
        In some situations a judgement may be made to answer â€˜Probably noâ€™ or â€˜Probably yesâ€™. For example, , in the
        context of a large trial run by an experienced clinical trials unit, absence of specific information about
        generation of the randomization sequence, in a paper published in a journal with rigorously enforced word count
        limits, is likely to result in a response of â€˜Probably yesâ€™ rather than â€˜No informationâ€™. Alternatively, if
        other (contemporary) trials by the same investigator team have clearly used non-random sequences, it might be
        reasonable to assume that the current study was done using similar methods.
      </p>
      <br>
      <button class="btn btn-close" id="Q_1_1_instructions_modal_button">Close</button>
    </dialog>

    <dialog id="Q_1_2_instructions_modal">
      <h2>Elaboration 1.2</h2>
      <hr>
      <br>
      <p>
        Answer â€˜Yesâ€™ if the trial used any form of remote or centrally administered method to allocate interventions to
        participants, where the process of allocation is controlled by an external unit or organization, independent of
        the enrolment personnel (e.g. independent central pharmacy, telephone or internet-based randomization service
        providers).
      </p>
      <br>
      <p>
        Answer â€˜Yesâ€™ if envelopes or drug containers were used appropriately. Envelopes should be opaque, sequentially
        numbered, sealed with a tamper-proof seal and opened only after the envelope has been irreversibly assigned to
        the participant. Drug containers should be sequentially numbered and of identical appearance, and dispensed or
        administered only after they have been irreversibly assigned to the participant. This level of detail is rarely
        provided in reports, and a judgement may be required to justify an answer of â€˜Probably yesâ€™ or â€˜Probably noâ€™.
      </p>
      <br>
      <p>
        Answer â€˜Noâ€™ if there is reason to suspect that the enrolling investigator or the participant had knowledge of
        the forthcoming allocation.
      </p>
      <br>
      <button class="btn btn-close" id="Q_1_2_instructions_modal_button">Close</button>
    </dialog>

    <dialog id="Q_1_3_instructions_modal">
      <h2>Elaboration 1.3</h2>
      <hr>
      <br>
      <p>
        Note that differences that are compatible with chance do not lead to a risk of bias. A small number of
        differences identified as â€˜statistically significantâ€™ at the conventional 0.05 threshold should usually be
        considered to be compatible with chance.
      </p>
      <br>
      <p>
        Answer â€˜Noâ€™ if no imbalances are apparent or if any observed imbalances are compatible with chance.
      </p>
      <br>
      <p>
        Answer â€˜Yesâ€™ if there are imbalances that indicate problems with the randomization process, including:
      </p>
      <p class="sub-item">
        (1) substantial differences between intervention group sizes, compared with the intended allocation ratio; or
      </p>
      <p class="sub-item">
        (2) a substantial excess in statistically significant differences in baseline characteristics between
        intervention groups, beyond that expected by chance; or
      </p>
      <p class="sub-item">
        (3) imbalance in one or more key prognostic factors, or baseline measures of outcome variables, that is very
        unlikely to be due to chance and for which the between-group difference is big enough to result in bias in the
        intervention effect estimate.
      </p>
      <br>
      <p>
        Also answer â€˜Yesâ€™ if there are other reasons to suspect that the randomization process was problematic:
      </p>
      <p class="sub-item">
        (4) excessive similarity in baseline characteristics that is not compatible with chance.
      </p>
      <br>
      <p>
        Answer â€˜No informationâ€™ when there is no useful baseline information available (e.g. abstracts, or studies that
        reported only baseline characteristics of participants in the final analysis).
      </p>
      <br>
      <p>
        The answer to this question should not influence answers to questions 1.1 or 1.2. For example, if the trial has
        large baseline imbalances, but authors report adequate randomization methods, questions 1.1 and 1.2 should still
        be answered on the basis of the reported adequate methods, and any concerns about the imbalance should be raised
        in the answer to the question 1.3 and reflected in the domain-level risk-of-bias judgement.
      </p>
      <br>
      <p>
        Trialists may undertake analyses that attempt to deal with flawed randomization by controlling for imbalances in
        prognostic factors at baseline. To remove the risk of bias caused by problems in the randomization process, it
        would be necessary to know, and measure, all the prognostic factors that were imbalanced at baseline. It is
        unlikely that all important prognostic factors are known and measured, so such analyses will at best reduce the
        risk of bias. If review authors wish to assess the risk of bias in a trial that controlled for baseline
        imbalances in order to mitigate failures of randomization, the study should be assessed using the ROBINS-I tool.
      </p>
      <br>
      <button class="btn btn-close" id="Q_1_3_instructions_modal_button">Close</button>
    </dialog>

    <dialog id="Q_2_1_instructions_modal">
      <h2>Elaboration 2.1</h2>
      <hr>
      <br>
      <p>
        If participants are aware of their assigned interventions it is more likely that health-related behaviours will
        differ between the intervention groups. Blinding participants, most commonly through use of a placebo or sham
        intervention, may prevent such differences. If participants experienced side effects or toxicities that they
        knew to be especific to one of the interventions, answer this question â€˜Yesâ€˜ or â€˜Probably yesâ€˜.
      </p>
      <br>
      <button class="btn btn-close" id="Q_2_1_instructions_modal_button">Close</button>
    </dialog>

    <dialog id="Q_2_2_instructions_modal">
      <h2>Elaboration 2.2</h2>
      <hr>
      <br>
      <p>
        If carers or people delivering the interventions are aware of the assigned intervention then its implementation,
        or administration of non-protocol interventions, may differ between the intervention groups. Blinding may
        prevent such differences. If participants experienced side effects or toxicities that carers or people
        delivering the interventions knew to be specific to one of the interventions, answer â€˜Yesâ€™ or â€˜Probably yesâ€™. If
        randomized allocation was not concealed, then it is likely that carers and people delivering the interventions
        were aware of participants' assigned intervention during the trial.
      </p>
      <br>
      <button class="btn btn-close" id="Q_2_2_instructions_modal_button">Close</button>
    </dialog>

    <dialog id="Q_2_3_instructions_pp_modal">
      <h2>Elaboration 2.3</h2>
      <hr>
      <br>
      <p>
        This question is asked only if the preliminary considerations specify that the assessment will address imbalance
        of important non-protocol interventions between intervention groups. Important non-protocol interventions are
        the additional interventions or exposures that:
      </p>
      <br>
      <p>
        (1) are inconsistent with the trial protocol;
      </p>
      <br>
      <p>
        (2) trial participants might receive with or after starting their assigned intervention; and
      </p>
      <br>
      <p>
        (3) are prognostic for the outcome. Risk of bias will be higher if there is imbalance in such interventions
        between the intervention groups.
      </p>
      <br>
      <button class="btn btn-close" id="Q_2_3_instructions_pp_modal_button">Close</button>
    </dialog>

    <dialog id="Q_2_4_instructions_pp_modal">
      <h2>Elaboration 2.4</h2>
      <hr>
      <br>
      <p>
        This question is asked only if the preliminary considerations specify that the assessment will address failures
        in implementing the intervention that could have affected the outcome. Risk of bias will be higher if the
        intervention was not implemented as intended by, for example, the health care professionals delivering care.
      </p>
      <p>
        Answer â€˜Noâ€™ or â€˜Probably noâ€™ if implementation of the intervention was successful for most participants.
      </p>
      <br>
      <button class="btn btn-close" id="Q_2_4_instructions_pp_modal_button">Close</button>
    </dialog>

    <dialog id="Q_2_5_instructions_pp_modal">
      <h2>Elaboration 2.5</h2>
      <hr>
      <br>
      <p>
        This question is asked only if the preliminary considerations specify that the assessment will address
        non-adherence that could have affected participantsâ€™ outcomes. Non-adherence includes imperfect compliance with
        a sustained intervention, cessation of intervention, crossovers to the comparator intervention and switches to
        another active intervention. Consider available information on the proportion of study participants who
        continued with their assigned intervention throughout follow up, and answer â€˜Yesâ€™ or â€˜Probably yesâ€™ if the
        proportion who did not adhere is high enough to raise concerns.
      </p>
      <p>
        Answer â€˜Noâ€™ for studies of interventions that are administered once, so that imperfect adherence is not
        possible, and all or most participants received the assigned intervention.
      </p>
      <br>
      <button class="btn btn-close" id="Q_2_5_instructions_pp_modal_button">Close</button>
    </dialog>

    <dialog id="Q_2_6_instructions_pp_modal">
      <h2>Elaboration 2.6</h2>
      <hr>
      <br>
      <p>
        Both â€˜ naÃ¯ve â€˜per-protocolâ€™ analyses (excluding trial participants who did not receive their allocated
        intervention) and â€˜as treatedâ€™ analyses (comparing trial participants according to the intervention they
        actually received) will usually be inappropriate for estimating the effect of adhering to intervention (the
        â€˜per-protocolâ€™ effect). However, it is possible to use data from a randomized trial to derive an unbiased
        estimate of the effect of adhering to intervention. Examples of appropriate methods include:
      </p>
      <p>
        (1) instrumental variable analyses to estimate the effect of receiving the assigned intervention in trials in
        which a single intervention, administered only at baseline and with all-or-nothing adherence, is compared with
        standard care; and
      </p>
      <p>
        (2) inverse probability weighting to adjust for censoring of participants who cease adherence to their assigned
        intervention, in trials of sustained treatment strategies.
      </p>
      <p>
        These methods depend on strong assumptions, which should be appropriate and justified if the answer to this
        question is â€˜Yesâ€™ or â€˜Probably yesâ€™. It is possible that a paper reports an analysis based on such methods
        without reporting information on the deviations from intended intervention, but it would be hard to judge such
        an analysis to be appropriate in the absence of such information.
      </p>
      <br>
      <p>
        If an important non-protocol intervention was administered to all participants in one intervention group,
        adjustments cannot be made to overcome this.
      </p>
      <br>
      <p>
        Some examples of analysis strategies that would not be appropriate to estimate the effect of adhering to
        intervention are
      </p>
      <p>
        (i) â€˜Intention to treat (ITT) analysisâ€™,
      </p>
      <p>
        (ii) â€˜per protocol analysisâ€™,
      </p>
      <p>
        (iii) â€˜as-treated analysisâ€™,
      </p>
      <p>
        (iv) â€˜analysis by treatment receivedâ€™.
      </p>
      <br>
      <button class="btn btn-close" id="Q_2_6_instructions_pp_modal_button">Close</button>
    </dialog>

    <dialog id="Q_2_3_instructions_itt_modal">
      <h2>Elaboration 2.3</h2>
      <hr>
      <br>
      <p>
        For the effect of assignment to intervention, this domain assesses problems that arise when changes from
        assigned intervention that are inconsistent with the trial protocol arose because of the trial context. We use
        the term trial context to refer to effects of recruitment and engagement activities on trial participants and
        when trial personnel (carers or people delivering the interventions) undermine the implementation of the trial
        protocol in ways that would not happen outside the trial. For example, the process of securing informed consent
        may lead participants subsequently assigned to the comparator group to feel unlucky and therefore seek the
        experimental intervention, or other interventions that improve their prognosis.
      </p>
      <br>
      <p>
        Answer â€˜Yesâ€™ or â€˜Probably yesâ€™ only if there is evidence, or strong reason to believe, that the trial context
        led to failure to implement the protocol interventions or to implementation of interventions not allowed by the
        protocol.
      </p>
      <br>
      <p>
        Answer â€˜Noâ€™ or â€˜Probably noâ€™ if there were changes from assigned intervention that are inconsistent with the
        trial protocol, such as non-adherence to intervention, but these are consistent with what could occur outside
        the trial context.
      </p>
      <br>
      <p>
        Answer â€˜Noâ€™ or â€˜Probably noâ€™ for changes to intervention that are consistent with the trial protocol, for
        example cessation of a drug intervention because of acute toxicity or use of additional interventions whose aim
        is to treat consequences of one of the intended interventions.
      </p>
      <br>
      <p>
        If blinding is compromised because participants report side effects or toxicities that are specific to one of
        the interventions, answer â€˜Yesâ€™ or â€˜Probably yesâ€™ only if there were changes from assigned intervention that are
        inconsistent with the trial protocol and arose because of the trial context.
      </p>
      <br>
      <p>
        The answer â€˜No informationâ€™ may be appropriate, because trialists do not always report whether deviations arose
        because of the trial context.<br>
      </p>
      <br>
      <button class="btn btn-close" id="Q_2_3_instructions_itt_modal_button">Close</button>
    </dialog>

    <dialog id="Q_2_4_instructions_itt_modal">
      <h2>Elaboration 2.4</h2>
      <hr>
      <br>
      <p>
        Changes from assigned intervention that are inconsistent with the trial protocol and arose because of the trial
        context will impact on the intervention effect estimate if they affect the outcome, but not otherwise.
      </p>
      <br>
      <button class="btn btn-close" id="Q_2_4_instructions_itt_modal_button">Close</button>
    </dialog>

    <dialog id="Q_2_5_instructions_itt_modal">
      <h2>Elaboration 2.5</h2>
      <hr>
      <br>
      <p>
        Changes from assigned intervention that are inconsistent with the trial protocol and arose because of the trial
        context are more likely to impact on intervention effect estimate if they are not balanced between the
        intervention groups.
      </p>
      <br>
      <button class="btn btn-close" id="Q_2_5_instructions_itt_modal_button">Close</button>
    </dialog>

    <dialog id="Q_2_6_instructions_itt_modal">
      <h2>Elaboration 2.6</h2>
      <hr>
      <br>
      <p>
        Both intention-to-treat (ITT) analyses and modified intention-to-treat (mITT) analyses excluding participants
        with missing outcome data should be considered appropriate. Both naÃ¯ve â€˜per-protocolâ€™ analyses (excluding trial
        participants who did not receive their assigned intervention) and â€˜as treatedâ€™ analyses (in which trial
        participants are grouped according to the intervention that they received, rather than according to their
        assigned intervention) should be considered inappropriate.
      </p>
      <br>
      <p>
        Analyses excluding eligible trial participants post-randomization should also be considered inappropriate, but
        post-randomization exclusions of ineligible participants (when eligibility was not confirmed until after
        randomization, and could not have been influenced by intervention group assignment) can be considered
        appropriate.
      </p>
      <br>
      <button class="btn btn-close" id="Q_2_6_instructions_itt_modal_button">Close</button>
    </dialog>

    <dialog id="Q_2_7_instructions_itt_modal">
      <h2>Elaboration 2.7</h2>
      <hr>
      <br>
      <p>
        This question addresses whether the number of participants who were analysed in the wrong intervention group, or
        excluded from the analysis, was sufficient that there could have been a substantial impact on the result. It is
        not possible to specify a precise rule: there may be potential for substantial impact even if fewer than 5% of
        participants were analysed in the wrong group or excluded, if the outcome is rare or if exclusions are strongly
        related to prognostic factors.
      </p>
      <br>
      <button class="btn btn-close" id="Q_2_7_instructions_itt_modal_button">Close</button>
    </dialog>

    <dialog id="Q_3_1_instructions_modal">
      <h2>Elaboration 3.1</h2>
      <hr>
      <br>
      <p>
        The appropriate study population for an analysis of the intention to treat effect is all randomized
        participants.
      </p>
      <p>
        â€œNearly allâ€ should be interpreted as that the number of participants with missing outcome data is sufficiently
        small that their outcomes, whatever they were, could have made no important difference to the estimated effect
        of intervention.
      </p>
      <p>
        For continuous outcomes, availability of data from 95% of the participants will often be sufficient. For
        dichotomous outcomes, the proportion required is directly linked to the risk of the event. If the observed
        number of events is much greater than the number of participants with missing outcome data, the bias would
        necessarily be small.
      </p>
      <p>
        Only answer â€˜No informationâ€™ if the trial report provides no information about the extent of missing outcome
        data. This situation will usually lead to a judgement that there is a high risk of bias due to missing outcome
        data.
      </p>
      <p>
        Note that imputed data should be regarded as missing data, and not considered as â€˜outcome dataâ€™ in the context
        of this question.
      </p>
      <br>
      <button class="btn btn-close" id="Q_3_1_instructions_modal_button">Close</button>
    </dialog>

    <dialog id="Q_3_2_instructions_modal">
      <h2>Elaboration 3.2</h2>
      <hr>
      <br>
      <p>
        Evidence that the result was not biased by missing outcome data may come from:
      </p>
      <p>
        (1) analysis methods that correct for bias; or
      </p>
      <p>
        (2) sensitivity analyses showing that results are little changed under a range of plausible assumptions about
        the relationship between missingness in the outcome and its true value.
      </p>
      <p>
        However, imputing the outcome variable, either through methods such as â€˜last-observation-carried-forwardâ€™ or via
        multiple imputation based only on intervention group, should not be assumed to correct for bias due to missing
        outcome data.
      </p>
      <br>
      <button class="btn btn-close" id="Q_3_2_instructions_modal_button">Close</button>
    </dialog>

    <dialog id="Q_3_3_instructions_modal">
      <h2>Elaboration 3.3</h2>
      <hr>
      <br>
      <p>
        If loss to follow up, or withdrawal from the study, could be related to participantsâ€™ health status, then it is
        possible that missingness in the outcome was influenced by its true value. However, if all missing outcome data
        occurred for documented reasons that are unrelated to the outcome then the risk of bias due to missing outcome
        data will be low (for example, failure of a measuring device or interruptions to routine data collection).
      </p>
      <p>
        In time-to-event analyses, participants censored during trial follow-up, for example because they withdrew from
        the study, should be regarded as having missing outcome data, even though some of their follow up is included in
        the analysis. Note that such participants may be shown as included in analyses in CONSORT flow diagrams.
      </p>
      <br>
      <button class="btn btn-close" id="Q_3_3_instructions_modal_button">Close</button>
    </dialog>

    <dialog id="Q_3_4_instructions_modal">
      <h2>Elaboration 3.4</h2>
      <hr>
      <br>
      <p>
        This question distinguishes between situations in which (i) missingness in the outcome could depend on its true
        value (assessed as â€˜Some concernsâ€™) from those in which (ii) it is likely that missingness in the outcome
        depended on its true value (assessed as â€˜High risk of biasâ€™). Five reasons for answering â€˜Yesâ€™ are:
      </p>
      <br>
      <p>
        1. Differences between intervention groups in the proportions of missing outcome data. If there is a difference
        between the effects of the experimental and comparator interventions on the outcome, and the missingness in the
        outcome is influenced by its true value, then the proportions of missing outcome data are likely to differ
        between intervention groups. Such a difference suggests a risk of bias due to missing outcome data, because the
        trial result will be sensitive to missingness in the outcome being related to its true value. For
        time-to-event-data, the analogue is that rates of censoring (loss to follow-up) differ between the intervention
        groups.
      </p>
      <br>
      <p>
        2. Reported reasons for missing outcome data provide evidence that missingness in the outcome depends on its
        true value;
      </p>
      <br>
      <p>
        3. Reported reasons for missing outcome data differ between the intervention groups;
      </p>
      <br>
      <p>
        4. The circumstances of the trial make it likely that missingness in the outcome depends on its true value. For
        example, in trials of interventions to treat schizophrenia it is widely understood that continuing symptoms make
        drop out more likely.
      </p>
      <br>
      <p>
        5. In time-to-event analyses, participantsâ€™ follow up is censored when they stop or change their assigned
        intervention, for example because of drug toxicity or, in cancer trials, when participants switch to second-line
        chemotherapy.
      </p>
      <br>
      <p>
        Answer â€˜Noâ€™ if the analysis accounted for participant characteristics that are likely to explain the
        relationship between missingness in the outcome and its true value.
      </p>
      <br>
      <button class="btn btn-close" id="Q_3_4_instructions_modal_button">Close</button>
    </dialog>

    <dialog id="Q_4_1_instructions_modal">
      <h2>Elaboration 4.1</h2>
      <hr>
      <br>
      <p>
        This question aims to identify methods of outcome measurement (data collection) that are unsuitable for the
        outcome they are intended to evaluate. The question does not aim to assess whether the choice of outcome being
        evaluated was sensible (e.g. because it is a surrogate or proxy for the main outcome of interest). In most
        circumstances, for pre-specified outcomes, the answer to this question will be â€˜Noâ€™ or â€˜Probably noâ€™.
      </p>
      <br>
      <p>
        Answer â€˜Yesâ€™ or â€˜Probably yesâ€™ if the method of measuring the outcome is inappropriate, for example because:
      </p>
      <br>
      <p>
        (1) it is unlikely to be sensitive to plausible intervention effects (e.g. important ranges of outcome values
        fall outside levels that are detectable using the measurement method); or
      </p>
      <p>
        (2) the measurement instrument has been demonstrated to have poor validity.
      </p>
      <br>
      <button class="btn btn-close" id="Q_4_1_instructions_modal_button">Close</button>
    </dialog>

    <dialog id="Q_4_2_instructions_modal">
      <h2>Elaboration 4.2</h2>
      <hr>
      <br>
      <p>
        Comparable methods of outcome measurement (data collection) involve the same measurement methods and thresholds,
        used at comparable time points. Differences between intervention groups may arise because of â€˜diagnostic
        detection biasâ€™ in the context of passive collection of outcome data, or if an intervention involves additional
        visits to a healthcare provider, leading to additional opportunities for outcome events to be identified.
      </p>
      <br>
      <button class="btn btn-close" id="Q_4_2_instructions_modal_button">Close</button>
    </dialog>

    <dialog id="Q_4_3_instructions_modal">
      <h2>Elaboration 4.3</h2>
      <hr>
      <br>
      <p>
        Answer â€˜Noâ€™ if outcome assessors were blinded to intervention status. For participant-reported outcomes, the
        outcome assessor is the study participant.
      </p>
      <br>
      <button class="btn btn-close" id="Q_4_3_instructions_modal_button">Close</button>
    </dialog>

    <dialog id="Q_4_4_instructions_modal">
      <h2>Elaboration 4.4</h2>
      <hr>
      <br>
      <p>
        Knowledge of the assigned intervention could influence participant-reported outcomes (such as level of pain),
        observer-reported outcomes involving some judgement, and intervention provider decision outcomes. They are
        unlikely to influence observer-reported outcomes that do not involve judgement, for example all-cause mortality.
      </p>
      <br>
      <button class="btn btn-close" id="Q_4_4_instructions_modal_button">Close</button>
    </dialog>

    <dialog id="Q_4_5_instructions_modal">
      <h2>Elaboration 4.5</h2>
      <hr>
      <br>
      <p>
        This question distinguishes between situations in which (i) knowledge of intervention status could have
        influenced outcome assessment but there is no reason to believe that it did (assessed as â€˜Some concernsâ€™) from
        those in which (ii) knowledge of intervention status was likely to influence outcome assessment (assessed as
        â€˜Highâ€™). When there are strong levels of belief in either beneficial or harmful effects of the intervention, it
        is more likely that the outcome was influenced by knowledge of the intervention received. Examples may include
        patient-reported symptoms in trials of homeopathy, or assessments of recovery of function by a physiotherapist
        who delivered the intervention.
      </p>
      <br>
      <button class="btn btn-close" id="Q_4_5_instructions_modal_button">Close</button>
    </dialog>

    <dialog id="Q_5_1_instructions_modal">
      <h2>Elaboration 5.1</h2>
      <hr>
      <br>
      <p>
        If the researchersâ€™ pre-specified intentions are available in sufficient detail, then planned outcome
        measurements and analyses can be compared with those presented in the published report(s). To avoid the
        possibility of selection of the reported result, finalization of the analysis intentions must precede
        availability of unblinded outcome data to the trial investigators.
      </p>
      <br>
      <p>
        Changes to analysis plans that were made before unblinded outcome data were available, or that were clearly
        unrelated to the results (e.g. due to a broken machine making data collection impossible) do not raise concerns
        about bias in selection of the reported result.
      </p>
      <br>
      <button class="btn btn-close" id="Q_5_1_instructions_modal_button">Close</button>
    </dialog>

    <dialog id="Q_5_2_instructions_modal">
      <h2>Elaboration 5.2</h2>
      <hr>
      <br>
      <p>
        A particular outcome domain (i.e. a true state or endpoint of interest) may be measured in multiple ways.
      </p>
      <p>
        For example, the domain pain may be measured using multiple scales (e.g. a visual analogue scale and the McGill
        Pain Questionnaire), each at multiple time points (e.g. 3, 6 and 12 weeks post-treatment). If multiple
        measurements were made, but only one or a subset is reported on the basis of the results (e.g. statistical
        significance), there is a high risk of bias in the fully reported result. Attention should be restricted to
        outcome measurements that are eligible for consideration by the RoB 2 tool user. For example, if only a result
        using a specific measurement scale is eligible for inclusion in a meta-analysis (e.g. Hamilton Depression Rating
        Scale), and this is reported by the trial, then there would not be an issue of selection even if this result was
        reported (on the basis of the results) in preference to the result from a different measurement scale (e.g. Beck
        Depression Inventory).
      </p>
      <br>
      <p>
        Answer â€˜Yesâ€™ or â€˜Probably yesâ€™ if:
      </p>
      <p class="sub-item">
        There is clear evidence (usually through examination of a trial protocol or statistical analysis plan) that a
        domain was measured in multiple eligible ways, but data for only one or a subset of measures is fully reported
        (without justification), and the fully reported result is likely to have been selected on the basis of the
        results. Selection on the basis of the results can arise from a desire for findings to be newsworthy,
        sufficiently noteworthy to merit publication, or to confirm a prior hypothesis. For example, trialists who have
        a preconception, or vested interest in showing, that an experimental intervention is beneficial may be inclined
        to report outcome measurements selectively that are favourable to the experimental intervention.
      </p>
      <br>
      <p>
        Answer â€˜Noâ€™ or â€˜Probably noâ€™ if:
      </p>
      <p class="sub-item">
        There is clear evidence (usually through examination of a trial protocol or statistical analysis plan) that all
        eligible reported results for the outcome domain correspond to all intended outcome measurements.
      </p>
      <p class="sub-item">
        or
      </p>
      <p class="sub-item">
        There is only one possible way in which the outcome domain can be measured (hence there is no opportunity to
        select from multiple measures).
      </p>
      <p class="sub-item">
        or
      </p>
      <p class="sub-item">
        Outcome measurements are inconsistent across different reports on the same trial, but the trialists have
        provided the reason for the inconsistency and it is not related to the nature of the results.
      </p>
      <br>
      <p>
        Answer â€˜No informationâ€™ if:
      </p>
      <p class="sub-item">
        Analysis intentions are not available, or the analysis intentions are not reported in sufficient detail to
        enable an assessment, and there is more than one way in which the outcome domain could have been measured.
      </p>
      <br>
      <button class="btn btn-close" id="Q_5_2_instructions_modal_button">Close</button>
    </dialog>

    <dialog id="Q_5_3_instructions_modal">
      <h2>Elaboration 5.3</h2>
      <hr>
      <br>
      <p>
        A particular outcome measurement may be analysed in multiple ways. Examples include: unadjusted and adjusted
        models; final value vs change from baseline vs analysis of covariance; transformations of variables; different
        definitions of composite outcomes (e.g. â€˜major adverse eventâ€™); conversion of continuously scaled outcome to
        categorical data with different cut-points; different sets of covariates for adjustment; and different
        strategies for dealing with missing data. Application of multiple methods generates multiple effect estimates
        for a specific outcome measurement. If multiple estimates are generated but only one or a subset is reported on
        the basis of the results (e.g. statistical significance), there is a high risk of bias in the fully reported
        result. Attention should be restricted to analyses that are eligible for consideration by the RoB 2 tool user.
        For example, if only the result from an analysis of post-intervention values is eligible for inclusion in a
        meta-analysis (e.g. at 12 weeks after randomization), and this is reported by the trial, then there would not be
        an issue of selection even if this result was reported (on the basis of the results) in preference to the result
        from an analysis of changes from baseline.
      </p>
      <br>
      <p>
        Answer â€˜Yesâ€™ or â€˜Probably yesâ€™ if:
      </p>
      <p class="sub-item">
        There is clear evidence (usually through examination of a trial protocol or statistical analysis plan) that a
        measurement was analysed in multiple eligible ways, but data for only one or a subset of analyses is fully
        reported (without justification), and the fully reported result is likely to have been selected on the basis of
        the results. Selection on the basis of the results arises from a desire for findings to be newsworthy,
        sufficiently noteworthy to merit publication, or to confirm a prior hypothesis. For example, trialists who have
        a preconception or vested interest in showing that an experimental intervention is beneficial may be inclined to
        selectively report analyses that are favourable to the experimental intervention.
      </p>
      <br>
      <p>
        Answer â€˜Noâ€™ or â€˜Probably noâ€™ if:
      </p>
      <p class="sub-item">
        There is clear evidence (usually through examination of a trial protocol or statistical analysis plan) that all
        eligible reported results for the outcome measurement correspond to all intended analyses.
      </p>
      <p class="sub-item">
        or
      </p>
      <p class="sub-item">
        There is only one possible way in which the outcome measurement can be analysed (hence there is no opportunity
        to select from multiple analyses).
      </p>
      <p class="sub-item">
        or
      </p>
      <p class="sub-item">
        Analyses are inconsistent across different reports on the same trial, but the trialists have provided the reason
        for the inconsistency and it is not related to the nature of the results.
      </p>
      <br>
      <p>
        Answer â€˜No informationâ€™ if:
      </p>
      <p class="sub-item">
        Analysis intentions are not available, or the analysis intentions are not reported in sufficient detail to
        enable an assessment, and there is more than one way in which the outcome measurement could have been analysed.
      </p>
      <br>
      <button class="btn btn-close" id="Q_5_3_instructions_modal_button">Close</button>
    </dialog>

    <dialog id="edit_or_new">
      <h2>Elaboration 5.3</h2>
      <hr>
      <br>
      <p>
        There are saved reviews in the spreadsheet. Do you want to add a new review or edit a saved review?
      </p>
      <br>
      <button class="btn btn-close" id="edit_button_dialog">Edit</button>
      <button class="btn btn-close" id="new_button_dialog">New</button>
    </dialog>

    <dialog id="saved">
      <h2>Saved successfully!</h2>
      <br>
      <button class="btn btn-close" id="dialog_saved">Close</button>
    </dialog>

    <dialog id="not-saved">
      <h2>Error saving</h2>
      <br>
      <button class="btn btn-close" id="dialog_not_saved">Close</button>
    </dialog>

    <dialog id="loading">
      <h2>Recording changes...</h2>
      <br>
    </dialog>

  </div>

  <script>
    
    function initDateTime() {
      const now = new Date();
      const year = now.getFullYear().toString().substr(-2);
      const month = String(now.getMonth() + 1).padStart(2, '0');
      const day = String(now.getDate()).padStart(2, '0');
      const hours = String(now.getHours()).padStart(2, '0');
      const minutes = String(now.getMinutes()).padStart(2, '0');

      const dateTimeString = `${year}/${month}/${day} - ${hours}:${minutes}`;
      document.getElementById('datetime').value = dateTimeString;
    }

    function switchTab(tabId) {
      
      document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
      document.querySelectorAll('.tab-panel').forEach(panel => panel.classList.remove('active'));

      
      let buttonToActivate;
      if (['domain-2-default', 'domain-2-PP', 'domain-2-ITT'].includes(tabId)) {
        
        buttonToActivate = document.getElementById('domain-2-tab-button');
      } else {
        
        buttonToActivate = document.querySelector(`.tab-button[onclick="switchTab('${tabId}')"]`);
      }

      
      if (buttonToActivate) {
        buttonToActivate.classList.add('active');
      }
      const panelToActivate = document.getElementById(tabId);
      if (panelToActivate) {
        panelToActivate.classList.add('active');
      }

      
      if (tabId === 'domain-1') {
        setupAnswer1Listeners();
        assessorJudgmentListenerDomain1();
      }

      
      if (tabId === 'domain-2-ITT') {
        setupAnswer2ListenersITT();
        assessorJudgmentListenerDomain2ITT();
      }

      
      if (tabId === 'domain-2-PP') {
        setupAnswer2ListenersPP();
        assessorJudgmentListenerDomain2PP();
      }

      
      if (tabId === 'domain-3') {
        setupAnswer3Listeners();
        assessorJudgmentListenerDomain3();
      }

      
      if (tabId === 'domain-4') {
        setupAnswer4Listeners();
        assessorJudgmentListenerDomain4();
      }

      
      if (tabId === 'domain-5') {
        setupAnswer5Listeners();
        assessorJudgmentListenerDomain5();
      }
    }

    function defineAssessorJudDomain1() {
      const answer = document.getElementById("assessor-jud-domain-1");
      const answerValue = answer.value;
      const overallBiasIndicator = document.getElementById("overall-bias-domain-1");

      if (answerValue === 'Low') {
        overallBiasIndicator.textContent = "L";
        overallBiasIndicator.style.backgroundColor = "#00ff00";
        overallBiasIndicator.style.color = "black";
      } else if (answerValue === 'Some concerns') {
        overallBiasIndicator.textContent = "S";
        overallBiasIndicator.style.backgroundColor = "#ffff00";
        overallBiasIndicator.style.color = "black";
        overallBiasAlgorithm();
      } else if (answerValue === 'High') {
        overallBiasIndicator.textContent = "H";
        overallBiasIndicator.style.backgroundColor = "#ff0000";
        overallBiasIndicator.style.color = "black";
      } else {
        overallBiasIndicator.textContent = "";
        overallBiasIndicator.style.backgroundColor = "#F0F0F0";
        overallBiasIndicator.style.color = "#666";
      }

      overallBiasAlgorithm();
    }

    function assessorJudgmentListenerDomain1() {
      const answer = document.getElementById("assessor-jud-domain-1");
      if (answer && !answer.dataset.listenerAttached) {
        answer.addEventListener("change", defineAssessorJudDomain1);
        answer.dataset.listenerAttached = 'true';
      }
    }

    function defineAssessorJudDomain2PP() {
      const answer = document.getElementById("assessor-jud-domain-2-PP");
      const answerValue = answer.value;
      const overallBiasIndicator = document.getElementById("overall-bias-domain-2");

      if (answerValue === 'Low') {
        overallBiasIndicator.textContent = "L";
        overallBiasIndicator.style.backgroundColor = "#00ff00";
        overallBiasIndicator.style.color = "black";
      } else if (answerValue === 'Some concerns') {
        overallBiasIndicator.textContent = "S";
        overallBiasIndicator.style.backgroundColor = "#ffff00";
        overallBiasIndicator.style.color = "black";
      } else if (answerValue === 'High') {
        overallBiasIndicator.textContent = "H";
        overallBiasIndicator.style.backgroundColor = "#ff0000";
        overallBiasIndicator.style.color = "black";
      } else {
        overallBiasIndicator.textContent = "";
        overallBiasIndicator.style.backgroundColor = "#F0F0F0";
        overallBiasIndicator.style.color = "#666";
      }

      overallBiasAlgorithm();
    }

    function assessorJudgmentListenerDomain2PP() {
      const answer = document.getElementById("assessor-jud-domain-2-PP");
      if (answer && !answer.dataset.listenerAttached) {
        answer.addEventListener("change", defineAssessorJudDomain2PP);
        answer.dataset.listenerAttached = 'true';
      }
    }

    function defineAssessorJudDomain2ITT() {
      const answer = document.getElementById("assessor-jud-domain-2-ITT");
      const answerValue = answer.value;
      const overallBiasIndicator = document.getElementById("overall-bias-domain-2");

      if (answerValue === 'Low') {
        overallBiasIndicator.textContent = "L";
        overallBiasIndicator.style.backgroundColor = "#00ff00";
        overallBiasIndicator.style.color = "black";
      } else if (answerValue === 'Some concerns') {
        overallBiasIndicator.textContent = "S";
        overallBiasIndicator.style.backgroundColor = "#ffff00";
        overallBiasIndicator.style.color = "black";
      } else if (answerValue === 'High') {
        overallBiasIndicator.textContent = "H";
        overallBiasIndicator.style.backgroundColor = "#ff0000";
        overallBiasIndicator.style.color = "black";
      } else {
        overallBiasIndicator.textContent = "";
        overallBiasIndicator.style.backgroundColor = "#F0F0F0";
        overallBiasIndicator.style.color = "#666";
      }

      overallBiasAlgorithm();
    }

    function assessorJudgmentListenerDomain2ITT() {
      const answer = document.getElementById("assessor-jud-domain-2-ITT");
      if (answer && !answer.dataset.listenerAttached) {
        answer.addEventListener("change", defineAssessorJudDomain2ITT);
        answer.dataset.listenerAttached = 'true';
      }
    }

    function defineAssessorJudDomain3() {
      const answer = document.getElementById("assessor-jud-domain-3");
      const answerValue = answer.value;
      const overallBiasIndicator = document.getElementById("overall-bias-domain-3");

      if (answerValue === 'Low') {
        overallBiasIndicator.textContent = "L";
        overallBiasIndicator.style.backgroundColor = "#00ff00";
        overallBiasIndicator.style.color = "black";
      } else if (answerValue === 'Some concerns') {
        overallBiasIndicator.textContent = "S";
        overallBiasIndicator.style.backgroundColor = "#ffff00";
        overallBiasIndicator.style.color = "black";
      } else if (answerValue === 'High') {
        overallBiasIndicator.textContent = "H";
        overallBiasIndicator.style.backgroundColor = "#ff0000";
        overallBiasIndicator.style.color = "black";
      } else {
        overallBiasIndicator.textContent = "";
        overallBiasIndicator.style.backgroundColor = "#F0F0F0";
        overallBiasIndicator.style.color = "#666";
      }

      overallBiasAlgorithm();
    }

    function assessorJudgmentListenerDomain3() {
      const answer = document.getElementById("assessor-jud-domain-3");
      if (answer && !answer.dataset.listenerAttached) {
        answer.addEventListener("change", defineAssessorJudDomain3);
        answer.dataset.listenerAttached = 'true';
      }
    }

    function defineAssessorJudDomain4() {
      const answer = document.getElementById("assessor-jud-domain-4");
      const answerValue = answer.value;
      const overallBiasIndicator = document.getElementById("overall-bias-domain-4");

      if (answerValue === 'Low') {
        overallBiasIndicator.textContent = "L";
        overallBiasIndicator.style.backgroundColor = "#00ff00";
        overallBiasIndicator.style.color = "black";
      } else if (answerValue === 'Some concerns') {
        overallBiasIndicator.textContent = "S";
        overallBiasIndicator.style.backgroundColor = "#ffff00";
        overallBiasIndicator.style.color = "black";
      } else if (answerValue === 'High') {
        overallBiasIndicator.textContent = "H";
        overallBiasIndicator.style.backgroundColor = "#ff0000";
        overallBiasIndicator.style.color = "black";
      } else {
        overallBiasIndicator.textContent = "";
        overallBiasIndicator.style.backgroundColor = "#F0F0F0";
        overallBiasIndicator.style.color = "#666";
      }

      overallBiasAlgorithm();
    }

    function assessorJudgmentListenerDomain4() {
      const answer = document.getElementById("assessor-jud-domain-4");
      if (answer && !answer.dataset.listenerAttached) {
        answer.addEventListener("change", defineAssessorJudDomain4);
        answer.dataset.listenerAttached = 'true';
      }
    }

    function defineAssessorJudDomain5() {
      const answer = document.getElementById("assessor-jud-domain-5");
      const answerValue = answer.value;
      const overallBiasIndicator = document.getElementById("overall-bias-domain-5");

      if (answerValue === 'Low') {
        overallBiasIndicator.textContent = "L";
        overallBiasIndicator.style.backgroundColor = "#00ff00";
        overallBiasIndicator.style.color = "black";
      } else if (answerValue === 'Some concerns') {
        overallBiasIndicator.textContent = "S";
        overallBiasIndicator.style.backgroundColor = "#ffff00";
        overallBiasIndicator.style.color = "black";
      } else if (answerValue === 'High') {
        overallBiasIndicator.textContent = "H";
        overallBiasIndicator.style.backgroundColor = "#ff0000";
        overallBiasIndicator.style.color = "black";
      } else {
        overallBiasIndicator.textContent = "";
        overallBiasIndicator.style.backgroundColor = "#F0F0F0";
        overallBiasIndicator.style.color = "#666";
      }

      overallBiasAlgorithm();
    }

    function assessorJudgmentListenerDomain5() {
      const answer = document.getElementById("assessor-jud-domain-5");
      if (answer && !answer.dataset.listenerAttached) {
        answer.addEventListener("change", defineAssessorJudDomain5);
        answer.dataset.listenerAttached = 'true';
      }
    }

    function overallBiasAlgorithm() {
      const domainIds = [
        "overall-bias-domain-1",
        "overall-bias-domain-2",
        "overall-bias-domain-3",
        "overall-bias-domain-4",
        "overall-bias-domain-5"
      ];

      const biasValues = domainIds.map(id => {
        const element = document.getElementById(id);
        return element ? element.textContent.trim() : '';
      });

      const overallBiasResultElement = document.getElementById("alg-result-overall");

      

      
      if (biasValues.some(value => value === '')) {
        overallBiasResultElement.textContent = 'Algorithm';
        overallBiasResultElement.style.backgroundColor = '#f0f0f0';
        overallBiasResultElement.style.color = '#666';
      }
      
      else if (biasValues.includes('H')) {
        overallBiasResultElement.textContent = 'High';
        overallBiasResultElement.style.backgroundColor = '#ff0000';
        overallBiasResultElement.style.color = 'black';
      }
      
      else if (biasValues.includes('S')) {
        overallBiasResultElement.textContent = 'Some concerns';
        overallBiasResultElement.style.backgroundColor = '#ffff00';
        overallBiasResultElement.style.color = 'black';
      }
      
      else {
        overallBiasResultElement.textContent = 'Low';
        overallBiasResultElement.style.backgroundColor = '#00ff00';
        overallBiasResultElement.style.color = 'black';
      }
    }

    function resetDomain2Fields() {
      
      const panelIds = ['domain-2-ITT', 'domain-2-PP'];

      const overallBiasIndicator = document.getElementById("overall-bias-domain-2");
      overallBiasIndicator.textContent = "";
      overallBiasIndicator.style.backgroundColor = "#F0F0F0";
      overallBiasIndicator.style.color = "#666";

      panelIds.forEach(id => {
        const panel = document.getElementById(id);
        if (!panel) return;

        
        panel.querySelectorAll('select').forEach(select => {
          if( !(select.id.includes('_check')) ){
            select.selectedIndex = 0;
            select.disabled = false;
          }
        });

        
        panel.querySelectorAll('textarea').forEach(textarea => {
          textarea.value = '';
        });

        
        const resultDiv = panel.querySelector('.domain-alg-result');
        if (resultDiv) {
          resultDiv.textContent = 'Algorithm';
          resultDiv.style.backgroundColor = '#f0f0f0';
          resultDiv.style.color = '#666';
        }
      });
    }


    
    function toggleConditionalField() {
      resetDomain2Fields();

      const select = document.getElementById('assessment-aim');
      const conditionalField = document.getElementById('conditional-field');

      
      if (select.value === 'per-protocol') {
        activeDomain2TabId = 'domain-2-PP';
        conditionalField.classList.remove('disabled');
        setupAnswer2ListenersPP();
      } else if (select.value === 'intention-to-treat') {
        activeDomain2TabId = 'domain-2-ITT';
        conditionalField.classList.add('disabled');
        conditionalField.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
          checkbox.checked = false;
        });
      } else {
        activeDomain2TabId = 'domain-2-default';
        conditionalField.classList.add('disabled');
        conditionalField.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
          checkbox.checked = false;
        });
      }

      
      document.getElementById('domain-2-tab-button').setAttribute('onclick', `switchTab('${activeDomain2TabId}')`);

      
      if (document.getElementById('domain-2-tab-button').classList.contains('active')) {
        switchTab(activeDomain2TabId);
      }

    }

    
    function openGuidance() {
      window.open('https://www.riskofbias.info/welcome/rob-2-0-tool', '_blank');
    }

    
    function closeDialog() {
      if (typeof google !== 'undefined' && google.script && google.script.host) {
        google.script.host.close();
      } else {
        alert('Fechando o dialog...');
      }
    }

    
    function syncFields() {
      
      const headerAssessor = document.getElementById('header-assessor');
      const formAssessor = document.getElementById('assessor');
      const headerStudyId = document.getElementById('header-study-id');
      const formStudyId = document.getElementById('study-id');

      formAssessor.addEventListener('input', function () {
        headerAssessor.value = this.value;
      });

      formStudyId.addEventListener('input', function () {
        headerStudyId.value = this.value;
      });
    }

    
    var planDataCheck = [];
    var planDataCheckParsed = [];

    
    document.addEventListener('DOMContentLoaded', function () {
      initDateTime();
      syncFields();

      
      document.getElementById('domain-2-tab-button').addEventListener('click', function () {
        switchTab(activeDomain2TabId);
      });

      
      toggleConditionalField();

      switchTab('study-info');
      document.querySelector('.tab-button.active').classList.remove('active');
      document.querySelector('.tab-button[onclick="switchTab(\'study-info\')"]').classList.add('active');

      google.script.run
        .withSuccessHandler(dataFromResults => {
          google.script.run
            .withSuccessHandler(dataFromCheck => {
              populateDropdown(dataFromResults, dataFromCheck);
            }).getRecordIds('Check');
        }).getRecordIds('Results');

      const inputElement = document.getElementById('assessment-id');
      if (inputElement) {
        inputElement.addEventListener('input', onAssessmentIdInput);
      }

    });


    document.getElementById('Q_1_1_instructions').addEventListener('click', function (e) {
      event.preventDefault();

      document.getElementById('Q_1_1_instructions_modal').showModal();;

      document.getElementById('Q_1_1_instructions_modal_button').addEventListener('click', () => {
        document.getElementById('Q_1_1_instructions_modal').close();
      });
    });

    document.getElementById('Q_1_2_instructions').addEventListener('click', function (e) {
      event.preventDefault();

      document.getElementById('Q_1_2_instructions_modal').showModal();;

      document.getElementById('Q_1_2_instructions_modal_button').addEventListener('click', () => {
        document.getElementById('Q_1_2_instructions_modal').close();
      });
    });

    document.getElementById('Q_1_3_instructions').addEventListener('click', function (e) {
      event.preventDefault();

      document.getElementById('Q_1_3_instructions_modal').showModal();;

      document.getElementById('Q_1_3_instructions_modal_button').addEventListener('click', () => {
        document.getElementById('Q_1_3_instructions_modal').close();
      });
    });

    document.getElementById('Q_2_1_instructions').addEventListener('click', function (e) {
      event.preventDefault();

      document.getElementById('Q_2_1_instructions_modal').showModal();;

      document.getElementById('Q_2_1_instructions_modal_button').addEventListener('click', () => {
        document.getElementById('Q_2_1_instructions_modal').close();
      });
    });

    document.getElementById('Q_2_2_instructions').addEventListener('click', function (e) {
      event.preventDefault();

      document.getElementById('Q_2_2_instructions_modal').showModal();;

      document.getElementById('Q_2_2_instructions_modal_button').addEventListener('click', () => {
        document.getElementById('Q_2_2_instructions_modal').close();
      });
    });

    document.getElementById('Q_2_3_instructions_pp').addEventListener('click', function (e) {
      event.preventDefault();

      document.getElementById('Q_2_3_instructions_pp_modal').showModal();;

      document.getElementById('Q_2_3_instructions_pp_modal_button').addEventListener('click', () => {
        document.getElementById('Q_2_3_instructions_pp_modal').close();
      });
    });

    document.getElementById('Q_2_4_instructions_pp').addEventListener('click', function (e) {
      event.preventDefault();

      document.getElementById('Q_2_4_instructions_pp_modal').showModal();;

      document.getElementById('Q_2_4_instructions_pp_modal_button').addEventListener('click', () => {
        document.getElementById('Q_2_4_instructions_pp_modal').close();
      });
    });

    document.getElementById('Q_2_5_instructions_pp').addEventListener('click', function (e) {
      event.preventDefault();

      document.getElementById('Q_2_5_instructions_pp_modal').showModal();;

      document.getElementById('Q_2_5_instructions_pp_modal_button').addEventListener('click', () => {
        document.getElementById('Q_2_5_instructions_pp_modal').close();
      });
    });

    document.getElementById('Q_2_6_instructions_pp').addEventListener('click', function (e) {
      event.preventDefault();

      document.getElementById('Q_2_6_instructions_pp_modal').showModal();;

      document.getElementById('Q_2_6_instructions_pp_modal_button').addEventListener('click', () => {
        document.getElementById('Q_2_6_instructions_pp_modal').close();
      });
    });

    document.getElementById('Q_2_1_instructions_itt').addEventListener('click', function (e) {
      event.preventDefault();

      document.getElementById('Q_2_1_instructions_modal').showModal();;

      document.getElementById('Q_2_1_instructions_modal_button').addEventListener('click', () => {
        document.getElementById('Q_2_1_instructions_modal').close();
      });
    });

    document.getElementById('Q_2_2_instructions_itt').addEventListener('click', function (e) {
      event.preventDefault();

      document.getElementById('Q_2_2_instructions_modal').showModal();;

      document.getElementById('Q_2_2_instructions_modal_button').addEventListener('click', () => {
        document.getElementById('Q_2_2_instructions_modal').close();
      });
    });

    document.getElementById('Q_2_3_instructions_itt').addEventListener('click', function (e) {
      event.preventDefault();

      document.getElementById('Q_2_3_instructions_itt_modal').showModal();;

      document.getElementById('Q_2_3_instructions_itt_modal_button').addEventListener('click', () => {
        document.getElementById('Q_2_3_instructions_itt_modal').close();
      });
    });

    document.getElementById('Q_2_4_instructions_itt').addEventListener('click', function (e) {
      event.preventDefault();

      document.getElementById('Q_2_4_instructions_itt_modal').showModal();;

      document.getElementById('Q_2_4_instructions_itt_modal_button').addEventListener('click', () => {
        document.getElementById('Q_2_4_instructions_itt_modal').close();
      });
    });

    document.getElementById('Q_2_5_instructions_itt').addEventListener('click', function (e) {
      event.preventDefault();

      document.getElementById('Q_2_5_instructions_itt_modal').showModal();;

      document.getElementById('Q_2_5_instructions_itt_modal_button').addEventListener('click', () => {
        document.getElementById('Q_2_5_instructions_itt_modal').close();
      });
    });

    document.getElementById('Q_2_6_instructions_itt').addEventListener('click', function (e) {
      event.preventDefault();

      document.getElementById('Q_2_6_instructions_itt_modal').showModal();;

      document.getElementById('Q_2_6_instructions_itt_modal_button').addEventListener('click', () => {
        document.getElementById('Q_2_6_instructions_itt_modal').close();
      });
    });

    document.getElementById('Q_2_7_instructions_itt').addEventListener('click', function (e) {
      event.preventDefault();

      document.getElementById('Q_2_7_instructions_itt_modal').showModal();;

      document.getElementById('Q_2_7_instructions_itt_modal_button').addEventListener('click', () => {
        document.getElementById('Q_2_7_instructions_itt_modal').close();
      });
    });

    document.getElementById('Q_3_1_instructions').addEventListener('click', function (e) {
      event.preventDefault();

      document.getElementById('Q_3_1_instructions_modal').showModal();;

      document.getElementById('Q_3_1_instructions_modal_button').addEventListener('click', () => {
        document.getElementById('Q_3_1_instructions_modal').close();
      });
    });

    document.getElementById('Q_3_2_instructions').addEventListener('click', function (e) {
      event.preventDefault();

      document.getElementById('Q_3_2_instructions_modal').showModal();;

      document.getElementById('Q_3_2_instructions_modal_button').addEventListener('click', () => {
        document.getElementById('Q_3_2_instructions_modal').close();
      });
    });

    document.getElementById('Q_3_3_instructions').addEventListener('click', function (e) {
      event.preventDefault();

      document.getElementById('Q_3_3_instructions_modal').showModal();;

      document.getElementById('Q_3_3_instructions_modal_button').addEventListener('click', () => {
        document.getElementById('Q_3_3_instructions_modal').close();
      });
    });

    document.getElementById('Q_3_4_instructions').addEventListener('click', function (e) {
      event.preventDefault();

      document.getElementById('Q_3_4_instructions_modal').showModal();;

      document.getElementById('Q_3_4_instructions_modal_button').addEventListener('click', () => {
        document.getElementById('Q_3_4_instructions_modal').close();
      });
    });

    document.getElementById('Q_4_1_instructions').addEventListener('click', function (e) {
      event.preventDefault();

      document.getElementById('Q_4_1_instructions_modal').showModal();;

      document.getElementById('Q_4_1_instructions_modal_button').addEventListener('click', () => {
        document.getElementById('Q_4_1_instructions_modal').close();
      });
    });

    document.getElementById('Q_4_2_instructions').addEventListener('click', function (e) {
      event.preventDefault();

      document.getElementById('Q_4_2_instructions_modal').showModal();;

      document.getElementById('Q_4_2_instructions_modal_button').addEventListener('click', () => {
        document.getElementById('Q_4_2_instructions_modal').close();
      });
    });

    document.getElementById('Q_4_3_instructions').addEventListener('click', function (e) {
      event.preventDefault();

      document.getElementById('Q_4_3_instructions_modal').showModal();;

      document.getElementById('Q_4_3_instructions_modal_button').addEventListener('click', () => {
        document.getElementById('Q_4_3_instructions_modal').close();
      });
    });

    document.getElementById('Q_4_4_instructions').addEventListener('click', function (e) {
      event.preventDefault();

      document.getElementById('Q_4_4_instructions_modal').showModal();;

      document.getElementById('Q_4_4_instructions_modal_button').addEventListener('click', () => {
        document.getElementById('Q_4_4_instructions_modal').close();
      });
    });

    document.getElementById('Q_4_5_instructions').addEventListener('click', function (e) {
      event.preventDefault();

      document.getElementById('Q_4_5_instructions_modal').showModal();;

      document.getElementById('Q_4_5_instructions_modal_button').addEventListener('click', () => {
        document.getElementById('Q_4_5_instructions_modal').close();
      });
    });

    document.getElementById('Q_5_1_instructions').addEventListener('click', function (e) {
      event.preventDefault();

      document.getElementById('Q_5_1_instructions_modal').showModal();

      document.getElementById('Q_5_1_instructions_modal_button').addEventListener('click', () => {
        document.getElementById('Q_5_1_instructions_modal').close();
      });
    });

    document.getElementById('Q_5_2_instructions').addEventListener('click', function (e) {
      event.preventDefault();

      document.getElementById('Q_5_2_instructions_modal').showModal();

      document.getElementById('Q_5_2_instructions_modal_button').addEventListener('click', () => {
        document.getElementById('Q_5_2_instructions_modal').close();
      });
    });

    document.getElementById('Q_5_3_instructions').addEventListener('click', function (e) {
      event.preventDefault();

      document.getElementById('Q_5_3_instructions_modal').showModal();

      document.getElementById('Q_5_3_instructions_modal_button').addEventListener('click', () => {
        document.getElementById('Q_5_3_instructions_modal').close();
      });
    });


    function algorithm_result(algorithm, answers) {
      const levels = ['low', 'some_concerns', 'high'];

      let alg_result = '';

      for (const level of levels) {
        const combinations = algorithm[level];

        for (const combKey in combinations) {
          const combination = combinations[combKey];
          let match = true;

          for (const question in answers) {
            const allowedAnswers = combination[question];
            const answer = answers[question];

            if (allowedAnswers.length > 0 && !allowedAnswers.includes(answer)) {
              match = false;
              break;
            }
          }

          if (match) {
            alg_result = level;
            break;
          }
        }
        if (alg_result) break;
      }

      switch (alg_result) {
        case 'low':
          text = 'Low';
          color = '#00ff00';
          font_color = 'black';
          break;
        case 'some_concerns':
          text = 'Some concerns';
          color = '#ffff00';
          font_color = 'black';
          break;
        case 'high':
          text = 'High';
          color = '#ff0000';
          font_color = 'black';
          break;
        default:
          text = 'ERROR!';
          color = '#000000';
          font_color = '#ffffff';
      }

      return {
        'text': text,
        'color': color,
        'font_color': font_color,
      }
    }

    function updateDomain1AlgResult() {
      const answer1 = document.getElementById('answer_1_1')?.value;
      const answer2 = document.getElementById('answer_1_2')?.value;
      const answer3 = document.getElementById('answer_1_3')?.value;
      const resultDiv = document.getElementById('alg-result-domain-1');

      if (!answer1 || !answer2 || !answer3 || !resultDiv) {
        resultDiv.textContent = 'Algorithm';
        resultDiv.style.backgroundColor = '#f0f0f0';
        resultDiv.style.color = '#666';
        return;
      }

      const domain1_alg = {
        'low': {
          'combination_1': {
            '1.1': ['Y', 'PY', 'NI'],
            '1.2': ['Y', 'PY'],
            '1.3': ['N', 'PN', 'NI'],
          },
        },
        'some_concerns': {
          'combination_1': {
            '1.1': ['Y', 'PY', 'NI'],
            '1.2': ['Y', 'PY'],
            '1.3': ['Y', 'PY'],
          },
          'combination_2': {
            '1.1': ['N', 'PN'],
            '1.2': ['Y', 'PY'],
            '1.3': [],
          },
          'combination_3': {
            '1.1': [],
            '1.2': ['NI'],
            '1.3': ['N', 'PN', 'NI'],
          },
        },
        'high': {
          'combination_1': {
            '1.1': [],
            '1.2': ['NI'],
            '1.3': ['Y', 'PY'],
          },
          'combination_2': {
            '1.1': [],
            '1.2': ['N', 'PN'],
            '1.3': [],
          },
        },
      }

      const answers = {
        '1.1': answer1,
        '1.2': answer2,
        '1.3': answer3,
      };

      const result_div_properties = algorithm_result(domain1_alg, answers);

      resultDiv.textContent = result_div_properties['text'];
      resultDiv.style.backgroundColor = result_div_properties['color'];
      resultDiv.style.color = result_div_properties['font_color'];
    }

    function condEnable2_7_ITT() {
      const q6 = document.getElementById("answer_2_6_itt");
      const q7 = document.getElementById("answer_2_7_itt");
      const answer6 = q6.value;
      const opNa = document.getElementById("2.7_itt_NA");
      const q7Comment = document.getElementById('2.7_comment_ITT');
      const q7Link = document.getElementById('Q_2_7_instructions_itt');

      if (answer6 === "N" || answer6 === "PN" || answer6 === "NI" || answer6 === "") {
        q7.disabled = false;
        opNa.disabled = true;
        q7Comment.disabled = false;
        q7Link.classList.remove("disabled");
        if (q7.value === "NA") {
          q7.value = "";
        }
      } else {
        q7.disabled = true;
        opNa.disabled = false;
        q7.value = "NA";
        q7Comment.value = '';
        q7Comment.disabled = true;
        q7Link.classList.add("disabled");
      }

      updateDomain2ITTAlgResult();
    }

    function condEnable2_3_ITT() {
      const q1 = document.getElementById("answer_2_1_itt");
      const q2 = document.getElementById("answer_2_2_itt");
      const q3 = document.getElementById("answer_2_3_itt");
      const answer1 = q1.value;
      const answer2 = q2.value;
      const opNa = document.getElementById("2.3_itt_NA");
      const q3Comment = document.getElementById('2.3_comment_ITT');
      const q3Link = document.getElementById('Q_2_3_instructions_itt');

      const answers = ["N", "PN"]

      if (answers.includes(answer1) && answers.includes(answer2)) {
        q3.disabled = true;
        opNa.disabled = false;
        q3.value = "NA";
        q3Comment.value = '';
        q3Comment.disabled = true;
        q3Link.classList.add("disabled");
      } else {
        q3.disabled = false;
        opNa.disabled = true;
        q3Comment.disabled = false;
        q3Link.classList.remove("disabled");
        if (q3.value === "NA") {
          q3.value = "";
        }
      }

      condEnable2_4_ITT();
    }

    function condEnable2_4_ITT() {
      const q3 = document.getElementById("answer_2_3_itt");
      const q4 = document.getElementById("answer_2_4_itt");
      const answer3 = q3.value;
      const answer4 = q4.value;
      const opNa = document.getElementById("2.4_itt_NA");
      const q4Comment = document.getElementById('2.4_comment_ITT');
      const q4Link = document.getElementById('Q_2_4_instructions_itt');

      const answers = ["NA", "N", "PN", "NI"]

      if (answers.includes(answer3)) {
        q4.disabled = true;
        opNa.disabled = false;
        q4.value = "NA";
        q4Comment.value = '';
        q4Comment.disabled = true;
        q4Link.classList.add("disabled");
      } else {
        q4.disabled = false;
        opNa.disabled = true;
        q4Comment.disabled = false;
        q4Link.classList.remove("disabled");
        if (q4.value === "NA") {
          q4.value = "";
        }
      }

      condEnable2_5_ITT();
    }

    function condEnable2_5_ITT() {
      const q4 = document.getElementById("answer_2_4_itt");
      const q5 = document.getElementById("answer_2_5_itt");
      const answer4 = q4.value;
      const answer5 = q5.value;
      const opNa = document.getElementById("2.5_itt_NA");
      const q5Comment = document.getElementById('2.5_comment_ITT');
      const q5Link = document.getElementById('Q_2_5_instructions_itt');

      const answers = ["NA", "N", "PN"]

      if (answers.includes(answer4)) {
        q5.disabled = true;
        opNa.disabled = false;
        q5.value = "NA";
        q5Comment.value = '';
        q5Comment.disabled = true;
        q5Link.classList.add("disabled");
      } else {
        q5.disabled = false;
        opNa.disabled = true;
        q5Comment.disabled = false;
        q5Link.classList.remove("disabled");
        if (q5.value === "NA") {
          q5.value = "";
        }
      }

      updateDomain2ITTAlgResult();
    }

    function updateDomain2ITTAlgResult() {

      const resultDiv = document.getElementById('alg-result-domain-2-ITT');

      const answerElements = [
        document.getElementById('answer_2_1_itt'),
        document.getElementById('answer_2_2_itt'),
        document.getElementById('answer_2_3_itt'),
        document.getElementById('answer_2_4_itt'),
        document.getElementById('answer_2_5_itt'),
        document.getElementById('answer_2_6_itt'),
        document.getElementById('answer_2_7_itt')
      ];

      const hasEmptyRequired = answerElements.some(el => {
        return !el.disabled && el.value === "";
      });

      if (hasEmptyRequired || !resultDiv) {
        resultDiv.textContent = 'Algorithm';
        resultDiv.style.backgroundColor = '#f0f0f0';
        resultDiv.style.color = '#666';
        return;
      }


      const domain2_alg = {
        'low': {
          'combination_1': {
            '2.1': ['N', 'PN'],
            '2.2': ['N', 'PN'],
            '2.3': [],
            '2.4': [],
            '2.5': [],
            '2.6': ['Y', 'PY'],
            '2.7': [],
          },
          'combination_2': {
            '2.1': ['Y', 'PY', 'NI'],
            '2.2': [],
            '2.3': ['N', 'PN'],
            '2.4': [],
            '2.5': [],
            '2.6': ['Y', 'PY'],
            '2.7': [],
          },
          'combination_3': {
            '2.1': [],
            '2.2': ['Y', 'PY', 'NI'],
            '2.3': ['N', 'PN'],
            '2.4': [],
            '2.5': [],
            '2.6': ['Y', 'PY'],
            '2.7': [],
          },
        },
        'some_concerns': {
          'combination_1': {
            '2.1': ['Y', 'PY', 'NI'],
            '2.2': [],
            '2.3': ['NI'],
            '2.4': [],
            '2.5': [],
            '2.6': ['Y', 'PY'],
            '2.7': [],
          },
          'combination_2': {
            '2.1': [],
            '2.2': ['Y', 'PY', 'NI'],
            '2.3': ['NI'],
            '2.4': [],
            '2.5': [],
            '2.6': ['Y', 'PY'],
            '2.7': [],
          },
          'combination_3': {
            '2.1': ['Y', 'PY', 'NI'],
            '2.2': [],
            '2.3': ['Y', 'PY'],
            '2.4': ['N', 'PN'],
            '2.5': [],
            '2.6': ['Y', 'PY'],
            '2.7': [],
          },
          'combination_4': {
            '2.1': [],
            '2.2': ['Y', 'PY', 'NI'],
            '2.3': ['Y', 'PY'],
            '2.4': ['N', 'PN'],
            '2.5': [],
            '2.6': ['Y', 'PY'],
            '2.7': [],
          },
          'combination_5': {
            '2.1': ['Y', 'PY', 'NI'],
            '2.2': [],
            '2.3': ['Y', 'PY'],
            '2.4': ['Y', 'PY', 'NI'],
            '2.5': ['Y', 'PY'],
            '2.6': ['Y', 'PY'],
            '2.7': [],
          },
          'combination_6': {
            '2.1': [],
            '2.2': ['Y', 'PY', 'NI'],
            '2.3': ['Y', 'PY'],
            '2.4': ['Y', 'PY', 'NI'],
            '2.5': ['Y', 'PY'],
            '2.6': ['Y', 'PY'],
            '2.7': [],
          },
          'combination_7': {
            '2.1': ['Y', 'PY', 'NI'],
            '2.2': [],
            '2.3': ['NI'],
            '2.4': [],
            '2.5': [],
            '2.6': ['N', 'PN', 'NI'],
            '2.7': ['N', 'PN'],
          },
          'combination_8': {
            '2.1': [],
            '2.2': ['Y', 'PY', 'NI'],
            '2.3': ['NI'],
            '2.4': [],
            '2.5': [],
            '2.6': ['N', 'PN', 'NI'],
            '2.7': ['N', 'PN'],
          },
          'combination_9': {
            '2.1': ['Y', 'PY', 'NI'],
            '2.2': [],
            '2.3': ['Y', 'PY'],
            '2.4': ['N', 'PN'],
            '2.5': [],
            '2.6': ['N', 'PN', 'NI'],
            '2.7': ['N', 'PN'],
          },
          'combination_10': {
            '2.1': [],
            '2.2': ['Y', 'PY', 'NI'],
            '2.3': ['Y', 'PY'],
            '2.4': ['N', 'PN'],
            '2.5': [],
            '2.6': ['N', 'PN', 'NI'],
            '2.7': ['N', 'PN'],
          },
          'combination_11': {
            '2.1': ['Y', 'PY', 'NI'],
            '2.2': [],
            '2.3': ['Y', 'PY'],
            '2.4': ['Y', 'PY', 'NI'],
            '2.5': ['Y', 'PY'],
            '2.6': ['N', 'PN', 'NI'],
            '2.7': ['N', 'PN'],
          },
          'combination_12': {
            '2.1': [],
            '2.2': ['Y', 'PY', 'NI'],
            '2.3': ['Y', 'PY'],
            '2.4': ['Y', 'PY', 'NI'],
            '2.5': ['Y', 'PY'],
            '2.6': ['N', 'PN', 'NI'],
            '2.7': ['N', 'PN'],
          },
          'combination_14': {
            '2.1': ['N', 'PN'],
            '2.2': ['N', 'PN'],
            '2.3': [],
            '2.4': [],
            '2.5': [],
            '2.6': ['N', 'PN', 'NI'],
            '2.7': ['N', 'PN'],
          },
          'combination_15': {
            '2.1': ['Y', 'PY', 'NI'],
            '2.2': [],
            '2.3': ['N', 'PN'],
            '2.4': [],
            '2.5': [],
            '2.6': ['N', 'PN', 'NI'],
            '2.7': ['N', 'PN'],
          },
          'combination_16': {
            '2.1': [],
            '2.2': ['Y', 'PY', 'NI'],
            '2.3': ['N', 'PN'],
            '2.4': [],
            '2.5': [],
            '2.6': ['N', 'PN', 'NI'],
            '2.7': ['N', 'PN'],
          },
        },
        'high': {
          'combination_1': {
            '2.1': ['Y', 'PY', 'NI'],
            '2.2': [],
            '2.3': ['Y', 'PY'],
            '2.4': ['Y', 'PY', 'NI'],
            '2.5': ['N', 'PN', 'NI'],
            '2.6': [],
            '2.7': [],
          },
          'combination_2': {
            '2.1': [],
            '2.2': ['Y', 'PY', 'NI'],
            '2.3': ['Y', 'PY'],
            '2.4': ['Y', 'PY', 'NI'],
            '2.5': ['N', 'PN', 'NI'],
            '2.6': [],
            '2.7': [],
          },
          'combination_3': {
            '2.1': [],
            '2.2': [],
            '2.3': [],
            '2.4': [],
            '2.5': [],
            '2.6': ['N', 'PN', 'NI'],
            '2.7': ['Y', 'PY', 'NI'],
          },
        }
      }

      const answers = {
        '2.1': answerElements[0].value,
        '2.2': answerElements[1].value,
        '2.3': answerElements[2].value,
        '2.4': answerElements[3].value,
        '2.5': answerElements[4].value,
        '2.6': answerElements[5].value,
        '2.7': answerElements[6].value,
      };

      const result_div_properties = algorithm_result(domain2_alg, answers);

      resultDiv.textContent = result_div_properties['text'];
      resultDiv.style.backgroundColor = result_div_properties['color'];
      resultDiv.style.color = result_div_properties['font_color'];
    }

    
    function setupAnswer1Listeners() {
      ['answer_1_1', 'answer_1_2', 'answer_1_3'].forEach(id => {
        const el = document.getElementById(id);
        if (el && !el.dataset.listenerAttached) {
          el.addEventListener('change', updateDomain1AlgResult);
          el.dataset.listenerAttached = 'true';
        }
      });
    }

    function setupAnswer2ListenersITT() {
      ['answer_2_1_itt', 'answer_2_2_itt', 'answer_2_3_itt', 'answer_2_4_itt', 'answer_2_5_itt', 'answer_2_6_itt', 'answer_2_7_itt'].forEach(id => {
        const el = document.getElementById(id);
        if (el && !el.dataset.listenerAttached) {
          el.addEventListener('change', updateDomain2ITTAlgResult);

          if (id === 'answer_2_6_itt') {
            el.addEventListener('change', condEnable2_7_ITT);
          }

          if (id === 'answer_2_1_itt' || id === 'answer_2_2_itt') {
            el.addEventListener('change', condEnable2_3_ITT);
          }

          if (id === 'answer_2_3_itt') {
            el.addEventListener('change', condEnable2_4_ITT);
          }

          if (id === 'answer_2_4_itt') {
            el.addEventListener('change', condEnable2_5_ITT);
          }

          el.dataset.listenerAttached = 'true';
        }
      });
    }

    function condEnable2_3_PP() {
      const q1 = document.getElementById("answer_2_1_pp");
      const answer1 = q1.value;
      const q2 = document.getElementById("answer_2_2_pp");
      const answer2 = q2.value;
      const q3 = document.getElementById("answer_2_3_pp");
      const opNa = document.getElementById("2.3_pp_NA");
      const nonProtocolOption = document.getElementById('non-protocol');
      const q3Comment = document.getElementById('2.3_comment_PP');
      const q3Link = document.getElementById('Q_2_3_instructions_pp');

      const answers = ["Y", "PY", "NI", ""];

      if (nonProtocolOption.checked) {
        if (answers.includes(answer1) || answers.includes(answer2)) {
          q3.disabled = false;
          opNa.style.display = 'none';
          q3Comment.disabled = false;
          q3Link.classList.remove("disabled");
          if (q3.value === "NA") {
            q3.value = "";
          }
        } else {
          q3.disabled = true;
          opNa.style.display = 'block';
          q3.value = "NA";
          q3Comment.value = '';
          q3Comment.disabled = true;
          q3Link.classList.add("disabled");
        }
      } else {
        
        q3.disabled = true;
        opNa.style.display = 'block';
        q3.value = "NA";
        q3Comment.value = '';
        q3Comment.disabled = true;
        q3Link.classList.add("disabled");
      }

      condEnable2_6_PP();
      updateDomain2PPAlgResult();
    }

    function condEnable2_4_PP() {
      const q4 = document.getElementById("answer_2_4_pp");
      const opNa = document.getElementById("2.4_pp_NA");
      const failuresOnImplementationOption = document.getElementById('implementation-failures');
      const q4Comment = document.getElementById('2.4_comment_PP');
      const q4Link = document.getElementById('Q_2_4_instructions_pp');

      if (failuresOnImplementationOption.checked) {
        q4.disabled = false;
        q4Comment.disabled = false;
        opNa.style.display = 'none';
        q4Link.classList.remove("disabled");
        if (q4.value === "NA") {
          q4.value = "";
        }
      } else {
        q4.disabled = true;
        opNa.style.display = 'block';
        q4.value = "NA";
        q4Comment.value = '';
        q4Comment.disabled = true;
        q4Link.classList.add("disabled");
      }

      condEnable2_6_PP();
      updateDomain2PPAlgResult();
    }

    function condEnable2_5_PP() {
      const q5 = document.getElementById("answer_2_5_pp");
      const opNa = document.getElementById("2.5_pp_NA");
      const nonAdherenceOption = document.getElementById('non-adherence');
      const q5Comment = document.getElementById('2.5_comment_PP');
      const q5Link = document.getElementById('Q_2_5_instructions_pp');

      if (nonAdherenceOption.checked) {
        q5.disabled = false;
        q5Comment.disabled = false;
        opNa.style.display = 'none';
        q5Link.classList.remove("disabled");
        if (q5.value === "NA") {
          q5.value = "";
        }
      } else {
        q5.disabled = true;
        opNa.style.display = 'block';
        q5.value = "NA";
        q5Comment.value = '';
        q5Comment.disabled = true;
        q5Link.classList.add("disabled");
      }

      condEnable2_6_PP();
      updateDomain2PPAlgResult();
    }

    function condEnable2_6_PP() {
      const q3 = document.getElementById("answer_2_3_pp");
      const answer3 = q3.value;
      const q4 = document.getElementById("answer_2_4_pp");
      const answer4 = q4.value;
      const q5 = document.getElementById("answer_2_5_pp");
      const answer5 = q5.value;
      const q6 = document.getElementById("answer_2_6_pp");
      const opNa = document.getElementById("2.6_pp_NA");
      const q6Comment = document.getElementById('2.6_comment_PP');
      const q6Link = document.getElementById('Q_2_6_instructions_pp');

      const answers2_3 = ['N', 'PN', 'NI', ''];
      const answers2_4_or_2_5 = ['Y', 'PY', 'NI', ''];

      if (answers2_4_or_2_5.includes(answer4) || answers2_4_or_2_5.includes(answer5)) {
        q6.disabled = false;
        opNa.style.display = 'none';
        q6Comment.disabled = false;
        q6Link.classList.remove("disabled");
        if (q6.value === "NA") {
          q6.value = "";
        }
      } else if (answers2_3.includes(answer3)) {
        q6.disabled = false;
        opNa.style.display = 'none';
        q6Comment.disabled = false;
        q6Link.classList.remove("disabled");
        if (q6.value === "NA") {
          q6.value = "";
        }
      } else {
        q6.disabled = true;
        opNa.style.display = 'block';
        q6.value = "NA";
        q6Comment.value = '';
        q6Comment.disabled = true;
        q6Link.classList.add("disabled");
      }

      updateDomain2PPAlgResult();
    }

    function updateDomain2PPAlgResult() {

      const resultDiv = document.getElementById('alg-result-domain-2-PP');

      const answerElements = [
        document.getElementById('answer_2_1_pp'),
        document.getElementById('answer_2_2_pp'),
        document.getElementById('answer_2_3_pp'),
        document.getElementById('answer_2_4_pp'),
        document.getElementById('answer_2_5_pp'),
        document.getElementById('answer_2_6_pp'),
      ];

      const hasEmptyRequired = answerElements.some(el => {
        return !el.disabled && el.value === "";
      });

      if (hasEmptyRequired || !resultDiv) {
        resultDiv.textContent = 'Algorithm';
        resultDiv.style.backgroundColor = '#f0f0f0';
        resultDiv.style.color = '#666';
        return;
      }


      const domain2_alg = {
        'low': {
          'combination_1': {
            '2.1': ['N', 'PN'],
            '2.2': ['N', 'PN'],
            '2.3': [],
            '2.4': ['NA', 'N', 'PN'],
            '2.5': ['NA', 'N', 'PN'],
            '2.6': [],
          },
          'combination_2': {
            '2.1': ['Y', 'PY', 'NI'],
            '2.2': [],
            '2.3': ['NA', 'Y', 'PY'],
            '2.4': ['NA', 'N', 'PN'],
            '2.5': ['NA', 'N', 'PN'],
            '2.6': [],
          },
          'combination_3': {
            '2.1': [],
            '2.2': ['Y', 'PY', 'NI'],
            '2.3': ['NA', 'Y', 'PY'],
            '2.4': ['NA', 'N', 'PN'],
            '2.5': ['NA', 'N', 'PN'],
            '2.6': [],
          },
        },
        'some_concerns': {
          'combination_1': {
            '2.1': ['N', 'PN'],
            '2.2': ['N', 'PN'],
            '2.3': [],
            '2.4': ['Y', 'PY', 'NI'],
            '2.5': [],
            '2.6': ['Y', 'PY'],
          },
          'combination_2': {
            '2.1': ['N', 'PN'],
            '2.2': ['N', 'PN'],
            '2.3': [],
            '2.4': [],
            '2.5': ['Y', 'PY', 'NI'],
            '2.6': ['Y', 'PY'],
          },
          'combination_3': {
            '2.1': ['Y', 'PY', 'NI'],
            '2.2': [],
            '2.3': ['NA', 'Y', 'PY'],
            '2.4': ['Y', 'PY', 'NI'],
            '2.5': [],
            '2.6': ['Y', 'PY'],
          },
          'combination_4': {
            '2.1': ['Y', 'PY', 'NI'],
            '2.2': [],
            '2.3': ['NA', 'Y', 'PY'],
            '2.4': [],
            '2.5': ['Y', 'PY', 'NI'],
            '2.6': ['Y', 'PY'],
          },
          'combination_5': {
            '2.1': [],
            '2.2': ['Y', 'PY', 'NI'],
            '2.3': ['NA', 'Y', 'PY'],
            '2.4': ['Y', 'PY', 'NI'],
            '2.5': [],
            '2.6': ['Y', 'PY'],
          },
          'combination_6': {
            '2.1': [],
            '2.2': ['Y', 'PY', 'NI'],
            '2.3': ['NA', 'Y', 'PY'],
            '2.4': [],
            '2.5': ['Y', 'PY', 'NI'],
            '2.6': ['Y', 'PY'],
          },
          'combination_7': {
            '2.1': ['Y', 'PY', 'NI'],
            '2.2': [],
            '2.3': ['N', 'PN', 'NI'],
            '2.4': [],
            '2.5': [],
            '2.6': ['Y', 'PY'],
          },
          'combination_8': {
            '2.1': [],
            '2.2': ['Y', 'PY', 'NI'],
            '2.3': ['N', 'PN', 'NI'],
            '2.4': [],
            '2.5': [],
            '2.6': ['Y', 'PY'],
          },
        },
        'high': {
          'combination_1': {
            '2.1': ['N', 'PN'],
            '2.2': ['N', 'PN'],
            '2.3': [],
            '2.4': ['Y', 'PY', 'NI'],
            '2.5': [],
            '2.6': ['N', 'PN', 'NI'],
          },
          'combination_2': {
            '2.1': ['N', 'PN'],
            '2.2': ['N', 'PN'],
            '2.3': [],
            '2.4': [],
            '2.5': ['Y', 'PY', 'NI'],
            '2.6': ['N', 'PN', 'NI'],
          },
          'combination_3': {
            '2.1': ['Y', 'PY', 'NI'],
            '2.2': [],
            '2.3': ['NA', 'Y', 'PY'],
            '2.4': ['Y', 'PY', 'NI'],
            '2.5': [],
            '2.6': ['N', 'PN', 'NI'],
          },
          'combination_4': {
            '2.1': ['Y', 'PY', 'NI'],
            '2.2': [],
            '2.3': ['NA', 'Y', 'PY'],
            '2.4': [],
            '2.5': ['Y', 'PY', 'NI'],
            '2.6': ['N', 'PN', 'NI'],
          },
          'combination_5': {
            '2.1': [],
            '2.2': ['Y', 'PY', 'NI'],
            '2.3': ['NA', 'Y', 'PY'],
            '2.4': ['Y', 'PY', 'NI'],
            '2.5': [],
            '2.6': ['N', 'PN', 'NI'],
          },
          'combination_6': {
            '2.1': [],
            '2.2': ['Y', 'PY', 'NI'],
            '2.3': ['NA', 'Y', 'PY'],
            '2.4': [],
            '2.5': ['Y', 'PY', 'NI'],
            '2.6': ['N', 'PN', 'NI'],
          },
          'combination_7': {
            '2.1': ['Y', 'PY', 'NI'],
            '2.2': [],
            '2.3': ['N', 'PN', 'NI'],
            '2.4': [],
            '2.5': [],
            '2.6': ['N', 'PN', 'NI'],
          },
          'combination_8': {
            '2.1': [],
            '2.2': ['Y', 'PY', 'NI'],
            '2.3': ['N', 'PN', 'NI'],
            '2.4': [],
            '2.5': [],
            '2.6': ['N', 'PN', 'NI'],
          },
        }
      }

      const answers = {
        '2.1': answerElements[0].value,
        '2.2': answerElements[1].value,
        '2.3': answerElements[2].value,
        '2.4': answerElements[3].value,
        '2.5': answerElements[4].value,
        '2.6': answerElements[5].value,
      };

      const result_div_properties = algorithm_result(domain2_alg, answers);

      resultDiv.textContent = result_div_properties['text'];
      resultDiv.style.backgroundColor = result_div_properties['color'];
      resultDiv.style.color = result_div_properties['font_color'];
    }

    function setupAnswer2ListenersPP() {
      ['non-adherence', 'implementation-failures', 'non-protocol', 'answer_2_1_pp', 'answer_2_2_pp', 'answer_2_3_pp', 'answer_2_4_pp', 'answer_2_5_pp', 'answer_2_6_pp'].forEach(id => {
        const el = document.getElementById(id);
        if (el && !el.dataset.listenerAttached) {
          el.addEventListener('change', updateDomain2PPAlgResult);

          if (id === 'non-protocol' || id === 'answer_2_1_pp' || id === 'answer_2_2_pp') {
            el.addEventListener('change', condEnable2_3_PP);
          }

          if (id === 'implementation-failures') {
            el.addEventListener('change', condEnable2_4_PP);
          }

          if (id === 'non-adherence') {
            el.addEventListener('change', condEnable2_5_PP);
          }

          if (id === 'answer_2_3_pp' || id === 'answer_2_4_pp' || id === 'answer_2_5_pp') {
            el.addEventListener('change', condEnable2_6_PP);
          }

          el.dataset.listenerAttached = 'true';
        }
      });

      condEnable2_3_PP();
      condEnable2_4_PP();
      condEnable2_5_PP();
      condEnable2_6_PP();
    }

    function condEnable3_2() {
      const q1 = document.getElementById("answer_3_1");
      const answer1 = q1.value;
      const q2 = document.getElementById("answer_3_2");
      const opNa = document.getElementById("3.2_NA");
      const q2Comment = document.getElementById('3.2_comment');
      const q2Link = document.getElementById('Q_3_2_instructions');

      const answers3_1 = ['N', 'PN', 'NI', ''];

      if (answers3_1.includes(answer1)) {
        q2.disabled = false;
        opNa.style.display = 'none';
        q2Comment.disabled = false;
        q2Link.classList.remove("disabled");
        if (q2.value === "NA") {
          q2.value = "";
        }
      } else {
        q2.disabled = true;
        opNa.style.display = 'block';
        q2.value = "NA";
        q2Comment.value = '';
        q2Comment.disabled = true;
        q2Link.classList.add("disabled");
      }

      condEnable3_3();
      updateDomain3AlgResult();
    }

    function condEnable3_3() {
      const q2 = document.getElementById("answer_3_2");
      const answer2 = q2.value;
      const q3 = document.getElementById("answer_3_3");
      const opNa = document.getElementById("3.3_NA");
      const q3Comment = document.getElementById('3.3_and_3.4_comment');
      const q3Link = document.getElementById('Q_3_3_instructions');

      const answers3_2 = ['N', 'PN', ''];

      if (answers3_2.includes(answer2)) {
        q3.disabled = false;
        opNa.style.display = 'none';
        q3Comment.disabled = false;
        q3Link.classList.remove("disabled");
        if (q3.value === "NA") {
          q3.value = "";
        }
      } else {
        q3.disabled = true;
        opNa.style.display = 'block';
        q3.value = "NA";
        q3Comment.value = '';
        q3Comment.disabled = true;
        q3Link.classList.add("disabled");
      }

      condEnable3_4();
      updateDomain3AlgResult();
    }

    function condEnable3_4() {
      const q3 = document.getElementById("answer_3_3");
      const answer3 = q3.value;
      const q4 = document.getElementById("answer_3_4");
      const opNa = document.getElementById("3.4_NA");
      const q4Link = document.getElementById('Q_3_4_instructions');

      const answers3_3 = ['Y', 'PY', 'NI', ''];

      if (answers3_3.includes(answer3)) {
        q4.disabled = false;
        opNa.style.display = 'none';
        q4Link.classList.remove("disabled");
        if (q4.value === "NA") {
          q4.value = "";
        }
      } else {
        q4.disabled = true;
        opNa.style.display = 'block';
        q4.value = "NA";
        q4Link.classList.add("disabled");
      }

      updateDomain3AlgResult();
    }

    function updateDomain3AlgResult() {

      const resultDiv = document.getElementById('alg-result-domain-3');

      const answerElements = [
        document.getElementById('answer_3_1'),
        document.getElementById('answer_3_2'),
        document.getElementById('answer_3_3'),
        document.getElementById('answer_3_4'),
      ];

      const hasEmptyRequired = answerElements.some(el => {
        return !el.disabled && el.value === "";
      });

      if (hasEmptyRequired || !resultDiv) {
        resultDiv.textContent = 'Algorithm';
        resultDiv.style.backgroundColor = '#f0f0f0';
        resultDiv.style.color = '#666';
        return;
      }


      const domain3_alg = {
        'low': {
          'combination_1': {
            '3.1': ['Y', 'PY'],
            '3.2': [],
            '3.3': [],
            '3.4': [],
          },
          'combination_2': {
            '3.1': ['N', 'PN', 'NI'],
            '3.2': ['Y', 'PY'],
            '3.3': [],
            '3.4': [],
          },
          'combination_3': {
            '3.1': ['N', 'PN', 'NI'],
            '3.2': ['N', 'PN'],
            '3.3': ['N', 'PN'],
            '3.4': [],
          },
        },
        'some_concerns': {
          'combination_1': {
            '3.1': ['N', 'PN', 'NI'],
            '3.2': ['N', 'PN'],
            '3.3': ['Y', 'PY', 'NI'],
            '3.4': ['N', 'PN'],
          },
        },
        'high': {
          'combination_1': {
            '3.1': ['N', 'PN', 'NI'],
            '3.2': ['N', 'PN'],
            '3.3': ['Y', 'PY', 'NI'],
            '3.4': ['Y', 'PY', 'NI'],
          },
        }
      }

      const answers = {
        '3.1': answerElements[0].value,
        '3.2': answerElements[1].value,
        '3.3': answerElements[2].value,
        '3.4': answerElements[3].value,
      };

      const result_div_properties = algorithm_result(domain3_alg, answers);

      resultDiv.textContent = result_div_properties['text'];
      resultDiv.style.backgroundColor = result_div_properties['color'];
      resultDiv.style.color = result_div_properties['font_color'];
    }

    function setupAnswer3Listeners() {
      ['answer_3_1', 'answer_3_2', 'answer_3_3', 'answer_3_4'].forEach(id => {
        const el = document.getElementById(id);
        if (el && !el.dataset.listenerAttached) {
          el.addEventListener('change', updateDomain3AlgResult);

          if (id === 'answer_3_1') {
            el.addEventListener('change', condEnable3_2);
          }

          if (id === 'answer_3_2') {
            el.addEventListener('change', condEnable3_3);
          }

          if (id === 'answer_3_3') {
            el.addEventListener('change', condEnable3_4);
          }

          el.dataset.listenerAttached = 'true';
        }
      });

      condEnable3_2();
      condEnable3_3();
      condEnable3_4();
    }

    function condEnable4_3() {
      const q1 = document.getElementById("answer_4_1");
      const answer1 = q1.value;
      const q2 = document.getElementById("answer_4_2");
      const answer2 = q2.value;
      const q3 = document.getElementById("answer_4_3");
      const opNa = document.getElementById("4.3_NA");
      const q3Comment = document.getElementById('4.3_comment');
      const q3Link = document.getElementById('Q_4_3_instructions');

      const answers1_2 = ['N', 'PN', 'NI', ''];

      if (answers1_2.includes(answer1) && answers1_2.includes(answer2)) {
        q3.disabled = false;
        opNa.style.display = 'none';
        q3Comment.disabled = false;
        q3Link.classList.remove("disabled");
        if (q3.value === "NA") {
          q3.value = "";
        }
      } else {
        q3.disabled = true;
        opNa.style.display = 'block';
        q3.value = "NA";
        q3Comment.value = '';
        q3Comment.disabled = true;
        q3Link.classList.add("disabled");
      }

      condEnable4_4();
      updateDomain4AlgResult();
    }

    function condEnable4_4() {
      const q3 = document.getElementById("answer_4_3");
      const answer3 = q3.value;
      const q4 = document.getElementById("answer_4_4");
      const opNa = document.getElementById("4.4_NA");
      const q4Comment = document.getElementById('4.4_and_4.5_comment');
      const q4Link = document.getElementById('Q_4_4_instructions');

      const answers3 = ['Y', 'PY', 'NI', ''];

      if (answers3.includes(answer3)) {
        q4.disabled = false;
        opNa.style.display = 'none';
        q4Comment.disabled = false;
        q4Link.classList.remove("disabled");
        if (q4.value === "NA") {
          q4.value = "";
        }
      } else {
        q4.disabled = true;
        opNa.style.display = 'block';
        q4.value = "NA";
        q4Comment.value = '';
        q4Comment.disabled = true;
        q4Link.classList.add("disabled");
      }

      condEnable4_5();
      updateDomain4AlgResult();
    }

    function condEnable4_5() {
      const q4 = document.getElementById("answer_4_4");
      const answer4 = q4.value;
      const q5 = document.getElementById("answer_4_5");
      const opNa = document.getElementById("4.5_NA");
      const q5Link = document.getElementById('Q_4_5_instructions');

      const answers4 = ['Y', 'PY', 'NI', ''];

      if (answers4.includes(answer4)) {
        q5.disabled = false;
        opNa.style.display = 'none';
        q5Link.classList.remove("disabled");
        if (q5.value === "NA") {
          q5.value = "";
        }
      } else {
        q5.disabled = true;
        opNa.style.display = 'block';
        q5.value = "NA";
        q5Link.classList.add("disabled");
      }

      updateDomain4AlgResult();
    }

    function updateDomain4AlgResult() {

      const resultDiv = document.getElementById('alg-result-domain-4');

      const answerElements = [
        document.getElementById('answer_4_1'),
        document.getElementById('answer_4_2'),
        document.getElementById('answer_4_3'),
        document.getElementById('answer_4_4'),
        document.getElementById('answer_4_5'),
      ];

      const hasEmptyRequired = answerElements.some(el => {
        return !el.disabled && el.value === "";
      });

      if (hasEmptyRequired || !resultDiv) {
        resultDiv.textContent = 'Algorithm';
        resultDiv.style.backgroundColor = '#f0f0f0';
        resultDiv.style.color = '#666';
        return;
      }


      const domain4_alg = {
        'low': {
          'combination_1': {
            '4.1': ['N', 'PN', 'NI'],
            '4.2': ['N', 'PN'],
            '4.3': ['N', 'PN'],
            '4.4': [],
            '4.5': [],
          },
          'combination_2': {
            '4.1': ['N', 'PN', 'NI'],
            '4.2': ['N', 'PN'],
            '4.3': ['Y', 'PY', 'NI'],
            '4.4': ['N', 'PN'],
            '4.5': [],
          },
        },
        'some_concerns': {
          'combination_1': {
            '4.1': ['N', 'PN', 'NI'],
            '4.2': ['N', 'PN'],
            '4.3': ['Y', 'PY', 'NI'],
            '4.4': ['Y', 'PY', 'NI'],
            '4.5': ['N', 'PN'],
          },
          'combination_2': {
            '4.1': ['N', 'PN', 'NI'],
            '4.2': ['NI'],
            '4.3': ['N', 'PN'],
            '4.4': [],
            '4.5': [],
          },
          'combination_3': {
            '4.1': ['N', 'PN', 'NI'],
            '4.2': ['NI'],
            '4.3': ['Y', 'PY', 'NI'],
            '4.4': ['N', 'PN'],
            '4.5': [],
          },
          'combination_4': {
            '4.1': ['N', 'PN', 'NI'],
            '4.2': ['NI'],
            '4.3': ['Y', 'PY', 'NI'],
            '4.4': ['Y', 'PY', 'NI'],
            '4.5': ['N', 'PN'],
          },
        },
        'high': {
          'combination_1': {
            '4.1': ['Y', 'PY'],
            '4.2': [],
            '4.3': [],
            '4.4': [],
            '4.5': [],
          },
          'combination_2': {
            '4.1': ['N', 'PN', 'NI'],
            '4.2': ['Y', 'PY'],
            '4.3': [],
            '4.4': [],
            '4.5': [],
          },
          'combination_3': {
            '4.1': ['N', 'PN', 'NI'],
            '4.2': ['NI'],
            '4.3': ['Y', 'PY', 'NI'],
            '4.4': ['Y', 'PY', 'NI'],
            '4.5': ['Y', 'PY', 'NI'],
          },
          'combination_4': {
            '4.1': ['N', 'PN', 'NI'],
            '4.2': ['N', 'PN'],
            '4.3': ['Y', 'PY', 'NI'],
            '4.4': ['Y', 'PY', 'NI'],
            '4.5': ['Y', 'PY', 'NI'],
          },
        }
      }

      const answers = {
        '4.1': answerElements[0].value,
        '4.2': answerElements[1].value,
        '4.3': answerElements[2].value,
        '4.4': answerElements[3].value,
        '4.5': answerElements[4].value,
      };

      const result_div_properties = algorithm_result(domain4_alg, answers);

      resultDiv.textContent = result_div_properties['text'];
      resultDiv.style.backgroundColor = result_div_properties['color'];
      resultDiv.style.color = result_div_properties['font_color'];
    }

    function setupAnswer4Listeners() {
      ['answer_4_1', 'answer_4_2', 'answer_4_3', 'answer_4_4', 'answer_4_5'].forEach(id => {
        const el = document.getElementById(id);
        if (el && !el.dataset.listenerAttached) {
          el.addEventListener('change', updateDomain4AlgResult);

          if (id === 'answer_4_1' || id === 'answer_4_2') {
            el.addEventListener('change', condEnable4_3);
          }

          if (id === 'answer_4_3') {
            el.addEventListener('change', condEnable4_4);
          }

          if (id === 'answer_4_4') {
            el.addEventListener('change', condEnable4_5);
          }

          el.dataset.listenerAttached = 'true';
        }
      });

      condEnable4_3();
      condEnable4_4();
      condEnable4_5();
    }

    function updateDomain5AlgResult() {
      const resultDiv = document.getElementById('alg-result-domain-5');

      const answerElements = [
        document.getElementById('answer_5_1'),
        document.getElementById('answer_5_2'),
        document.getElementById('answer_5_3'),
      ];

      const hasEmptyRequired = answerElements.some(el => {
        return !el.disabled && el.value === "";
      });

      if (hasEmptyRequired || !resultDiv) {
        resultDiv.textContent = 'Algorithm';
        resultDiv.style.backgroundColor = '#f0f0f0';
        resultDiv.style.color = '#666';
        return;
      }

      const domain5_alg = {
        'low': {
          'combination_1': {
            '5.1': ['Y', 'PY'],
            '5.2': ['N', 'PN'],
            '5.3': ['N', 'PN'],
          },
        },
        'some_concerns': {
          'combination_1': {
            '5.1': ['N', 'PN', 'NI'],
            '5.2': ['N', 'PN'],
            '5.3': ['N', 'PN'],
          },
          'combination_2': {
            '5.1': [],
            '5.2': ['NI'],
            '5.3': ['N', 'PN', 'NI'],
          },
          'combination_3': {
            '5.1': [],
            '5.2': ['N', 'PN', 'NI'],
            '5.3': ['NI'],
          },
        },
        'high': {
          'combination_1': {
            '5.1': [],
            '5.2': ['Y', 'PY'],
            '5.3': [],
          },
          'combination_2': {
            '5.1': [],
            '5.2': [],
            '5.3': ['Y', 'PY'],
          },
        },
      }

      const answers = {
        '5.1': answerElements[0].value,
        '5.2': answerElements[1].value,
        '5.3': answerElements[2].value,
      };

      const result_div_properties = algorithm_result(domain5_alg, answers);

      resultDiv.textContent = result_div_properties['text'];
      resultDiv.style.backgroundColor = result_div_properties['color'];
      resultDiv.style.color = result_div_properties['font_color'];
    }

    function setupAnswer5Listeners() {
      ['answer_5_1', 'answer_5_2', 'answer_5_3'].forEach(id => {
        const el = document.getElementById(id);
        if (el && !el.dataset.listenerAttached) {
          el.addEventListener('change', updateDomain5AlgResult);
          el.dataset.listenerAttached = 'true';
        }
      });
    }

    function changeSelectsBackgroundColor (idSelectConsensus, idSelectAssessor2, clear) {
      selectConsensus = document.getElementById(idSelectConsensus);
      selectAssessor2 = document.getElementById(idSelectAssessor2);

      var consensusResponse = selectConsensus?.selectedOptions[0]?.text.trim();
      var assessor2Response = selectAssessor2?.selectedOptions[0]?.text.trim();

      if (!clear) {
        if (consensusResponse != assessor2Response) {
          selectConsensus.style.outline = '1px solid #ff0000';
          selectAssessor2.style.outline = '1px solid #ff0000';
        } else {
          selectConsensus.style.outline = '1px solid #f0f0f0';
          selectAssessor2.style.outline = '1px solid #f0f0f0';
        }
      } else {
        selectConsensus.style.outline = '1px solid #f0f0f0';
        selectAssessor2.style.outline = '1px solid #f0f0f0';
      }
    }

    function saveForm() {
      const formData = {};

      formData['a'] = document.getElementById('datetime')?.value;
      
      formData['b'] = document.getElementById('assessment-id')?.value;
      id = {};
      planData.forEach(function (row) {
        if (row['Unique ID'] === formData['b']) {
          id = row;
        }
      });

      formData['c'] = document.getElementById('assessor')?.value;
      formData['d'] = document.getElementById('study-id')?.value;
      formData['e'] = document.getElementById('ref-label')?.value;
      formData['f'] = document.getElementById('experimental')?.value;
      formData['g'] = document.getElementById('comparator')?.value;
      formData['h'] = document.getElementById('outcome')?.value;
      formData['i'] = document.getElementById('numerical-result')?.value;

      var aim = document.getElementById('assessment-aim')?.selectedOptions[0]?.text.trim();
      if (aim === 'Select...') {
        formData['j'] = '';
        formData['k'] = '';
      } else {
        formData['j'] = aim;
        if (aim === "assignment to intervention (the 'intention-to-treat' effect)") {
          formData['k'] = 'Not applicable';
        } else {
          
          const protocolIssues = [];
          document.querySelectorAll('#conditional-field input[name="protocol-issues"]:checked').forEach(checkbox => {
            const label = document.querySelector(`label[for="${checkbox.id}"]`);
            if (label) {
              protocolIssues.push(label.textContent.trim());
            }
          });
          formData['k'] = protocolIssues.join("; ");
        }
      }

      weight = document.getElementById('weight-analysis')?.value;
      if (weight === '') {
        formData['l'] = '1'
      } else {
        formData['l'] = weight;
      }

      
      const sources = [];
      document.querySelectorAll('input[name="sources"]:checked').forEach(checkbox => {
        const label = document.querySelector(`label[for="${checkbox.id}"]`);
        if (label) {
          sources.push(label.textContent.trim());
        }
      });
      formData['m'] = sources.join("; ");

      
      formData['n'] = document.getElementById('answer_1_1')?.value;
      formData['o'] = document.getElementById('answer_1_2')?.value;
      formData['p'] = document.getElementById('comments_1_1_and_1_2')?.value;
      formData['q'] = document.getElementById('answer_1_3')?.value;
      formData['r'] = document.getElementById('comments_1_3')?.value;
      formData['s'] = getAlgAssessmentResult('domain-1');
      formData['t'] = document.getElementById('assessor-jud-domain-1')?.value;
      formData['u'] = document.getElementById('assessor_jud_domain_1')?.value;
      formData['v'] = id['1.0 Optional Question'];
      formData['w'] = id['1.0 Note for optional question'];

      
      const activeDomain2TabId = document.getElementById('assessment-aim').value === 'per-protocol' ? 'PP' :
        document.getElementById('assessment-aim').value === 'intention-to-treat' ? 'ITT' : '';;

      if (activeDomain2TabId === 'PP') {
        formData['x'] = document.getElementById('answer_2_1_pp')?.value;
        formData['y'] = document.getElementById('answer_2_2_pp')?.value;
        formData['z'] = document.getElementById('2.1_and_2.2_comment_PP')?.value;
        formData['aa'] = document.getElementById('answer_2_3_pp')?.value;
        formData['ab'] = document.getElementById('2.3_comment_PP')?.value;
        formData['ac'] = document.getElementById('answer_2_4_pp')?.value;
        formData['ad'] = document.getElementById('2.4_comment_PP')?.value;
        formData['ae'] = document.getElementById('answer_2_5_pp')?.value;
        formData['af'] = document.getElementById('2.5_comment_PP')?.value;
        formData['ag'] = document.getElementById('answer_2_6_pp')?.value;
        formData['ah'] = document.getElementById('2.6_comment_PP')?.value;
        formData['ai'] = '';
        formData['aj'] = '';
        formData['ak'] = getAlgAssessmentResult('domain-2-pp');
        formData['al'] = document.getElementById('assessor-jud-domain-2-PP')?.value;
        formData['am'] = document.getElementById('assessor_jud_domain_2_PP')?.value;
        formData['an'] = id['2.0 Optional Question'];
        formData['ao'] = id['2.0 Note for optional question'];

      } else if (activeDomain2TabId === 'ITT') {
        formData['x'] = document.getElementById('answer_2_1_itt')?.value;
        formData['y'] = document.getElementById('answer_2_2_itt')?.value;
        formData['z'] = document.getElementById('2.1_and_2.2_comment_ITT')?.value;
        formData['aa'] = document.getElementById('answer_2_3_itt')?.value;
        formData['ab'] = document.getElementById('2.3_comment_ITT')?.value;
        formData['ac'] = document.getElementById('answer_2_4_itt')?.value;
        formData['ad'] = document.getElementById('2.4_comment_ITT')?.value;
        formData['ae'] = document.getElementById('answer_2_5_itt')?.value;
        formData['af'] = document.getElementById('2.5_comment_ITT')?.value;
        formData['ag'] = document.getElementById('answer_2_6_itt')?.value;
        formData['ah'] = document.getElementById('2.6_comment_ITT')?.value;
        formData['ai'] = document.getElementById('answer_2_7_itt')?.value;
        formData['aj'] = document.getElementById('2.7_comment_ITT')?.value;
        formData['ak'] = getAlgAssessmentResult('domain-2-itt');
        formData['al'] = document.getElementById('assessor-jud-domain-2-ITT')?.value;
        formData['am'] = document.getElementById('assessor_jud_domain_2_ITT')?.value;
        formData['an'] = id['2.0 Optional Question'];
        formData['ao'] = id['2.0 Note for optional question'];
        
      } else {
        formData['x'] = '';
        formData['y'] = '';
        formData['z'] = '';
        formData['aa'] = '';
        formData['ab'] = '';
        formData['ac'] = '';
        formData['ad'] = '';
        formData['ae'] = '';
        formData['af'] = '';
        formData['ag'] = '';
        formData['ah'] = '';
        formData['ai'] = '';
        formData['aj'] = '';
        formData['ak'] = '';
        formData['al'] = '';
        formData['am'] = '';
        formData['an'] = '';
        formData['ao'] = '';
      }

      
      formData['ap'] = document.getElementById('answer_3_1')?.value;
      formData['aq'] = document.getElementById('3.1_comment')?.value;
      formData['ar'] = document.getElementById('answer_3_2')?.value;
      formData['as'] = document.getElementById('3.2_comment')?.value;
      formData['at'] = document.getElementById('answer_3_3')?.value;
      formData['au'] = document.getElementById('3.3_and_3.4_comment')?.value;
      formData['av'] = document.getElementById('answer_3_4')?.value;
      formData['aw'] = getAlgAssessmentResult('domain-3');
      formData['ax'] = document.getElementById('assessor-jud-domain-3')?.value;
      formData['ay'] = document.getElementById('assessor_jud_domain_3')?.value;
      formData['az'] = id['3.0 Optional Question'];
      formData['ba'] = id['3.0 Note for optional question'];

      
      formData['bb'] = document.getElementById('answer_4_1')?.value;
      formData['bc'] = document.getElementById('4.1_comment')?.value;
      formData['bd'] = document.getElementById('answer_4_2')?.value;
      formData['be'] = document.getElementById('4.2_comment')?.value;
      formData['bf'] = document.getElementById('answer_4_3')?.value;
      formData['bg'] = document.getElementById('4.3_comment')?.value;
      formData['bh'] = document.getElementById('answer_4_4')?.value;
      formData['bi'] = document.getElementById('4.4_and_4.5_comment')?.value;
      formData['bj'] = document.getElementById('answer_4_5')?.value;
      formData['bk'] = getAlgAssessmentResult('domain-4');
      formData['bl'] = document.getElementById('assessor-jud-domain-4')?.value;
      formData['bm'] = document.getElementById('assessor_jud_domain_4')?.value;
      formData['bn'] = id['4.0 Optional Question'];
      formData['bo'] = id['4.0 Note for optional question'];

      
      formData['bp'] = document.getElementById('answer_5_1')?.value;
      formData['bq'] = document.getElementById('5.1_comment')?.value;
      formData['br'] = document.getElementById('answer_5_2')?.value;
      formData['bs'] = document.getElementById('5.2_comment')?.value;
      formData['bt'] = document.getElementById('answer_5_3')?.value;
      formData['bu'] = document.getElementById('5.3_comment')?.value;
      formData['bv'] = getAlgAssessmentResult('domain-5');
      formData['bw'] = document.getElementById('assessor-jud-domain-5')?.value;
      formData['bx'] = document.getElementById('assessor_jud_domain_5')?.value;
      formData['by'] = id['5.0 Optional Question'];
      formData['bz'] = id['5.0 Note for optional question'];

      
      formData['ca'] = getAlgAssessmentResult('overall-bias');
      formData['cb'] = document.getElementById('overall-assessor-jud-select')?.value;
      formData['cc'] = document.getElementById('overall_assessor_jud_comment')?.value;
      formData['cd'] = id['6.0 Optional Question'];
      formData['ce'] = id['6.0 Note for optional question'];

      const dropdown = document.getElementById("header-assessment-id");
      const value = dropdown.value;
      if (!(value === '')) {
        saving();
        google.script.run
          .withSuccessHandler(res => {
            if (res) {
              google.script.run.withSuccessHandler(d => {
                populateDropdown(d, planDataCheck);
                assessmentIDshowValue(formData['b']);
                saveSuccess();
              }).getRecordIds('Results');
            } else {
              saveError();
            }
          })
          .withFailureHandler(saveError)
          .atualizarLinhaPorValor(formData, value);
      } else {
        saving();
        google.script.run
          .withSuccessHandler(() => {
            google.script.run.withSuccessHandler(d => {
              populateDropdown(d, planDataCheck);
              assessmentIDshowValue(formData['b']);
              saveSuccess();
            })
            .withFailureHandler(saveError)
            .getRecordIds('Results');
          })
          .withFailureHandler(saveError)
          .saveDataToSheet(formData);
      }
    }

    function saveSuccess() {
      document.getElementById('loading').close();
      document.getElementById('saved').showModal();
      document.getElementById('dialog_saved').addEventListener('click', () => {
        document.getElementById('saved').close();
      });
    }

    function saveError() {
      document.getElementById('loading').close();
      document.getElementById('not-saved').showModal();
      document.getElementById('dialog_not_saved').addEventListener('click', () => {
        document.getElementById('dialog_not_saved').close();
      });
    }

    function saving() {
      document.getElementById('loading').showModal();
    }

    var planData = []

    
    const emptyRow = {
      "Time": "",
      "Unique ID": "",
      "Assessor": "",
      "Study ID": "",
      "Reference": "",
      "Experimental": "",
      "Comparator": "",
      "Outcome": "",
      "Results": "",
      "Aim": "",
      "Effect of adhering to intervention?": "",
      "Weight": "",
      "Sources": "",
      "1.1": "",
      "1.2": "",
      "Note for 1.1&1.2": "",
      "Note for 1.3": "",
      "1.0 Algorithm result": "",
      "1.0 General note": "",
      "1.0 Optional Question": "",
      "1.0 Note for optional question": "",
      "2.1": "",
      "2.2": "",
      "Note for 2.1&2.2": "",
      "2.3": "",
      "Note for 2.3": "",
      "2.4": "",
      "Note for 2.4": "",
      "Note for 2.5": "",
      "2.6": "",
      "Note for 2.6": "",
      "2.7": "",
      "Note for 2.7": "",
      "2.0 Algorithm result": "",
      "2.0 Assessor's Judgement": "",
      "2.0 General Notes": "",
      "2.0 Optional Question": "",
      "2.0 Note for optional question": "",
      "3.1": "",
      "Note for 3.1": "",
      "3.2": "",
      "Note for 3.2": "",
      "Note for 3.3&3.4": "",
      "3.4": "",
      "3.0 Algorithm result": "",
      "3.0 Assessor's judgement": "",
      "3.0 Gerenal notes": "",
      "3.0 Optional Question": "",
      "3.0 Note for optional question": "",
      "4.1": "",
      "Note for 4.1": "",
      "4.2": "",
      "Note for 4.2": "",
      "4.3": "",
      "Note for 4.3": "",
      "4.4": "",
      "Note for 4.4&4.5": "",
      "4.5": "",
      "4.0 Algorithm result": "",
      "4.0 Assessor's Judgement": "",
      "4.0 General note": "",
      "4.0 Optional Question": "",
      "4.0 Note for optional question": "",
      "5.1": "",
      "Note for 5.1": "",
      "5.2": "",
      "Note for 5.2": "",
      "5.3": "",
      "Note for 5.3": "",
      "5.0 Algorithm result": "",
      "5.0 Assessor's Judgement": "",
      "5.0 General note": "",
      "5.0 Optional Question": "",
      "5.0 Note for optional question": "",
      "Algorithm's overall Judgement": "",
      "Assessor's overall Judgement": "",
      "6.0 General Note": "",
      "6.0 Optional Question": "",
      "6.0 Note for optional question": "",
    };

    
    function populateDropdown(resultsData, checkData) {

      var select = document.getElementById('header-assessment-id');
      select.innerHTML = '';

      if (resultsData && resultsData.length > 0) {

        planData = JSON.parse(resultsData);
        planDataCheck = checkData;

        const mapCheck = new Map((JSON.parse(checkData)).map(obj => [obj['Unique ID'], obj]));
        planDataCheckParsed = planData.map(row => {
          const match = mapCheck.get(row['Unique ID']);
          return match || emptyRow;
        });

        select.disabled = false;
        
        var defaultOption = document.createElement('option');
        defaultOption.value = "";
        defaultOption.text = "New:";
        select.appendChild(defaultOption);
        updateStatus('new');

        
        planData.forEach(function (o) {
          var option = document.createElement('option');
          option.value = o['Unique ID'];
          option.text = o['Unique ID'];
          select.appendChild(option);
        });

        select.classList.remove("header-field");
        select.classList.add("style-select");

      } else {
        select.disabled = true;
        var noDataOption = document.createElement('option');
        noDataOption.value = "";
        noDataOption.text = "New:";
        select.appendChild(noDataOption);
        updateStatus('new');
      }

    }

    function assessmentIDshowValue(value) {
      const dropdown = document.getElementById("header-assessment-id");

      
      if (dropdown) {
        
        for (let i = 0; i < dropdown.options.length; i++) {
          
          if (dropdown.options[i].value === value) {
            
            dropdown.value = value;
            
            break;
          }
        }

        
        dropdown.dispatchEvent(new Event('change'));
      }
    }

    function defineOverAllBiasForCheckDomains(assessorJudSelectID, overAllBiasIndicatorID) {
      const assessorJudSelect = document.getElementById(assessorJudSelectID);
      var answer = '';
  
      if (assessorJudSelect) {
       answer = assessorJudSelect.value;
      }
  
      const overallBiasIndicator = document.getElementById(overAllBiasIndicatorID);
  
      if (answer === 'Low') {
        overallBiasIndicator.textContent = "L";
        overallBiasIndicator.style.backgroundColor = "#00ff00";
        overallBiasIndicator.style.color = "black";
      } else if (answer === 'Some concerns') {
        overallBiasIndicator.textContent = "S";
        overallBiasIndicator.style.backgroundColor = "#ffff00";
        overallBiasIndicator.style.color = "black";
      } else if (answer === 'High') {
        overallBiasIndicator.textContent = "H";
        overallBiasIndicator.style.backgroundColor = "#ff0000";
        overallBiasIndicator.style.color = "black";
      } else {
        overallBiasIndicator.textContent = "";
        overallBiasIndicator.style.backgroundColor = "#F0F0F0";
        overallBiasIndicator.style.color = "#666";
      }
    }

    function onChangeAssessmentID() {
      
      const dropdown = document.getElementById("header-assessment-id");

      
      const value = dropdown.value;

      
      const text = dropdown.options[dropdown.selectedIndex].text;

      if (text.includes("New:")) {
        for (let i = 0; i < dropdown.options.length; i++) {
          const option = dropdown.options[i];
          if (option.textContent.startsWith('New:')) {
            option.textContent = 'New:';
            break;
          }
        }
        clearForm();
        updateStatus('new');
      } else {
        for (let i = 0; i < dropdown.options.length; i++) {
          const option = dropdown.options[i];
          if (option.textContent.startsWith('New:')) {
            option.textContent = 'New:';
            break;
          }
        }
        clearForm();
        planData.forEach(function (row, index) {
          if (row['Unique ID'] === text) {
            correspondingCheck = planDataCheckParsed[index];
            document.getElementById('assessment-id').value = row['Unique ID'];
            document.getElementById('assessor').value = row['Assessor'];
            document.getElementById('assessor').dispatchEvent(new Event('input', { bubbles: true }));
            document.getElementById('study-id').value = row['Study ID'];
            document.getElementById('study-id').dispatchEvent(new Event('input', { bubbles: true }));
            document.getElementById('ref-label').value = row['Reference'];
            document.getElementById('experimental').value = row['Experimental'];
            document.getElementById('comparator').value = row['Comparator'];
            document.getElementById('outcome').value = row['Outcome'];
            document.getElementById('numerical-result').value = row['Results'];

            aim = document.getElementById('assessment-aim');
            aimPlan = row['Aim'];
            if (aimPlan) {
              for (let option of aim.options) {
                if (option.text === aimPlan) {
                  aim.value = option.value;
                  aim.dispatchEvent(new Event('change'));
                  break;
                }
              }
              if (aimPlan === "adhering to intervention (the 'per-protocol' effect)") {
                effects = row['Effect of adhering to intervention?'].split(';').map(source => source.trim());
                for (let effect of effects) {
                  const checkboxes = document.querySelectorAll('#conditional-field .checkbox-item input[type="checkbox"]');
                  for (let checkbox of checkboxes) {
                    const label = document.querySelector(`label[for="${checkbox.id}"]`);

                    if (label && label.textContent.trim().toLowerCase() === effect.trim().toLowerCase()) {
                      checkbox.checked = true;
                    }
                  }
                }
              }
            }


            document.getElementById('assessment-aim').dispatchEvent(new Event('change'));

            document.getElementById('weight-analysis').value = row['Weight'];

            sources = row['Sources'];
            itens = sources.split(';').map(source => source.trim());
            if (itens.length > 0) {

              const checkboxes = document.querySelectorAll('.checkbox-group input[type="checkbox"]');
              checkboxes.forEach(checkbox => {
                
                const label = document.querySelector(`label[for="${checkbox.id}"]`);

                
                if (label) {
                  const labelText = label.textContent.trim();

                  
                  if (itens.includes(labelText)) {
                    checkbox.checked = true;
                  }
                }
              });
            }

            
            q1_1 = document.getElementById('answer_1_1');
            plan1_1 = row['1.1'];
            if (plan1_1) {
              for (let option of q1_1.options) {
                if (option.text === plan1_1) {
                  q1_1.value = option.value;
                  q1_1.dispatchEvent(new Event('change'));
                  break;
                }
              }
            }
            q1_1 = document.getElementById('answer_1_1_check');
            plan1_1 = correspondingCheck['1.1'];
            if (plan1_1) {
              for (let option of q1_1.options) {
                if (option.text === plan1_1) {
                  q1_1.value = option.value;
                  
                  break;
                }
              }
            }

            q1_2 = document.getElementById('answer_1_2');
            plan1_2 = row['1.2'];
            if (plan1_2) {
              for (let option of q1_2.options) {
                if (option.text === plan1_2) {
                  q1_2.value = option.value;
                  q1_2.dispatchEvent(new Event('change'));
                  break;
                }
              }
            }
            q1_2 = document.getElementById('answer_1_2_check');
            plan1_2 = correspondingCheck['1.2'];
            if (plan1_2) {
              for (let option of q1_2.options) {
                if (option.text === plan1_2) {
                  q1_2.value = option.value;
                  
                  break;
                }
              }
            }

            document.getElementById('comments_1_1_and_1_2').value = row['Note for 1.1&1.2'];
            document.getElementById('comments_1_1_and_1_2_check').value = correspondingCheck['Note for 1.1&1.2'];

            q1_3 = document.getElementById('answer_1_3');
            plan1_3 = row['1.3'];
            if (plan1_3) {
              for (let option of q1_3.options) {
                if (option.text === plan1_3) {
                  q1_3.value = option.value;
                  q1_3.dispatchEvent(new Event('change'));
                  break;
                }
              }
            }
            q1_3 = document.getElementById('answer_1_3_check');
            plan1_3 = correspondingCheck['1.3'];
            if (plan1_3) {
              for (let option of q1_3.options) {
                if (option.text === plan1_3) {
                  q1_3.value = option.value;
                  q1_3.dispatchEvent(new Event('change'));
                  break;
                }
              }
            }

            document.getElementById('comments_1_3').value = row['Note for 1.3'];
            document.getElementById('comments_1_3_check').value = correspondingCheck['Note for 1.3'];
            updateDomain1AlgResult();
            assessorJud = document.getElementById('assessor-jud-domain-1');
            assessorJudPlan = row["1.0 Assessor's Judgement"];
            if (assessorJudPlan) {
              for (let option of assessorJud) {
                if (option.text === assessorJudPlan) {
                  assessorJud.value = option.value;
                  assessorJud.dispatchEvent(new Event('change'));
                  break;
                }
              }
            }
            defineAssessorJudDomain1();
            assessorJud = document.getElementById('assessor-jud-domain-1_check');
            assessorJudPlan = correspondingCheck["1.0 Assessor's Judgement"];
            if (assessorJudPlan) {
              for (let option of assessorJud) {
                if (option.text === assessorJudPlan) {
                  assessorJud.value = option.value;
                  assessorJud.dispatchEvent(new Event('change'));
                  break;
                }
              }
            }
            defineOverAllBiasForCheckDomains('assessor-jud-domain-1_check', 'overall-bias-domain-1_check');

            document.getElementById('assessor_jud_domain_1').value = row['1.0 General note'];
            document.getElementById('assessor_jud_domain_1_check').value = correspondingCheck['1.0 General note'];
            
            changeSelectsBackgroundColor(idSelectConsensus='assessor-jud-domain-1', idSelectAssessor2='assessor-jud-domain-1_check', clear=false);

            
            if (aimPlan === "adhering to intervention (the 'per-protocol' effect)") {
              q2_1_pp = document.getElementById('answer_2_1_pp');
              plan2_1 = row['2.1'];
              if (plan2_1) {
                for (let option of q2_1_pp.options) {
                  if (option.text === plan2_1) {
                    q2_1_pp.value = option.value;
                    q2_1_pp.dispatchEvent(new Event('change'));
                    break;
                  }
                }
              }
              
              q2_1_pp = document.getElementById('answer_2_1_pp_check');
              plan2_1 = correspondingCheck['2.1'];
              if (plan2_1) {
                for (let option of q2_1_pp.options) {
                  if (option.text === plan2_1) {
                    q2_1_pp.value = option.value;
                    q2_1_pp.dispatchEvent(new Event('change'));
                    break;
                  }
                }
              }

              q2_2_pp = document.getElementById('answer_2_2_pp');
              plan2_2 = row['2.2'];
              if (plan2_2) {
                for (let option of q2_2_pp.options) {
                  if (option.text === plan2_2) {
                    q2_2_pp.value = option.value;
                    q2_2_pp.dispatchEvent(new Event('change'));
                    break;
                  }
                }
              }
              q2_2_pp = document.getElementById('answer_2_2_pp_check');
              plan2_2 = correspondingCheck['2.2'];
              if (plan2_2) {
                for (let option of q2_2_pp.options) {
                  if (option.text === plan2_2) {
                    q2_2_pp.value = option.value;
                    q2_2_pp.dispatchEvent(new Event('change'));
                    break;
                  }
                }
              }

              document.getElementById('2.1_and_2.2_comment_PP').value = row['Note for 2.1&2.2'];
              document.getElementById('2.1_and_2.2_comment_PP_check').value = correspondingCheck['Note for 2.1&2.2'];

              q2_3_pp = document.getElementById('answer_2_3_pp');
              plan2_3 = row['2.3'];
              if (plan2_3) {
                for (let option of q2_3_pp.options) {
                  if (option.text === plan2_3) {
                    q2_3_pp.value = option.value;
                    q2_3_pp.dispatchEvent(new Event('change'));
                    break;
                  }
                }
              }
              q2_3_pp = document.getElementById('answer_2_3_pp_check');
              plan2_3 = correspondingCheck['2.3'];
              if (plan2_3) {
                for (let option of q2_3_pp.options) {
                  if (option.text === plan2_3) {
                    q2_3_pp.value = option.value;
                    q2_3_pp.dispatchEvent(new Event('change'));
                    break;
                  }
                }
              }

              document.getElementById('2.3_comment_PP').value = row['Note for 2.3'];
              document.getElementById('2.3_comment_PP_check').value = correspondingCheck['Note for 2.3'];

              q2_4_pp = document.getElementById('answer_2_4_pp');
              plan2_4 = row['2.4'];
              if (plan2_4) {
                for (let option of q2_4_pp.options) {
                  if (option.text === plan2_4) {
                    q2_4_pp.value = option.value;
                    q2_4_pp.dispatchEvent(new Event('change'));
                    break;
                  }
                }
              }
              q2_4_pp = document.getElementById('answer_2_4_pp_check');
              plan2_4 = correspondingCheck['2.4'];
              if (plan2_4) {
                for (let option of q2_4_pp.options) {
                  if (option.text === plan2_4) {
                    q2_4_pp.value = option.value;
                    q2_4_pp.dispatchEvent(new Event('change'));
                    break;
                  }
                }
              }

              document.getElementById('2.4_comment_PP').value = row['Note for 2.4'];
              document.getElementById('2.4_comment_PP_check').value = correspondingCheck['Note for 2.4'];

              q2_5_pp = document.getElementById('answer_2_5_pp');
              plan2_5 = row['2.5'];
              if (plan2_5) {
                for (let option of q2_5_pp.options) {
                  if (option.text === plan2_5) {
                    q2_5_pp.value = option.value;
                    q2_5_pp.dispatchEvent(new Event('change'));
                    break;
                  }
                }
              }
              q2_5_pp = document.getElementById('answer_2_5_pp_check');
              plan2_5 = correspondingCheck['2.5'];
              if (plan2_5) {
                for (let option of q2_5_pp.options) {
                  if (option.text === plan2_5) {
                    q2_5_pp.value = option.value;
                    q2_5_pp.dispatchEvent(new Event('change'));
                    break;
                  }
                }
              }

              document.getElementById('2.5_comment_PP').value = row['Note for 2.5'];
              document.getElementById('2.5_comment_PP_check').value = correspondingCheck['Note for 2.5'];

              q2_6_pp = document.getElementById('answer_2_6_pp');
              plan2_6 = row['2.6'];
              if (plan2_6) {
                for (let option of q2_6_pp.options) {
                  if (option.text === plan2_6) {
                    q2_6_pp.value = option.value;
                    q2_6_pp.dispatchEvent(new Event('change'));
                    break;
                  }
                }
              }
              q2_6_pp = document.getElementById('answer_2_6_pp_check');
              plan2_6 = correspondingCheck['2.6'];
              if (plan2_6) {
                for (let option of q2_6_pp.options) {
                  if (option.text === plan2_6) {
                    q2_6_pp.value = option.value;
                    q2_6_pp.dispatchEvent(new Event('change'));
                    break;
                  }
                }
              }

              document.getElementById('2.6_comment_PP').value = row['Note for 2.6'];
              document.getElementById('2.6_comment_PP_check').value = correspondingCheck['Note for 2.6'];

              updateDomain2PPAlgResult();

              assessorJud = document.getElementById('assessor-jud-domain-2-PP');
              assessorJudPlan = row["2.0 Assessor's Judgement"];
              if (assessorJudPlan) {
                for (let option of assessorJud) {
                  if (option.text === assessorJudPlan) {
                    assessorJud.value = option.value;
                    assessorJud.dispatchEvent(new Event('change'));
                    break;
                  }
                }
              }
              defineAssessorJudDomain2PP();
              assessorJud = document.getElementById('assessor-jud-domain-2-PP_check');
              assessorJudPlan = correspondingCheck["2.0 Assessor's Judgement"];
              if (assessorJudPlan) {
                for (let option of assessorJud) {
                  if (option.text === assessorJudPlan) {
                    assessorJud.value = option.value;
                    assessorJud.dispatchEvent(new Event('change'));
                    break;
                  }
                }
              }
              defineOverAllBiasForCheckDomains('assessor-jud-domain-2-PP_check', 'overall-bias-domain-2_check');

              document.getElementById('assessor_jud_domain_2_PP').value = row['2.0 General Notes'];
              document.getElementById('assessor_jud_domain_2_PP_check').value = correspondingCheck['2.0 General Notes'];
              
              changeSelectsBackgroundColor(idSelectConsensus='assessor-jud-domain-2-PP', idSelectAssessor2='assessor-jud-domain-2-PP_check', clear=false);

              
            } else if (aimPlan === "assignment to intervention (the 'intention-to-treat' effect)") {
              q2_1_itt = document.getElementById('answer_2_1_itt');
              plan2_1_itt = row['2.1'];
              if (plan2_1_itt) {
                for (let option of q2_1_itt.options) {
                  if (option.text === plan2_1_itt) {
                    q2_1_itt.value = option.value;
                    q2_1_itt.dispatchEvent(new Event('change'));
                    break;
                  }
                }
              }
              q2_1_itt = document.getElementById('answer_2_1_itt_check');
              plan2_1_itt = correspondingCheck['2.1'];
              if (plan2_1_itt) {
                for (let option of q2_1_itt.options) {
                  if (option.text === plan2_1_itt) {
                    q2_1_itt.value = option.value;
                    q2_1_itt.dispatchEvent(new Event('change'));
                    break;
                  }
                }
              }

              q2_2_itt = document.getElementById('answer_2_2_itt');
              plan2_2_itt = row['2.2'];
              if (plan2_2_itt) {
                for (let option of q2_2_itt.options) {
                  if (option.text === plan2_2_itt) {
                    q2_2_itt.value = option.value;
                    q2_2_itt.dispatchEvent(new Event('change'));
                    break;
                  }
                }
              }
              q2_2_itt = document.getElementById('answer_2_2_itt_check');
              plan2_2_itt = correspondingCheck['2.2'];
              if (plan2_2_itt) {
                for (let option of q2_2_itt.options) {
                  if (option.text === plan2_2_itt) {
                    q2_2_itt.value = option.value;
                    q2_2_itt.dispatchEvent(new Event('change'));
                    break;
                  }
                }
              }

              document.getElementById('2.1_and_2.2_comment_ITT').value = row['Note for 2.1&2.2'];
              document.getElementById('2.1_and_2.2_comment_ITT_check').value = correspondingCheck['Note for 2.1&2.2'];

              q2_3_itt = document.getElementById('answer_2_3_itt');
              plan2_3_itt = row['2.3'];
              if (plan2_3_itt) {
                for (let option of q2_3_itt.options) {
                  if (option.text === plan2_3_itt) {
                    q2_3_itt.value = option.value;
                    q2_3_itt.dispatchEvent(new Event('change'));
                    break;
                  }
                }
              }
              q2_3_itt = document.getElementById('answer_2_3_itt_check');
              plan2_3_itt = correspondingCheck['2.3'];
              if (plan2_3_itt) {
                for (let option of q2_3_itt.options) {
                  if (option.text === plan2_3_itt) {
                    q2_3_itt.value = option.value;
                    q2_3_itt.dispatchEvent(new Event('change'));
                    break;
                  }
                }
              }

              document.getElementById('2.3_comment_ITT').value = row['Note for 2.3'];
              document.getElementById('2.3_comment_ITT_check').value = correspondingCheck['Note for 2.3'];

              q2_4_itt = document.getElementById('answer_2_4_itt');
              plan2_4_itt = row['2.4'];
              if (plan2_4_itt) {
                for (let option of q2_4_itt.options) {
                  if (option.text === plan2_4_itt) {
                    q2_4_itt.value = option.value;
                    q2_4_itt.dispatchEvent(new Event('change'));
                    break;
                  }
                }
              }
              q2_4_itt = document.getElementById('answer_2_4_itt_check');
              plan2_4_itt = correspondingCheck['2.4'];
              if (plan2_4_itt) {
                for (let option of q2_4_itt.options) {
                  if (option.text === plan2_4_itt) {
                    q2_4_itt.value = option.value;
                    q2_4_itt.dispatchEvent(new Event('change'));
                    break;
                  }
                }
              }

              document.getElementById('2.4_comment_ITT').value = row['Note for 2.4'];
              document.getElementById('2.4_comment_ITT_check').value = correspondingCheck['Note for 2.4'];

              q2_5_itt = document.getElementById('answer_2_5_itt');
              plan2_5_itt = row['2.5'];
              if (plan2_5_itt) {
                for (let option of q2_5_itt.options) {
                  if (option.text === plan2_5_itt) {
                    q2_5_itt.value = option.value;
                    q2_5_itt.dispatchEvent(new Event('change'));
                    break;
                  }
                }
              }
              q2_5_itt = document.getElementById('answer_2_5_itt_check');
              plan2_5_itt = correspondingCheck['2.5'];
              if (plan2_5_itt) {
                for (let option of q2_5_itt.options) {
                  if (option.text === plan2_5_itt) {
                    q2_5_itt.value = option.value;
                    q2_5_itt.dispatchEvent(new Event('change'));
                    break;
                  }
                }
              }

              document.getElementById('2.5_comment_ITT').value = row['Note for 2.5'];
              document.getElementById('2.5_comment_ITT_check').value = correspondingCheck['Note for 2.5'];

              q2_6_itt = document.getElementById('answer_2_6_itt');
              plan2_6_itt = row['2.6'];
              if (plan2_6_itt) {
                for (let option of q2_6_itt.options) {
                  if (option.text === plan2_6_itt) {
                    q2_6_itt.value = option.value;
                    q2_6_itt.dispatchEvent(new Event('change'));
                    break;
                  }
                }
              }
              q2_6_itt = document.getElementById('answer_2_6_itt_check');
              plan2_6_itt = correspondingCheck['2.6'];
              if (plan2_6_itt) {
                for (let option of q2_6_itt.options) {
                  if (option.text === plan2_6_itt) {
                    q2_6_itt.value = option.value;
                    q2_6_itt.dispatchEvent(new Event('change'));
                    break;
                  }
                }
              }

              document.getElementById('2.6_comment_ITT').value = row['Note for 2.6'];
              document.getElementById('2.6_comment_ITT_check').value = correspondingCheck['Note for 2.6'];

              q2_7_itt = document.getElementById('answer_2_7_itt');
              plan2_7_itt = row['2.7'];
              if (plan2_7_itt) {
                for (let option of q2_7_itt.options) {
                  if (option.text === plan2_7_itt) {
                    q2_7_itt.value = option.value;
                    q2_7_itt.dispatchEvent(new Event('change'));
                    break;
                  }
                }
              }
              q2_7_itt = document.getElementById('answer_2_7_itt_check');
              plan2_7_itt = correspondingCheck['2.7'];
              if (plan2_7_itt) {
                for (let option of q2_7_itt.options) {
                  if (option.text === plan2_7_itt) {
                    q2_7_itt.value = option.value;
                    q2_7_itt.dispatchEvent(new Event('change'));
                    break;
                  }
                }
              }

              document.getElementById('2.7_comment_ITT').value = row['Note for 2.7'];
              document.getElementById('2.7_comment_ITT_check').value = correspondingCheck['Note for 2.7'];

              updateDomain2ITTAlgResult();

              assessorJud = document.getElementById('assessor-jud-domain-2-ITT');
              assessorJudPlan = row["2.0 Assessor's Judgement"];
              if (assessorJudPlan) {
                for (let option of assessorJud) {
                  if (option.text === assessorJudPlan) {
                    assessorJud.value = option.value;
                    assessorJud.dispatchEvent(new Event('change'));
                    break;
                  }
                }
              }
              defineAssessorJudDomain2ITT();
              assessorJud = document.getElementById('assessor-jud-domain-2-ITT_check');
              assessorJudPlan = correspondingCheck["2.0 Assessor's Judgement"];
              if (assessorJudPlan) {
                for (let option of assessorJud) {
                  if (option.text === assessorJudPlan) {
                    assessorJud.value = option.value;
                    assessorJud.dispatchEvent(new Event('change'));
                    break;
                  }
                }
              }

              defineOverAllBiasForCheckDomains('assessor-jud-domain-2-ITT_check', 'overall-bias-domain-2_check');

              document.getElementById('assessor_jud_domain_2_ITT').value = row['2.0 General Notes'];
              document.getElementById('assessor_jud_domain_2_ITT_check').value = correspondingCheck['2.0 General Notes'];
              
              changeSelectsBackgroundColor(idSelectConsensus='assessor-jud-domain-2-ITT', idSelectAssessor2='assessor-jud-domain-2-ITT_check', clear=false);
            }

            q3_1 = document.getElementById('answer_3_1');
            plan3_1 = row['3.1'];
            if (plan3_1) {
              for (let option of q3_1.options) {
                if (option.text === plan3_1) {
                  q3_1.value = option.value;
                  q3_1.dispatchEvent(new Event('change'));
                  break;
                }
              }
            }
            q3_1 = document.getElementById('answer_3_1_check');
            plan3_1 = correspondingCheck['3.1'];
            if (plan3_1) {
              for (let option of q3_1.options) {
                if (option.text === plan3_1) {
                  q3_1.value = option.value;
                  q3_1.dispatchEvent(new Event('change'));
                  break;
                }
              }
            }

            document.getElementById('3.1_comment').value = row['Note for 3.1'];
            document.getElementById('3.1_comment_check').value = correspondingCheck['Note for 3.1'];

            q3_2 = document.getElementById('answer_3_2');
            plan3_2 = row['3.2'];
            if (plan3_2) {
              for (let option of q3_2.options) {
                if (option.text === plan3_2) {
                  q3_2.value = option.value;
                  q3_2.dispatchEvent(new Event('change'));
                  break;
                }
              }
            }
            q3_2 = document.getElementById('answer_3_2_check');
            plan3_2 = correspondingCheck['3.2'];
            if (plan3_2) {
              for (let option of q3_2.options) {
                if (option.text === plan3_2) {
                  q3_2.value = option.value;
                  q3_2.dispatchEvent(new Event('change'));
                  break;
                }
              }
            }

            document.getElementById('3.2_comment').value = row['Note for 3.2'];
            document.getElementById('3.2_comment_check').value = correspondingCheck['Note for 3.2'];

            q3_3 = document.getElementById('answer_3_3');
            plan3_3 = row['3.3'];
            if (plan3_3) {
              for (let option of q3_3.options) {
                if (option.text === plan3_3) {
                  q3_3.value = option.value;
                  q3_3.dispatchEvent(new Event('change'));
                  break;
                }
              }
            }
            q3_3 = document.getElementById('answer_3_3_check');
            plan3_3 = correspondingCheck['3.3'];
            if (plan3_3) {
              for (let option of q3_3.options) {
                if (option.text === plan3_3) {
                  q3_3.value = option.value;
                  q3_3.dispatchEvent(new Event('change'));
                  break;
                }
              }
            }

            document.getElementById('3.3_and_3.4_comment').value = row['Note for 3.3&3.4'];
            document.getElementById('3.3_and_3.4_comment_check').value = correspondingCheck['Note for 3.3&3.4'];

            q3_4 = document.getElementById('answer_3_4');
            plan3_4 = row['3.4'];
            if (plan3_4) {
              for (let option of q3_4.options) {
                if (option.text === plan3_4) {
                  q3_4.value = option.value;
                  q3_4.dispatchEvent(new Event('change'));
                  break;
                }
              }
            }
            q3_4 = document.getElementById('answer_3_4_check');
            plan3_4 = correspondingCheck['3.4'];
            if (plan3_4) {
              for (let option of q3_4.options) {
                if (option.text === plan3_4) {
                  q3_4.value = option.value;
                  q3_4.dispatchEvent(new Event('change'));
                  break;
                }
              }
            }

            updateDomain3AlgResult();
            assessorJud = document.getElementById('assessor-jud-domain-3');
            assessorJudPlan = row["3.0 Assessor's judgement"];
            if (assessorJudPlan) {
              for (let option of assessorJud) {
                if (option.text === assessorJudPlan) {
                  assessorJud.value = option.value;
                  assessorJud.dispatchEvent(new Event('change'));
                  break;
                }
              }
            }
            defineAssessorJudDomain3();
            assessorJud = document.getElementById('assessor-jud-domain-3_check');
            assessorJudPlan = correspondingCheck["3.0 Assessor's judgement"];
            if (assessorJudPlan) {
              for (let option of assessorJud) {
                if (option.text === assessorJudPlan) {
                  assessorJud.value = option.value;
                  assessorJud.dispatchEvent(new Event('change'));
                  break;
                }
              }
            }

            defineOverAllBiasForCheckDomains('assessor-jud-domain-3_check', 'overall-bias-domain-3_check');

            document.getElementById('assessor_jud_domain_3').value = row['3.0 Gerenal notes'];
            document.getElementById('assessor_jud_domain_3_check').value = correspondingCheck['3.0 Gerenal notes'];
            
            changeSelectsBackgroundColor(idSelectConsensus='assessor-jud-domain-3', idSelectAssessor2='assessor-jud-domain-3_check', clear=false);

            
            q4_1 = document.getElementById('answer_4_1');
            plan4_1 = row['4.1'];
            if (plan4_1) {
              for (let option of q4_1.options) {
                if (option.text === plan4_1) {
                  q4_1.value = option.value;
                  q4_1.dispatchEvent(new Event('change'));
                  break;
                }
              }
            }
            q4_1 = document.getElementById('answer_4_1_check');
            plan4_1 = correspondingCheck['4.1'];
            if (plan4_1) {
              for (let option of q4_1.options) {
                if (option.text === plan4_1) {
                  q4_1.value = option.value;
                  q4_1.dispatchEvent(new Event('change'));
                  break;
                }
              }
            }

            document.getElementById('4.1_comment').value = row['Note for 4.1'];
            document.getElementById('4.1_comment_check').value = correspondingCheck['Note for 4.1'];

            q4_2 = document.getElementById('answer_4_2');
            plan4_2 = row['4.2'];
            if (plan4_2) {
              for (let option of q4_2.options) {
                if (option.text === plan4_2) {
                  q4_2.value = option.value;
                  q4_2.dispatchEvent(new Event('change'));
                  break;
                }
              }
            }
            q4_2 = document.getElementById('answer_4_2_check');
            plan4_2 = correspondingCheck['4.2'];
            if (plan4_2) {
              for (let option of q4_2.options) {
                if (option.text === plan4_2) {
                  q4_2.value = option.value;
                  q4_2.dispatchEvent(new Event('change'));
                  break;
                }
              }
            }

            document.getElementById('4.2_comment').value = row['Note for 4.2'];
            document.getElementById('4.2_comment_check').value = correspondingCheck['Note for 4.2'];

            q4_3 = document.getElementById('answer_4_3');
            plan4_3 = row['4.3'];
            if (plan4_3) {
              for (let option of q4_3.options) {
                if (option.text === plan4_3) {
                  q4_3.value = option.value;
                  q4_3.dispatchEvent(new Event('change'));
                  break;
                }
              }
            }
            q4_3 = document.getElementById('answer_4_3_check');
            plan4_3 = correspondingCheck['4.3'];
            if (plan4_3) {
              for (let option of q4_3.options) {
                if (option.text === plan4_3) {
                  q4_3.value = option.value;
                  q4_3.dispatchEvent(new Event('change'));
                  break;
                }
              }
            }
            
            document.getElementById('4.3_comment').value = row['Note for 4.3'];
            document.getElementById('4.3_comment_check').value = correspondingCheck['Note for 4.3'];

            q4_4 = document.getElementById('answer_4_4');
            plan4_4 = row['4.4'];
            if (plan4_4) {
              for (let option of q4_4.options) {
                if (option.text === plan4_4) {
                  q4_4.value = option.value;
                  q4_4.dispatchEvent(new Event('change'));
                  break;
                }
              }
            }
            q4_4 = document.getElementById('answer_4_4_check');
            plan4_4 = correspondingCheck['4.4'];
            if (plan4_4) {
              for (let option of q4_4.options) {
                if (option.text === plan4_4) {
                  q4_4.value = option.value;
                  q4_4.dispatchEvent(new Event('change'));
                  break;
                }
              }
            }

            document.getElementById('4.4_and_4.5_comment').value = row['Note for 4.4&4.5'];
            document.getElementById('4.4_and_4.5_comment_check').value = correspondingCheck['Note for 4.4&4.5'];

            q4_5 = document.getElementById('answer_4_5');
            plan4_5 = row['4.5'];
            if (plan4_5) {
              for (let option of q4_5.options) {
                if (option.text === plan4_5) {
                  q4_5.value = option.value;
                  q4_5.dispatchEvent(new Event('change'));
                  break;
                }
              }
            }
            updateDomain4AlgResult();
            q4_5 = document.getElementById('answer_4_5_check');
            plan4_5 = correspondingCheck['4.5'];
            if (plan4_5) {
              for (let option of q4_5.options) {
                if (option.text === plan4_5) {
                  q4_5.value = option.value;
                  q4_5.dispatchEvent(new Event('change'));
                  break;
                }
              }
            }

            assessorJud = document.getElementById('assessor-jud-domain-4');
            assessorJudPlan = row["4.0 Assessor's Judgement"];
            if (assessorJudPlan) {
              for (let option of assessorJud) {
                if (option.text === assessorJudPlan) {
                  assessorJud.value = option.value;
                  assessorJud.dispatchEvent(new Event('change'));
                  break;
                }
              }
            }
            defineAssessorJudDomain4();
            assessorJud = document.getElementById('assessor-jud-domain-4_check');
            assessorJudPlan = correspondingCheck["4.0 Assessor's Judgement"];
            if (assessorJudPlan) {
              for (let option of assessorJud) {
                if (option.text === assessorJudPlan) {
                  assessorJud.value = option.value;
                  assessorJud.dispatchEvent(new Event('change'));
                  break;
                }
              }
            }

            defineOverAllBiasForCheckDomains('assessor-jud-domain-4_check', 'overall-bias-domain-4_check');

            document.getElementById('assessor_jud_domain_4').value = row['4.0 General note'];
            document.getElementById('assessor_jud_domain_4_check').value = correspondingCheck['4.0 General note'];
            
            changeSelectsBackgroundColor(idSelectConsensus='assessor-jud-domain-4', idSelectAssessor2='assessor-jud-domain-4_check', clear=false);

            
            q5_1 = document.getElementById('answer_5_1');
            plan5_1 = row['5.1'];
            if (plan5_1) {
              for (let option of q5_1.options) {
                if (option.text === plan5_1) {
                  q5_1.value = option.value;
                  q5_1.dispatchEvent(new Event('change'));
                  break;
                }
              }
            }
            q5_1 = document.getElementById('answer_5_1_check');
            plan5_1 = correspondingCheck['5.1'];
            if (plan5_1) {
              for (let option of q5_1.options) {
                if (option.text === plan5_1) {
                  q5_1.value = option.value;
                  q5_1.dispatchEvent(new Event('change'));
                  break;
                }
              }
            }

            document.getElementById('5.1_comment').value = row['Note for 5.1'];
            document.getElementById('5.1_comment_check').value = correspondingCheck['Note for 5.1'];

            q5_2 = document.getElementById('answer_5_2');
            plan5_2 = row['5.2'];
            if (plan5_2) {
              for (let option of q5_2.options) {
                if (option.text === plan5_2) {
                  q5_2.value = option.value;
                  q5_2.dispatchEvent(new Event('change'));
                  break;
                }
              }
            }
            q5_2 = document.getElementById('answer_5_2_check');
            plan5_2 = correspondingCheck['5.2'];
            if (plan5_2) {
              for (let option of q5_2.options) {
                if (option.text === plan5_2) {
                  q5_2.value = option.value;
                  q5_2.dispatchEvent(new Event('change'));
                  break;
                }
              }
            }

            document.getElementById('5.2_comment').value = row['Note for 5.2'];
            document.getElementById('5.2_comment_check').value = correspondingCheck['Note for 5.2'];

            q5_3 = document.getElementById('answer_5_3');
            plan5_3 = row['5.3'];
            if (plan5_3) {
              for (let option of q5_3.options) {
                if (option.text === plan5_3) {
                  q5_3.value = option.value;
                  q5_3.dispatchEvent(new Event('change'));
                  break;
                }
              }
            }
            q5_3 = document.getElementById('answer_5_3_check');
            plan5_3 = correspondingCheck['5.3'];
            if (plan5_3) {
              for (let option of q5_3.options) {
                if (option.text === plan5_3) {
                  q5_3.value = option.value;
                  q5_3.dispatchEvent(new Event('change'));
                  break;
                }
              }
            }

            document.getElementById('5.3_comment').value = row['Note for 5.3'];
            document.getElementById('5.3_comment_check').value = correspondingCheck['Note for 5.3'];

            updateDomain5AlgResult();
            assessorJud = document.getElementById('assessor-jud-domain-5');
            assessorJudPlan = row["5.0 Assessor's Judgement"];
            if (assessorJudPlan) {
              for (let option of assessorJud) {
                if (option.text === assessorJudPlan) {
                  assessorJud.value = option.value;
                  assessorJud.dispatchEvent(new Event('change'));
                  break;
                }
              }
            }
            defineAssessorJudDomain5();
            assessorJud = document.getElementById('assessor-jud-domain-5_check');
            assessorJudPlan = correspondingCheck["5.0 Assessor's Judgement"];
            if (assessorJudPlan) {
              for (let option of assessorJud) {
                if (option.text === assessorJudPlan) {
                  assessorJud.value = option.value;
                  assessorJud.dispatchEvent(new Event('change'));
                  break;
                }
              }
            }

            defineOverAllBiasForCheckDomains('assessor-jud-domain-5_check', 'overall-bias-domain-5_check');

            document.getElementById('assessor_jud_domain_5').value = row['5.0 General note'];
            document.getElementById('assessor_jud_domain_5_check').value = correspondingCheck['5.0 General note'];
            
            changeSelectsBackgroundColor(idSelectConsensus='assessor-jud-domain-5', idSelectAssessor2='assessor-jud-domain-5_check', clear=false);

            
            overallBiasAlgorithm();
            assessorJud = document.getElementById('overall-assessor-jud-select');
            assessorJudPlan = row["Assessor's overall Judgement"];
            if (assessorJudPlan) {
              for (let option of assessorJud) {
                if (option.text === assessorJudPlan) {
                  assessorJud.value = option.value;
                  assessorJud.dispatchEvent(new Event('change'));
                  break;
                }
              }
            }
            assessorJud = document.getElementById('overall-assessor-jud-select_check');
            assessorJudPlan = correspondingCheck["Assessor's overall Judgement"];
            if (assessorJudPlan) {
              for (let option of assessorJud) {
                if (option.text === assessorJudPlan) {
                  assessorJud.value = option.value;
                  assessorJud.dispatchEvent(new Event('change'));
                  break;
                }
              }
            }

            document.getElementById('overall_assessor_jud_comment').value = row['6.0 General Note'];
            document.getElementById('overall_assessor_jud_comment_check').value = correspondingCheck['6.0 General Note'];
            
            changeSelectsBackgroundColor(idSelectConsensus='overall-assessor-jud-select', idSelectAssessor2='overall-assessor-jud-select_check', clear=false);

            return;
          }
        });
        updateStatus('edit');
      }

    }

    function getAlgAssessmentResult(domain) {
      result = '';
      switch (domain) {
        case 'domain-1':
          let resultDiv1 = document.getElementById('alg-result-domain-1');
          result = resultDiv1.textContent.trim();
          break;
        case 'domain-2-pp':
          let resultDiv2pp = document.getElementById('alg-result-domain-2-PP');
          result = resultDiv2pp.textContent.trim();
          break;
        case 'domain-2-itt':
          let resultDiv2itt = document.getElementById('alg-result-domain-2-ITT');
          result = resultDiv2itt.textContent.trim();
          break;
        case 'domain-3':
          let resultDiv3 = document.getElementById('alg-result-domain-3');
          result = resultDiv3.textContent.trim();
          break;
        case 'domain-4':
          let resultDiv4 = document.getElementById('alg-result-domain-4');
          result = resultDiv4.textContent.trim();
          break;
        case 'domain-5':
          let resultDiv5 = document.getElementById('alg-result-domain-5');
          result = resultDiv5.textContent.trim();
          break;
        case 'overall-bias':
          let resultDiv6 = document.getElementById('alg-result-overall');
          result = resultDiv6.textContent.trim();
          break;
      }

      if (result === 'Algorithm') {
        result = '';
      }

      return result;
    }

    function resetDiv(divID, isOverAllBias = false) {
      const resultDiv = document.getElementById(divID);

      if (isOverAllBias) {
        resultDiv.textContent = "";
        resultDiv.style.backgroundColor = "#F0F0F0";
        resultDiv.style.color = "#666";
      } else {
        resultDiv.textContent = 'Algorithm';
        resultDiv.style.backgroundColor = '#f0f0f0';
        resultDiv.style.color = '#666';
      }
    }

    function clearForm() {
      document.getElementById('assessment-id').value = '';
      document.getElementById('assessor').value = '';
      document.getElementById('header-assessor').value = '';
      document.getElementById('study-id').value = '';
      document.getElementById('header-study-id').value = '';
      document.getElementById('ref-label').value = '';
      document.getElementById('experimental').value = '';
      document.getElementById('comparator').value = '';
      document.getElementById('outcome').value = '';
      document.getElementById('numerical-result').value = '';

      const checkboxes = document.querySelectorAll('.checkbox-group input[type="checkbox"]');
      checkboxes.forEach(checkbox => {
        checkbox.checked = false;
      });

      document.getElementById('assessment-aim').value = '';
      document.getElementById('assessment-aim').dispatchEvent(new Event('change'));

      document.getElementById('weight-analysis').value = '';

      
      document.getElementById('answer_1_1').value = '';
      document.getElementById('answer_1_1').dispatchEvent(new Event('change'));
      document.getElementById('answer_1_1_check').value = '';
      document.getElementById('answer_1_2').value = '';
      document.getElementById('answer_1_2').dispatchEvent(new Event('change'));
      document.getElementById('answer_1_2_check').value = '';
      document.getElementById('comments_1_1_and_1_2').value = '';
      document.getElementById('comments_1_1_and_1_2_check').value = '';
      document.getElementById('answer_1_3').value = '';
      document.getElementById('answer_1_3').dispatchEvent(new Event('change'));
      document.getElementById('answer_1_3_check').value = '';
      document.getElementById('comments_1_3').value = '';
      document.getElementById('comments_1_3_check').value = '';
      resetDiv("alg-result-domain-1", isOverAllBias = false);
      document.getElementById('assessor-jud-domain-1').value = '';
      document.getElementById('assessor-jud-domain-1').dispatchEvent(new Event('change'));
      document.getElementById('assessor-jud-domain-1_check').value = '';
      document.getElementById('assessor_jud_domain_1').value = '';
      document.getElementById('assessor_jud_domain_1_check').value = '';
      defineAssessorJudDomain1();
      resetDiv("overall-bias-domain-1", isOverAllBias = true);
      resetDiv("overall-bias-domain-1_check", isOverAllBias = true);
      changeSelectsBackgroundColor(idSelectConsensus='assessor-jud-domain-1', idSelectAssessor2='assessor-jud-domain-1_check', clear=true);

      
      document.getElementById('answer_2_1_pp').value = '';
      document.getElementById('answer_2_1_pp').dispatchEvent(new Event('change'));
      document.getElementById('answer_2_1_pp_check').value = '';
      document.getElementById('answer_2_2_pp').value = '';
      document.getElementById('answer_2_2_pp').dispatchEvent(new Event('change'));
      document.getElementById('answer_2_2_pp_check').value = '';
      document.getElementById('2.1_and_2.2_comment_PP').value = '';
      document.getElementById('2.1_and_2.2_comment_PP_check').value = '';
      document.getElementById('answer_2_3_pp').value = '';
      document.getElementById('answer_2_3_pp').dispatchEvent(new Event('change'));
      document.getElementById('answer_2_3_pp_check').value = '';
      document.getElementById('2.3_comment_PP').value = '';
      document.getElementById('2.3_comment_PP_check').value = '';
      document.getElementById('answer_2_4_pp').value = '';
      document.getElementById('answer_2_4_pp').dispatchEvent(new Event('change'));
      document.getElementById('answer_2_4_pp_check').value = '';
      document.getElementById('2.4_comment_PP').value = '';
      document.getElementById('2.4_comment_PP_check').value = '';
      document.getElementById('answer_2_5_pp').value = '';
      document.getElementById('answer_2_5_pp').dispatchEvent(new Event('change'));
      document.getElementById('answer_2_5_pp_check').value = '';
      document.getElementById('2.5_comment_PP').value = '';
      document.getElementById('2.5_comment_PP_check').value = '';
      document.getElementById('answer_2_6_pp').value = '';
      document.getElementById('answer_2_6_pp').dispatchEvent(new Event('change'));
      document.getElementById('answer_2_6_pp_check').value = '';
      document.getElementById('2.6_comment_PP').value = '';
      document.getElementById('2.6_comment_PP_check').value = '';
      document.getElementById('assessor-jud-domain-2-PP').value = '';
      document.getElementById('assessor-jud-domain-2-PP').dispatchEvent(new Event('change'));
      document.getElementById('assessor-jud-domain-2-PP_check').value = '';
      document.getElementById('assessor_jud_domain_2_PP').value = '';
      document.getElementById('assessor_jud_domain_2_PP_check').value = '';
      changeSelectsBackgroundColor(idSelectConsensus='assessor-jud-domain-2-PP', idSelectAssessor2='assessor-jud-domain-2-PP_check', clear=true);

      
      document.getElementById('answer_2_1_itt').value = '';
      document.getElementById('answer_2_1_itt').dispatchEvent(new Event('change'));
      document.getElementById('answer_2_1_itt_check').value = '';
      document.getElementById('answer_2_2_itt').value = '';
      document.getElementById('answer_2_2_itt').dispatchEvent(new Event('change'));
      document.getElementById('answer_2_2_itt_check').value = '';
      document.getElementById('2.1_and_2.2_comment_ITT').value = '';
      document.getElementById('2.1_and_2.2_comment_ITT_check').value = '';
      document.getElementById('answer_2_3_itt').value = '';
      document.getElementById('answer_2_3_itt').dispatchEvent(new Event('change'));
      document.getElementById('answer_2_3_itt_check').value = '';
      document.getElementById('2.3_comment_ITT').value = '';
      document.getElementById('2.3_comment_ITT_check').value = '';
      document.getElementById('answer_2_4_itt').value = '';
      document.getElementById('answer_2_4_itt').dispatchEvent(new Event('change'));
      document.getElementById('answer_2_4_itt_check').value = '';
      document.getElementById('2.4_comment_ITT').value = '';
      document.getElementById('2.4_comment_ITT_check').value = '';
      document.getElementById('answer_2_5_itt').value = '';
      document.getElementById('answer_2_5_itt').dispatchEvent(new Event('change'));
      document.getElementById('answer_2_5_itt_check').value = '';
      document.getElementById('2.5_comment_ITT').value = '';
      document.getElementById('2.5_comment_ITT_check').value = '';
      document.getElementById('answer_2_6_itt').value = '';
      document.getElementById('answer_2_6_itt').dispatchEvent(new Event('change'));
      document.getElementById('answer_2_6_itt_check').value = '';
      document.getElementById('2.6_comment_ITT').value = '';
      document.getElementById('2.6_comment_ITT_check').value = '';
      document.getElementById('answer_2_7_itt').value = '';
      document.getElementById('answer_2_7_itt').dispatchEvent(new Event('change'));
      document.getElementById('answer_2_7_itt_check').value = '';
      document.getElementById('2.7_comment_ITT').value = '';
      document.getElementById('2.7_comment_ITT_check').value = '';
      document.getElementById('assessor-jud-domain-2-ITT').value = '';
      document.getElementById('assessor-jud-domain-2-ITT').dispatchEvent(new Event('change'));
      document.getElementById('assessor-jud-domain-2-ITT_check').value = '';
      document.getElementById('assessor_jud_domain_2_ITT').value = '';
      document.getElementById('assessor_jud_domain_2_ITT_check').value = '';
      resetDiv("overall-bias-domain-2_check", isOverAllBias = true);
      changeSelectsBackgroundColor(idSelectConsensus='assessor-jud-domain-2-ITT', idSelectAssessor2='assessor-jud-domain-2-ITT_check', clear=true);

      
      document.getElementById('answer_3_1').value = '';
      document.getElementById('answer_3_1').dispatchEvent(new Event('change'));
      document.getElementById('answer_3_1_check').value = '';
      document.getElementById('3.1_comment').value = '';
      document.getElementById('3.1_comment_check').value = '';
      document.getElementById('answer_3_2').value = '';
      document.getElementById('answer_3_2').dispatchEvent(new Event('change'));
      document.getElementById('answer_3_2_check').value = '';
      document.getElementById('3.2_comment').value = '';
      document.getElementById('3.2_comment_check').value = '';
      document.getElementById('answer_3_3').value = '';
      document.getElementById('answer_3_3').dispatchEvent(new Event('change'));
      document.getElementById('answer_3_3_check').value = '';
      document.getElementById('3.3_and_3.4_comment').value = '';
      document.getElementById('3.3_and_3.4_comment_check').value = '';
      document.getElementById('answer_3_4').value = '';
      document.getElementById('answer_3_4').dispatchEvent(new Event('change'));
      document.getElementById('answer_3_4_check').value = '';
      resetDiv("alg-result-domain-3", isOverAllBias = false);
      document.getElementById('assessor-jud-domain-3').value = '';
      document.getElementById('assessor-jud-domain-3').dispatchEvent(new Event('change'));
      document.getElementById('assessor-jud-domain-3_check').value = '';
      document.getElementById('assessor_jud_domain_3').value = '';
      document.getElementById('assessor_jud_domain_3_check').value = '';
      resetDiv("overall-bias-domain-3", isOverAllBias = true);
      resetDiv("overall-bias-domain-3_check", isOverAllBias = true);
      changeSelectsBackgroundColor(idSelectConsensus='assessor-jud-domain-3', idSelectAssessor2='assessor-jud-domain-3_check', clear=true);

      
      document.getElementById('answer_4_1').value = '';
      document.getElementById('answer_4_1').dispatchEvent(new Event('change'));
      document.getElementById('answer_4_1_check').value = '';
      document.getElementById('4.1_comment').value = '';
      document.getElementById('4.1_comment_check').value = '';
      document.getElementById('answer_4_2').value = '';
      document.getElementById('answer_4_2').dispatchEvent(new Event('change'));
      document.getElementById('answer_4_2_check').value = '';
      document.getElementById('4.2_comment').value = '';
      document.getElementById('4.2_comment_check').value = '';
      document.getElementById('answer_4_3').value = '';
      document.getElementById('answer_4_3').dispatchEvent(new Event('change'));
      document.getElementById('answer_4_3_check').value = '';
      document.getElementById('4.3_comment').value = '';
      document.getElementById('4.3_comment_check').value = '';
      document.getElementById('answer_4_4').value = '';
      document.getElementById('answer_4_4').dispatchEvent(new Event('change'));
      document.getElementById('answer_4_4_check').value = '';
      document.getElementById('4.4_and_4.5_comment').value = '';
      document.getElementById('4.4_and_4.5_comment_check').value = '';
      document.getElementById('answer_4_5').value = '';
      document.getElementById('answer_4_5').dispatchEvent(new Event('change'));
      document.getElementById('answer_4_5_check').value = '';
      resetDiv("alg-result-domain-4", isOverAllBias = false);
      document.getElementById('assessor-jud-domain-4').value = '';
      document.getElementById('assessor-jud-domain-4').dispatchEvent(new Event('change'));
      document.getElementById('assessor-jud-domain-4_check').value = '';
      document.getElementById('assessor_jud_domain_4').value = '';
      document.getElementById('assessor_jud_domain_4_check').value = '';
      resetDiv("overall-bias-domain-4", isOverAllBias = true);
      resetDiv("overall-bias-domain-4_check", isOverAllBias = true);
      changeSelectsBackgroundColor(idSelectConsensus='assessor-jud-domain-4', idSelectAssessor2='assessor-jud-domain-4_check', clear=true);

      
      document.getElementById('answer_5_1').value = '';
      document.getElementById('answer_5_1').dispatchEvent(new Event('change'));
      document.getElementById('answer_5_1_check').value = '';
      document.getElementById('5.1_comment').value = '';
      document.getElementById('5.1_comment_check').value = '';
      document.getElementById('answer_5_2').value = '';
      document.getElementById('answer_5_2').dispatchEvent(new Event('change'));
      document.getElementById('answer_5_2_check').value = '';
      document.getElementById('5.2_comment').value = '';
      document.getElementById('5.2_comment_check').value = '';
      document.getElementById('answer_5_3').value = '';
      document.getElementById('answer_5_3').dispatchEvent(new Event('change'));
      document.getElementById('answer_5_3_check').value = '';
      document.getElementById('5.3_comment').value = '';
      document.getElementById('5.3_comment_check').value = '';
      resetDiv("alg-result-domain-5", isOverAllBias = false);
      document.getElementById('assessor-jud-domain-5').value = '';
      document.getElementById('assessor-jud-domain-5').dispatchEvent(new Event('change'));
      document.getElementById('assessor-jud-domain-5_check').value = '';
      document.getElementById('assessor_jud_domain_5').value = '';
      document.getElementById('assessor_jud_domain_5_check').value = '';
      resetDiv("overall-bias-domain-5", isOverAllBias = true);
      resetDiv("overall-bias-domain-5_check", isOverAllBias = true);
      changeSelectsBackgroundColor(idSelectConsensus='assessor-jud-domain-5', idSelectAssessor2='assessor-jud-domain-5_check', clear=true);

      
      resetDiv("alg-result-overall", isOverAllBias = false);
      document.getElementById('overall-assessor-jud-select').value = '';
      document.getElementById('overall-assessor-jud-select').dispatchEvent(new Event('change'));
      document.getElementById('overall-assessor-jud-select_check').value = '';
      document.getElementById('overall_assessor_jud_comment').value = '';
      document.getElementById('overall_assessor_jud_comment_check').value = '';
      changeSelectsBackgroundColor(idSelectConsensus='overall-assessor-jud-select', idSelectAssessor2='overall-assessor-jud-select_check', clear=true);
    }

    function updateStatus(status) {
      const statusDiv = document.getElementById('status-text');

      if (!statusDiv) {
        console.error('Element with ID "status-text" not found.');
        return;
      }

      switch (status) {
        case 'loading':
          statusDiv.textContent = 'Loading data...';
          statusDiv.style.color = '#4a5568';
          break;

        case 'new':
          statusDiv.textContent = 'New assessment';
          statusDiv.style.color = '#007C3D';
          break;

        case 'edit':
          statusDiv.textContent = 'Edit assessment';
          statusDiv.style.color = '#007C3D';
          break;
      }
    }

    function onAssessmentIdInput() {
      
      const inputElement = document.getElementById('assessment-id');
      const selectElement = document.getElementById('header-assessment-id');

      
      if (!inputElement || !selectElement) {
        console.error('Um dos elementos (input ou select) nÃ£o foi encontrado.');
        return;
      }

      
      if (selectElement.value === '') {
        
        const selectedOption = selectElement.options[selectElement.selectedIndex];

        
        if (selectedOption) {
          const inputValue = inputElement.value;
          const initialText = 'New:';
          selectedOption.textContent = `${initialText} ${inputValue}`;
        }
      }
    }

  </script>
</body>

</html>